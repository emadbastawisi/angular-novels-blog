"use strict";(self.webpackChunknovels_blog_app=self.webpackChunknovels_blog_app||[]).push([[179],{2011:(at,Ee,O)=>{O.d(Ee,{Dh:()=>Pe,GT:()=>de,cc:()=>Ce,hO:()=>Fe,on:()=>V,pX:()=>ne,xv:()=>he});var h=O(2223),q=O(9260),P=O(4976);at=O.hmd(at);const J=["ngOnDestroy"],ne=(Oe,gt,ut,te={})=>new Proxy(Oe,{get:(ge,K)=>ut.runOutsideAngular(()=>{var fe;if(Oe[K])return!(null===(fe=te?.spy)||void 0===fe)&&fe.get&&te.spy.get(K,Oe[K]),Oe[K];if(J.indexOf(K)>-1)return()=>{};const Te=gt.toPromise().then(Le=>{const ie=Le&&Le[K];return"function"==typeof ie?ie.bind(Le):ie&&ie.then?ie.then(je=>ut.run(()=>je)):ut.run(()=>ie)});return new Proxy(()=>{},{get:(Le,ie)=>Te[ie],apply:(Le,ie,je)=>Te.then(Ht=>{var wr;const Kr=Ht&&Ht(...je);return!(null===(wr=te?.spy)||void 0===wr)&&wr.apply&&te.spy.apply(K,je,Kr),Kr})})})}),de=(Oe,gt)=>{gt.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(te=>{Object.defineProperty(Oe.prototype,te,Object.getOwnPropertyDescriptor(ut.prototype||ut,te))})})};class pe{constructor(gt){return gt}}const Pe=new h.OlP("angularfire2.app.options"),he=new h.OlP("angularfire2.app.name");function V(Oe,gt,ut){const ge="object"==typeof ut&&ut||{};ge.name=ge.name||"string"==typeof ut&&ut||"[DEFAULT]";const fe=q.Z.apps.filter(Te=>Te&&Te.name===ge.name)[0]||gt.runOutsideAngular(()=>q.Z.initializeApp(Oe,ge));try{JSON.stringify(Oe)!==JSON.stringify(fe.options)&&j("error",`${fe.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(fe)}const j=(Oe,...gt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Oe](...gt)},Q={provide:pe,useFactory:V,deps:[Pe,h.R0b,[new h.FiY,he]]};let Fe=(()=>{class Oe{constructor(ut){q.Z.registerVersion("angularfire",P.q4.full,"core"),q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),q.Z.registerVersion("angular",h.q4F.full,ut.toString())}static initializeApp(ut,te){return{ngModule:Oe,providers:[{provide:Pe,useValue:ut},{provide:he,useValue:te}]}}}return Oe.\u0275fac=function(ut){return new(ut||Oe)(h.LFG(h.Lbi))},Oe.\u0275mod=h.oAB({type:Oe}),Oe.\u0275inj=h.cJS({providers:[Q]}),Oe})();function Ce(Oe,gt,ut,te,ge){const[,K,fe]=globalThis.\u0275AngularfireInstanceCache.find(Te=>Te[0]===Oe)||[];if(K)return function Ye(Oe,gt){try{return Oe.toString()===gt.toString()}catch{return Oe===gt}}(ge,fe)||(ze("error",`${gt} was already initialized on the ${ut} Firebase App with different settings.${Me?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:ge,was:fe})),K;{const Te=te();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Te,ge]),Te}}const Me=!!at.hot,ze=(Oe,...gt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Oe](...gt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(at,Ee,O)=>{O.d(Ee,{q4:()=>As,iC:()=>Th,HU:()=>wc,vb:()=>bh,JM:()=>up});var h=O(2223),q=O(259),P=O(5861),J=O(6881),ne=O(2090),de=O(4859),pe=O(1877);const Pe=(E,C)=>C.some(M=>E instanceof M);let he,V;const Fe=new WeakMap,Ce=new WeakMap,Ye=new WeakMap,Me=new WeakMap,ze=new WeakMap;let ut={get(E,C,M){if(E instanceof IDBTransaction){if("done"===C)return Ce.get(E);if("objectStoreNames"===C)return E.objectStoreNames||Ye.get(E);if("store"===C)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return fe(E[C])},set:(E,C,M)=>(E[C]=M,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function K(E){return"function"==typeof E?function ge(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(Te(this),C),fe(Fe.get(this))}:function(...C){return fe(E.apply(Te(this),C))}:function(C,...M){const k=E.call(Te(this),C,...M);return Ye.set(k,C.sort?C.sort():[C]),fe(k)}}(E):(E instanceof IDBTransaction&&function gt(E){if(Ce.has(E))return;const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",ue),E.removeEventListener("abort",ue)},W=()=>{M(),$()},ue=()=>{k(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",ue),E.addEventListener("abort",ue)});Ce.set(E,C)}(E),Pe(E,function j(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ut):E)}function fe(E){if(E instanceof IDBRequest)return function Oe(E){const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",ue)},W=()=>{M(fe(E.result)),$()},ue=()=>{k(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",ue)});return C.then(M=>{M instanceof IDBCursor&&Fe.set(M,E)}).catch(()=>{}),ze.set(C,E),C}(E);if(Me.has(E))return Me.get(E);const C=K(E);return C!==E&&(Me.set(E,C),ze.set(C,E)),C}const Te=E=>ze.get(E),je=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],wr=new Map;function Kr(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(wr.get(C))return wr.get(C);const M=C.replace(/FromIndex$/,""),k=C!==M,$=Ht.includes(M);if(!(M in(k?IDBIndex:IDBObjectStore).prototype)||!$&&!je.includes(M))return;const W=function(){var ue=(0,P.Z)(function*(Ge,...Be){const st=this.transaction(Ge,$?"readwrite":"readonly");let St=st.store;return k&&(St=St.index(Be.shift())),(yield Promise.all([St[M](...Be),$&&st.done]))[0]});return function(Be){return ue.apply(this,arguments)}}();return wr.set(C,W),W}!function te(E){ut=E(ut)}(E=>({...E,get:(C,M,k)=>Kr(C,M)||E.get(C,M,k),has:(C,M)=>!!Kr(C,M)||E.has(C,M)}));const Ps="@firebase/installations",ae="0.6.4",me=1e4,we=`w:${ae}`,Ae="FIS_v2",He="https://firebaseinstallations.googleapis.com/v1",Ve=36e5,tt=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(E){return E instanceof ne.ZR&&E.code.includes("request-failed")}function Dn({projectId:E}){return`${He}/projects/${E}/installations`}function nn(E){return{token:E.token,requestStatus:2,expiresIn:oo(E.expiresIn),creationTime:Date.now()}}function Fn(E,C){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,P.Z)(function*(E,C){const k=(yield C.json()).error;return tt.create("request-failed",{requestName:E,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function si({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Yr(E){return er.apply(this,arguments)}function er(){return(er=(0,P.Z)(function*(E){const C=yield E();return C.status>=500&&C.status<600?E():C})).apply(this,arguments)}function oo(E){return Number(E.replace("s","000"))}function oi(){return(oi=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:C},{fid:M}){const k=Dn(E),$=si(E),W=C.getImmediate({optional:!0});if(W){const st=yield W.getHeartbeatsHeader();st&&$.append("x-firebase-client",st)}const Ge={method:"POST",headers:$,body:JSON.stringify({fid:M,authVersion:Ae,appId:E.appId,sdkVersion:we})},Be=yield Yr(()=>fetch(k,Ge));if(Be.ok){const st=yield Be.json();return{fid:st.fid||M,registrationStatus:2,refreshToken:st.refreshToken,authToken:nn(st.authToken)}}throw yield Fn("Create Installation",Be)})).apply(this,arguments)}function ai(E){return new Promise(C=>{setTimeout(C,E)})}const Ua=/^[cdef][\w-]{21}$/,qe="";function lt(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const M=function mt(E){return function ks(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Ua.test(M)?M:qe}catch{return qe}}function hn(E){return`${E.appName}!${E.appId}`}const xn=new Map;function Qr(E,C){const M=hn(E);Ba(M,C),function un(E,C){const M=function jt(){return!xr&&"BroadcastChannel"in self&&(xr=new BroadcastChannel("[Firebase] FID Change"),xr.onmessage=E=>{Ba(E.data.key,E.data.fid)}),xr}();M&&M.postMessage({key:E,fid:C}),function Xi(){0===xn.size&&xr&&(xr.close(),xr=null)}()}(M,C)}function Ba(E,C){const M=xn.get(E);if(M)for(const k of M)k(C)}let xr=null;const uo="firebase-installations-database",ja=1,ui="firebase-installations-store";let es=null;function Ir(){return es||(es=function Le(E,C,{blocked:M,upgrade:k,blocking:$,terminated:W}={}){const ue=indexedDB.open(E,C),Ge=fe(ue);return k&&ue.addEventListener("upgradeneeded",Be=>{k(fe(ue.result),Be.oldVersion,Be.newVersion,fe(ue.transaction))}),M&&ue.addEventListener("blocked",()=>M()),Ge.then(Be=>{W&&Be.addEventListener("close",()=>W()),$&&Be.addEventListener("versionchange",()=>$())}).catch(()=>{}),Ge}(uo,ja,{upgrade:(E,C)=>{0===C&&E.createObjectStore(ui)}})),es}function ar(E,C){return vn.apply(this,arguments)}function vn(){return(vn=(0,P.Z)(function*(E,C){const M=hn(E),$=(yield Ir()).transaction(ui,"readwrite"),W=$.objectStore(ui),ue=yield W.get(M);return yield W.put(C,M),yield $.done,(!ue||ue.fid!==C.fid)&&Qr(E,C.fid),C})).apply(this,arguments)}function ts(E){return tn.apply(this,arguments)}function tn(){return(tn=(0,P.Z)(function*(E){const C=hn(E),k=(yield Ir()).transaction(ui,"readwrite");yield k.objectStore(ui).delete(C),yield k.done})).apply(this,arguments)}function ns(E,C){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,P.Z)(function*(E,C){const M=hn(E),$=(yield Ir()).transaction(ui,"readwrite"),W=$.objectStore(ui),ue=yield W.get(M),Ge=C(ue);return void 0===Ge?yield W.delete(M):yield W.put(Ge,M),yield $.done,Ge&&(!ue||ue.fid!==Ge.fid)&&Qr(E,Ge.fid),Ge})).apply(this,arguments)}function U(E){return L.apply(this,arguments)}function L(){return L=(0,P.Z)(function*(E){let C;const M=yield ns(E.appConfig,k=>{const $=function z(E){return fn(E||{fid:lt(),registrationStatus:0})}(k),W=function _e(E,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(tt.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},k=function se(E,C){return nt.apply(this,arguments)}(E,M);return{installationEntry:M,registrationPromise:k}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:ft(E)}:{installationEntry:C}}(E,$);return C=W.registrationPromise,W.installationEntry});return M.fid===qe?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}}),L.apply(this,arguments)}function nt(){return nt=(0,P.Z)(function*(E,C){try{const M=yield function Va(E,C){return oi.apply(this,arguments)}(E,C);return ar(E.appConfig,M)}catch(M){throw ct(M)&&409===M.customData.serverCode?yield ts(E.appConfig):yield ar(E.appConfig,{fid:C.fid,registrationStatus:0}),M}}),nt.apply(this,arguments)}function ft(E){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,P.Z)(function*(E){let C=yield _n(E.appConfig);for(;1===C.registrationStatus;)yield ai(100),C=yield _n(E.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:k}=yield U(E);return k||M}return C})).apply(this,arguments)}function _n(E){return ns(E,C=>{if(!C)throw tt.create("installation-not-found");return fn(C)})}function fn(E){return function Et(E){return 1===E.registrationStatus&&E.registrationTime+me<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Dr(){return(Dr=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:C},M){const k=function bi(E,{fid:C}){return`${Dn(E)}/${C}/authTokens:generate`}(E,M),$=function Xn(E,{refreshToken:C}){const M=si(E);return M.append("Authorization",function ao(E){return`${Ae} ${E}`}(C)),M}(E,M),W=C.getImmediate({optional:!0});if(W){const st=yield W.getHeartbeatsHeader();st&&$.append("x-firebase-client",st)}const Ge={method:"POST",headers:$,body:JSON.stringify({installation:{sdkVersion:we,appId:E.appId}})},Be=yield Yr(()=>fetch(k,Ge));if(Be.ok)return nn(yield Be.json());throw yield Fn("Generate Auth Token",Be)})).apply(this,arguments)}function rs(E){return ci.apply(this,arguments)}function ci(){return ci=(0,P.Z)(function*(E,C=!1){let M;const k=yield ns(E.appConfig,W=>{if(!Vt(W))throw tt.create("not-registered");const ue=W.authToken;if(!C&&function Xt(E){return 2===E.requestStatus&&!function ur(E){const C=Date.now();return C<E.creationTime||E.creationTime+E.expiresIn<C+Ve}(E)}(ue))return W;if(1===ue.requestStatus)return M=function ce(E,C){return ee.apply(this,arguments)}(E,C),W;{if(!navigator.onLine)throw tt.create("app-offline");const Ge=function tr(E){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:C})}(W);return M=function ot(E,C){return Ct.apply(this,arguments)}(E,Ge),Ge}});return M?yield M:k.authToken}),ci.apply(this,arguments)}function ee(){return(ee=(0,P.Z)(function*(E,C){let M=yield xe(E.appConfig);for(;1===M.authToken.requestStatus;)yield ai(100),M=yield xe(E.appConfig);const k=M.authToken;return 0===k.requestStatus?rs(E,C):k})).apply(this,arguments)}function xe(E){return ns(E,C=>{if(!Vt(C))throw tt.create("not-registered");return function _s(E){return 1===E.requestStatus&&E.requestTime+me<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ct(){return Ct=(0,P.Z)(function*(E,C){try{const M=yield function zt(E,C){return Dr.apply(this,arguments)}(E,C),k=Object.assign(Object.assign({},C),{authToken:M});return yield ar(E.appConfig,k),M}catch(M){if(!ct(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const k=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ar(E.appConfig,k)}else yield ts(E.appConfig);throw M}}),Ct.apply(this,arguments)}function Vt(E){return void 0!==E&&2===E.registrationStatus}function $a(){return($a=(0,P.Z)(function*(E){const C=E,{installationEntry:M,registrationPromise:k}=yield U(C);return k?k.catch(console.error):rs(C).catch(console.error),M.fid})).apply(this,arguments)}function Jr(){return Jr=(0,P.Z)(function*(E,C=!1){const M=E;return yield function Kd(E){return Ti.apply(this,arguments)}(M),(yield rs(M,C)).token}),Jr.apply(this,arguments)}function Ti(){return(Ti=(0,P.Z)(function*(E){const{registrationPromise:C}=yield U(E);C&&(yield C)})).apply(this,arguments)}function ho(E){return tt.create("missing-app-config-values",{valueName:E})}const Qd="installations",im=E=>{const C=E.getProvider("app").getImmediate(),M=function Yu(E){if(!E||!E.options)throw ho("App Configuration");if(!E.name)throw ho("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!E.options[M])throw ho(M);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,J._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},ws=E=>{const C=E.getProvider("app").getImmediate(),M=(0,J._getProvider)(C,Qd).getImmediate();return{getId:()=>function co(E){return $a.apply(this,arguments)}(M),getToken:$=>function Zd(E){return Jr.apply(this,arguments)}(M,$)}};(function qf(){(0,J._registerComponent)(new de.wA(Qd,im,"PUBLIC")),(0,J._registerComponent)(new de.wA("installations-internal",ws,"PRIVATE"))})(),(0,J.registerVersion)(Ps,ae),(0,J.registerVersion)(Ps,ae,"esm2017");const Ha="@firebase/remote-config",cn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xr{constructor(C,M,k,$){this.client=C,this.storage=M,this.storageCache=k,this.logger=$}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-M,$=k<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${$}.`),$}fetch(C){var M=this;return(0,P.Z)(function*(){const[k,$]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if($&&M.isCachedDataFresh(C.cacheMaxAgeMillis,k))return $;C.eTag=$&&$.eTag;const W=yield M.client.fetch(C),ue=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&ue.push(M.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(ue),W})()}}function eh(E=navigator){return E.languages&&E.languages[0]||E.language}class is{constructor(C,M,k,$,W,ue){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=k,this.projectId=$,this.apiKey=W,this.appId=ue}fetch(C){var M=this;return(0,P.Z)(function*(){const[k,$]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Be={sdk_version:M.sdkVersion,app_instance_id:k,app_instance_id_token:$,app_id:M.appId,language_code:eh()},st={method:"POST",headers:Ge,body:JSON.stringify(Be)},St=fetch(ue,st),At=new Promise((gi,ki)=>{C.signal.addEventListener(()=>{const fa=new Error("The operation was aborted.");fa.name="AbortError",ki(fa)})});let kr;try{yield Promise.race([St,At]),kr=yield St}catch(gi){let ki="fetch-client-network";throw"AbortError"===gi?.name&&(ki="fetch-timeout"),cn.create(ki,{originalErrorMessage:gi?.message})}let sr=kr.status;const Wi=kr.headers.get("ETag")||void 0;let Ic,hs;if(200===kr.status){let gi;try{gi=yield kr.json()}catch(ki){throw cn.create("fetch-client-parse",{originalErrorMessage:ki?.message})}Ic=gi.entries,hs=gi.state}if("INSTANCE_STATE_UNSPECIFIED"===hs?sr=500:"NO_CHANGE"===hs?sr=304:("NO_TEMPLATE"===hs||"EMPTY_CONFIG"===hs)&&(Ic={}),304!==sr&&200!==sr)throw cn.create("fetch-status",{httpStatus:sr});return{status:sr,eTag:Wi,config:Ic}})()}}class za{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,P.Z)(function*(){const k=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,k)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:k}){var $=this;return(0,P.Z)(function*(){yield function Ln(E,C){return new Promise((M,k)=>{const $=Math.max(C-Date.now(),0),W=setTimeout(M,$);E.addEventListener(()=>{clearTimeout(W),k(cn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const W=yield $.client.fetch(C);return yield $.storage.deleteThrottleMetadata(),W}catch(W){if(!function Ko(E){if(!(E instanceof ne.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(W))throw W;const ue={throttleEndTimeMillis:Date.now()+(0,ne.$s)(k),backoffCount:k+1};return yield $.storage.setThrottleMetadata(ue),$.attemptFetch(C,ue)}})()}}class th{constructor(C,M,k,$,W){this.app=C,this._client=M,this._storageCache=k,this._storage=$,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function di(E,C){const M=E.target.error||void 0;return cn.create(C,{originalErrorMessage:M&&M?.message})}const zn="app_namespace_store";class gE{constructor(C,M,k,$=function $t(){return new Promise((E,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=k=>{C(di(k,"storage-open"))},M.onsuccess=k=>{E(k.target.result)},M.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(zn,{keyPath:"compositeKey"})}}catch(M){C(cn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=C,this.appName=M,this.namespace=k,this.openDbPromise=$}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,P.Z)(function*(){const k=yield M.openDbPromise;return new Promise(($,W)=>{const Ge=k.transaction([zn],"readonly").objectStore(zn),Be=M.createCompositeKey(C);try{const st=Ge.get(Be);st.onerror=St=>{W(di(St,"storage-get"))},st.onsuccess=St=>{const At=St.target.result;$(At?At.value:void 0)}}catch(st){W(cn.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(C,M){var k=this;return(0,P.Z)(function*(){const $=yield k.openDbPromise;return new Promise((W,ue)=>{const Be=$.transaction([zn],"readwrite").objectStore(zn),st=k.createCompositeKey(C);try{const St=Be.put({compositeKey:st,value:M});St.onerror=At=>{ue(di(At,"storage-set"))},St.onsuccess=()=>{W()}}catch(St){ue(cn.create("storage-set",{originalErrorMessage:St?.message}))}})})()}delete(C){var M=this;return(0,P.Z)(function*(){const k=yield M.openDbPromise;return new Promise(($,W)=>{const Ge=k.transaction([zn],"readwrite").objectStore(zn),Be=M.createCompositeKey(C);try{const st=Ge.delete(Be);st.onerror=St=>{W(di(St,"storage-delete"))},st.onsuccess=()=>{$()}}catch(st){W(cn.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Ju{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const M=C.storage.getLastFetchStatus(),k=C.storage.getLastSuccessfulFetchTimestampMillis(),$=C.storage.getActiveConfig(),W=yield M;W&&(C.lastFetchStatus=W);const ue=yield k;ue&&(C.lastSuccessfulFetchTimestampMillis=ue);const Ge=yield $;Ge&&(C.activeConfig=Ge)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function go(){return mo.apply(this,arguments)}function mo(){return(mo=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function ss(){(0,J._registerComponent)(new de.wA("remote-config",function E(C,{instanceIdentifier:M}){const k=C.getProvider("app").getImmediate(),$=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw cn.create("registration-window");if(!(0,ne.hl)())throw cn.create("indexed-db-unavailable");const{projectId:W,apiKey:ue,appId:Ge}=k.options;if(!W)throw cn.create("registration-project-id");if(!ue)throw cn.create("registration-api-key");if(!Ge)throw cn.create("registration-app-id");const Be=new gE(Ge,k.name,M=M||"firebase"),st=new Ju(Be),St=new pe.Yd(Ha);St.logLevel=pe.in.ERROR;const At=new is($,J.SDK_VERSION,M,W,ue,Ge),kr=new za(At,Be),sr=new Xr(kr,Be,st,St),Wi=new th(k,sr,st,Be,St);return function Lt(E){const C=(0,ne.m9)(E);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Wi),Wi},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(Ha,"0.4.4"),(0,J.registerVersion)(Ha,"0.4.4","esm2017")}();const fr=(E,C)=>C.some(M=>E instanceof M);let sm,qn;const Is=new WeakMap,Ds=new WeakMap,br=new WeakMap,Rr=new WeakMap,yo=new WeakMap;let qa={get(E,C,M){if(E instanceof IDBTransaction){if("done"===C)return Ds.get(E);if("objectStoreNames"===C)return E.objectStoreNames||br.get(E);if("store"===C)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return os(E[C])},set:(E,C,M)=>(E[C]=M,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function am(E){return"function"==typeof E?function Zf(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qo(){return qn||(qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(hl(this),C),os(Is.get(this))}:function(...C){return os(E.apply(hl(this),C))}:function(C,...M){const k=E.call(hl(this),C,...M);return br.set(k,C.sort?C.sort():[C]),os(k)}}(E):(E instanceof IDBTransaction&&function dl(E){if(Ds.has(E))return;const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",ue),E.removeEventListener("abort",ue)},W=()=>{M(),$()},ue=()=>{k(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",ue),E.addEventListener("abort",ue)});Ds.set(E,C)}(E),fr(E,function hi(){return sm||(sm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,qa):E)}function os(E){if(E instanceof IDBRequest)return function om(E){const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",ue)},W=()=>{M(os(E.result)),$()},ue=()=>{k(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",ue)});return C.then(M=>{M instanceof IDBCursor&&Is.set(M,E)}).catch(()=>{}),yo.set(C,E),C}(E);if(Rr.has(E))return Rr.get(E);const C=am(E);return C!==E&&(Rr.set(E,C),yo.set(C,E)),C}const hl=E=>yo.get(E);function fl(E,C,{blocked:M,upgrade:k,blocking:$,terminated:W}={}){const ue=indexedDB.open(E,C),Ge=os(ue);return k&&ue.addEventListener("upgradeneeded",Be=>{k(os(ue.result),Be.oldVersion,Be.newVersion,os(ue.transaction))}),M&&ue.addEventListener("blocked",()=>M()),Ge.then(Be=>{W&&Be.addEventListener("close",()=>W()),$&&Be.addEventListener("versionchange",()=>$())}).catch(()=>{}),Ge}function Wa(E,{blocked:C}={}){const M=indexedDB.deleteDatabase(E);return C&&M.addEventListener("blocked",()=>C()),os(M).then(()=>{})}const nh=["get","getKey","getAll","getAllKeys","count"],Kf=["put","add","delete","clear"],pl=new Map;function rh(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(pl.get(C))return pl.get(C);const M=C.replace(/FromIndex$/,""),k=C!==M,$=Kf.includes(M);if(!(M in(k?IDBIndex:IDBObjectStore).prototype)||!$&&!nh.includes(M))return;const W=function(){var ue=(0,P.Z)(function*(Ge,...Be){const st=this.transaction(Ge,$?"readwrite":"readonly");let St=st.store;return k&&(St=St.index(Be.shift())),(yield Promise.all([St[M](...Be),$&&st.done]))[0]});return function(Be){return ue.apply(this,arguments)}}();return pl.set(C,W),W}!function Wf(E){qa=E(qa)}(E=>({...E,get:(C,M,k)=>rh(C,M)||E.get(C,M,k),has:(C,M)=>!!rh(C,M)||E.has(C,M)}));const ih="/firebase-messaging-sw.js",Za="/firebase-cloud-messaging-push-scope",Ka="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",um="https://fcmregistrations.googleapis.com/v1",gl="google.c.a.c_id",Wn="google.c.a.c_l",Us="google.c.a.ts";var Cs=(()=>((Cs=Cs||{}).PUSH_RECEIVED="push-received",Cs.NOTIFICATION_CLICKED="notification-clicked",Cs))();function $i(E){const C=new Uint8Array(E);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xu(E){const M=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(M),$=new Uint8Array(k.length);for(let W=0;W<k.length;++W)$[W]=k.charCodeAt(W);return $}const Ya="fcm_token_details_db",sh=5,Qa="fcm_token_object_Store";function Br(){return Br=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(Ya))return null;let C=null;return(yield fl(Ya,sh,{upgrade:(k=(0,P.Z)(function*($,W,ue,Ge){var Be;if(W<2||!$.objectStoreNames.contains(Qa))return;const st=Ge.objectStore(Qa),St=yield st.index("fcmSenderId").get(E);if(yield st.clear(),St)if(2===W){const At=St;if(!At.auth||!At.p256dh||!At.endpoint)return;C={token:At.fcmToken,createTime:null!==(Be=At.createTime)&&void 0!==Be?Be:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:$i(At.vapidKey)}}}else if(3===W){const At=St;C={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:$i(At.auth),p256dh:$i(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:$i(At.vapidKey)}}}else if(4===W){const At=St;C={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:$i(At.auth),p256dh:$i(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:$i(At.vapidKey)}}}}),function(W,ue,Ge,Be){return k.apply(this,arguments)})})).close(),yield Wa(Ya),yield Wa("fcm_vapid_details_db"),yield Wa("undefined"),function ec(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:C}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var k}),Br.apply(this,arguments)}const rr="firebase-messaging-database",tc=1,Mi="firebase-messaging-store";let Ja=null;function Jo(){return Ja||(Ja=fl(rr,tc,{upgrade:(E,C)=>{0===C&&E.createObjectStore(Mi)}})),Ja}function Xo(E){return ea.apply(this,arguments)}function ea(){return ea=(0,P.Z)(function*(E){const C=vo(E),k=yield(yield Jo()).transaction(Mi).objectStore(Mi).get(C);if(k)return k;{const $=yield function lm(E){return Br.apply(this,arguments)}(E.appConfig.senderId);if($)return yield Qf(E,$),$}}),ea.apply(this,arguments)}function Qf(E,C){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,P.Z)(function*(E,C){const M=vo(E),$=(yield Jo()).transaction(Mi,"readwrite");return yield $.objectStore(Mi).put(C,M),yield $.done,C})).apply(this,arguments)}function nc(){return(nc=(0,P.Z)(function*(E){const C=vo(E),k=(yield Jo()).transaction(Mi,"readwrite");yield k.objectStore(Mi).delete(C),yield k.done})).apply(this,arguments)}function vo({appConfig:E}){return E.appId}const jr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Jf(E,C){return oh.apply(this,arguments)}function oh(){return(oh=(0,P.Z)(function*(E,C){const M=yield _l(E),k=wl(C),$={method:"POST",headers:M,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(eu(E.appConfig),$)).json()}catch(ue){throw jr.create("token-subscribe-failed",{errorInfo:ue?.toString()})}if(W.error)throw jr.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw jr.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function ah(){return(ah=(0,P.Z)(function*(E,C){const M=yield _l(E),k=wl(C.subscriptionOptions),$={method:"PATCH",headers:M,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(`${eu(E.appConfig)}/${C.token}`,$)).json()}catch(ue){throw jr.create("token-update-failed",{errorInfo:ue?.toString()})}if(W.error)throw jr.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw jr.create("token-update-no-token");return W.token})).apply(this,arguments)}function vl(E,C){return rc.apply(this,arguments)}function rc(){return(rc=(0,P.Z)(function*(E,C){const k={method:"DELETE",headers:yield _l(E)};try{const W=yield(yield fetch(`${eu(E.appConfig)}/${C}`,k)).json();if(W.error)throw jr.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch($){throw jr.create("token-unsubscribe-failed",{errorInfo:$?.toString()})}})).apply(this,arguments)}function eu({projectId:E}){return`${um}/projects/${E}/registrations`}function _l(E){return ic.apply(this,arguments)}function ic(){return(ic=(0,P.Z)(function*({appConfig:E,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function wl({p256dh:E,auth:C,endpoint:M,vapidKey:k}){const $={web:{endpoint:M,auth:C,p256dh:E}};return k!==Ka&&($.web.applicationPubKey=k),$}const sc=6048e5;function ta(){return ta=(0,P.Z)(function*(E){const C=yield function oc(E,C){return $r.apply(this,arguments)}(E.swRegistration,E.vapidKey),M={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:C.endpoint,auth:$i(C.getKey("auth")),p256dh:$i(C.getKey("p256dh"))},k=yield Xo(E.firebaseDependencies);if(k){if(function ac(E,C){return C.vapidKey===E.vapidKey&&C.endpoint===E.endpoint&&C.auth===E.auth&&C.p256dh===E.p256dh}(k.subscriptionOptions,M))return Date.now()>=k.createTime+sc?function uh(E,C){return tu.apply(this,arguments)}(E,{token:k.token,createTime:Date.now(),subscriptionOptions:M}):k.token;try{yield vl(E.firebaseDependencies,k.token)}catch($){console.warn($)}return bn(E.firebaseDependencies,M)}return bn(E.firebaseDependencies,M)}),ta.apply(this,arguments)}function Hi(){return Hi=(0,P.Z)(function*(E){const C=yield Xo(E.firebaseDependencies);C&&(yield vl(E.firebaseDependencies,C.token),yield function ml(E){return nc.apply(this,arguments)}(E.firebaseDependencies));const M=yield E.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Hi.apply(this,arguments)}function tu(){return tu=(0,P.Z)(function*(E,C){try{const M=yield function yl(E,C){return ah.apply(this,arguments)}(E.firebaseDependencies,C),k=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield Qf(E.firebaseDependencies,k),M}catch(M){throw yield function Xf(E){return Hi.apply(this,arguments)}(E),M}}),tu.apply(this,arguments)}function bn(E,C){return _o.apply(this,arguments)}function _o(){return(_o=(0,P.Z)(function*(E,C){const k={token:yield Jf(E,C),createTime:Date.now(),subscriptionOptions:C};return yield Qf(E,k),k.token})).apply(this,arguments)}function $r(){return($r=(0,P.Z)(function*(E,C){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xu(C)})})).apply(this,arguments)}function El(E){const C={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Bs(E,C){if(!C.notification)return;E.notification={};const M=C.notification.title;M&&(E.notification.title=M);const k=C.notification.body;k&&(E.notification.body=k);const $=C.notification.image;$&&(E.notification.image=$);const W=C.notification.icon;W&&(E.notification.icon=W)}(C,E),function pr(E,C){C.data&&(E.data=C.data)}(C,E),function fm(E,C){var M,k,$,W,ue;if(!(C.fcmOptions||null!==(M=C.notification)&&void 0!==M&&M.click_action))return;E.fcmOptions={};const Ge=null!==($=null===(k=C.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==$?$:null===(W=C.notification)||void 0===W?void 0:W.click_action;Ge&&(E.fcmOptions.link=Ge);const Be=null===(ue=C.fcmOptions)||void 0===ue?void 0:ue.analytics_label;Be&&(E.fcmOptions.analyticsLabel=Be)}(C,E),C}function ch(E,C){const M=[];for(let k=0;k<E.length;k++)M.push(E.charAt(k)),k<C.length&&M.push(C.charAt(k));return M.join("")}function Il(E){return jr.create("missing-app-config-values",{valueName:E})}ch("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ch("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lh{constructor(C,M,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $=function js(E){if(!E||!E.options)throw Il("App Configuration Object");if(!E.name)throw Il("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=E;for(const k of C)if(!M[k])throw Il(k);return{appName:E.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:$,installations:M,analyticsProvider:k}}_delete(){return Promise.resolve()}}function uc(){return(uc=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(ih,{scope:Za}),E.swRegistration.update().catch(()=>{})}catch(C){throw jr.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*(E,C){if(!C&&!E.swRegistration&&(yield function Dl(E){return uc.apply(this,arguments)}(E)),C||!E.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw jr.create("invalid-sw-registration");E.swRegistration=C}})).apply(this,arguments)}function $s(){return($s=(0,P.Z)(function*(E,C){C?E.vapidKey=C:E.vapidKey||(E.vapidKey=Ka)})).apply(this,arguments)}function bl(){return bl=(0,P.Z)(function*(E,C){if(!navigator)throw jr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jr.create("permission-blocked");return yield function pt(E,C){return $s.apply(this,arguments)}(E,C?.vapidKey),yield function Cl(E,C){return ra.apply(this,arguments)}(E,C?.serviceWorkerRegistration),function hm(E){return ta.apply(this,arguments)}(E)}),bl.apply(this,arguments)}function hh(){return(hh=(0,P.Z)(function*(E,C,M){const k=function fh(E){switch(E){case Cs.NOTIFICATION_CLICKED:return"notification_open";case Cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:M[gl],message_name:M[Wn],message_time:M[Us],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nu(){return nu=(0,P.Z)(function*(E,C){const M=C.data;if(!M.isFirebaseMessaging)return;E.onMessageHandler&&M.messageType===Cs.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(El(M)):E.onMessageHandler.next(El(M)));const k=M.data;(function na(E){return"object"==typeof E&&!!E&&gl in E})(k)&&"1"===k["google.c.a.e"]&&(yield function ep(E,C,M){return hh.apply(this,arguments)}(E,M.messageType,k))}),nu.apply(this,arguments)}const ru="@firebase/messaging",sa=E=>{const C=new lh(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function ia(E,C){return nu.apply(this,arguments)}(C,M)),C},ph=E=>{const C=E.getProvider("messaging").getImmediate();return{getToken:k=>function dh(E,C){return bl.apply(this,arguments)}(C,k)}};function Kt(){return cc.apply(this,arguments)}function cc(){return(cc=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function be(){(0,J._registerComponent)(new de.wA("messaging",sa,"PUBLIC")),(0,J._registerComponent)(new de.wA("messaging-internal",ph,"PRIVATE")),(0,J.registerVersion)(ru,"0.12.4"),(0,J.registerVersion)(ru,"0.12.4","esm2017")}();const Zn="analytics",Al="firebase_id",Or="origin",Ts=6e4,lc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hs="https://www.googletagmanager.com/gtag/js",gn=new pe.Yd("@firebase/analytics"),Pr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function su(E){if(!E.startsWith(Hs)){const C=Pr.create("invalid-gtag-resource",{gtagURL:E});return gn.warn(C.message),""}return E}function dc(E){return Promise.all(E.map(C=>C.catch(M=>M)))}function fc(){return(fc=(0,P.Z)(function*(E,C,M,k,$,W){const ue=k[$];try{if(ue)yield C[ue];else{const Be=(yield dc(M)).find(st=>st.measurementId===$);Be&&(yield C[Be.appId])}}catch(Ge){gn.error(Ge)}E("config",$,W)})).apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(E,C,M,k,$){try{let W=[];if($&&$.send_to){let ue=$.send_to;Array.isArray(ue)||(ue=[ue]);const Ge=yield dc(M);for(const Be of ue){const st=Ge.find(At=>At.measurementId===Be),St=st&&C[st.appId];if(!St){W=[];break}W.push(St)}}0===W.length&&(W=Object.values(C)),yield Promise.all(W),E("event",k,$||{})}catch(W){gn.error(W)}})).apply(this,arguments)}const pc=30,np=new class uu{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ti(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Sn(){return(Sn=(0,P.Z)(function*(E){var C;const{appId:M,apiKey:k}=E,$={method:"GET",headers:ti(k)},W=lc.replace("{app-id}",M),ue=yield fetch(W,$);if(200!==ue.status&&304!==ue.status){let Ge="";try{const Be=yield ue.json();null!==(C=Be.error)&&void 0!==C&&C.message&&(Ge=Be.error.message)}catch{}throw Pr.create("config-fetch-failed",{httpStatus:ue.status,responseMessage:Ge})}return ue.json()})).apply(this,arguments)}function cu(){return(cu=(0,P.Z)(function*(E,C=np,M){const{appId:k,apiKey:$,measurementId:W}=E.options;if(!k)throw Pr.create("no-app-id");if(!$){if(W)return{measurementId:W,appId:k};throw Pr.create("no-api-key")}const ue=C.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Rl;return setTimeout((0,P.Z)(function*(){Ge.abort()}),void 0!==M?M:Ts),rp({appId:k,apiKey:$,measurementId:W},ue,Ge,C)})).apply(this,arguments)}function rp(E,C,M){return vh.apply(this,arguments)}function vh(){return vh=(0,P.Z)(function*(E,{throttleEndTimeMillis:C,backoffCount:M},k,$=np){var W;const{appId:ue,measurementId:Ge}=E;try{yield function ip(E,C){return new Promise((M,k)=>{const $=Math.max(C-Date.now(),0),W=setTimeout(M,$);E.addEventListener(()=>{clearTimeout(W),k(Pr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(k,C)}catch(Be){if(Ge)return gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ge} provided in the "measurementId" field in the local Firebase config. [${Be?.message}]`),{appId:ue,measurementId:Ge};throw Be}try{const Be=yield function Eo(E){return Sn.apply(this,arguments)}(E);return $.deleteThrottleMetadata(ue),Be}catch(Be){const st=Be;if(!function Nl(E){if(!(E instanceof ne.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(st)){if($.deleteThrottleMetadata(ue),Ge)return gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ge} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:ue,measurementId:Ge};throw Be}const St=503===Number(null===(W=st?.customData)||void 0===W?void 0:W.httpStatus)?(0,ne.$s)(M,$.intervalMillis,pc):(0,ne.$s)(M,$.intervalMillis),At={throttleEndTimeMillis:Date.now()+St,backoffCount:M+1};return $.setThrottleMetadata(ue,At),gn.debug(`Calling attemptFetch again in ${St} millis`),rp(E,At,k,$)}}),vh.apply(this,arguments)}class Rl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let as,wn;function lu(){return(lu=(0,P.Z)(function*(E,C,M,k,$){if($&&$.global)E("event",M,k);else{const W=yield C;E("event",M,Object.assign(Object.assign({},k),{send_to:W}))}})).apply(this,arguments)}function Eh(){return(Eh=(0,P.Z)(function*(){if(!(0,ne.hl)())return gn.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(E){return gn.warn(Pr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function us(){return us=(0,P.Z)(function*(E,C,M,k,$,W,ue){var Ge;const Be=function pm(E){return cu.apply(this,arguments)}(E);Be.then(sr=>{M[sr.measurementId]=sr.appId,E.options.measurementId&&sr.measurementId!==E.options.measurementId&&gn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>gn.error(sr)),C.push(Be);const st=function Io(){return Eh.apply(this,arguments)}().then(sr=>{if(sr)return k.getId()}),[St,At]=yield Promise.all([Be,st]);(function yh(E){const C=window.document.getElementsByTagName("script");for(const M of Object.values(C))if(M.src&&M.src.includes(Hs)&&M.src.includes(E))return M;return null})(W)||function ou(E,C){const M=function wo(E,C){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(E,C)),M}("firebase-js-sdk-policy",{createScriptURL:su}),k=document.createElement("script"),$=`${Hs}?l=${E}&id=${C}`;k.src=M?M?.createScriptURL($):$,k.async=!0,document.head.appendChild(k)}(W,St.measurementId),wn&&($("consent","default",wn),function _t(E){wn=E}(void 0)),$("js",new Date);const kr=null!==(Ge=ue?.config)&&void 0!==Ge?Ge:{};return kr[Or]="firebase",kr.update=!0,null!=At&&(kr[Al]=At),$("config",St.measurementId,kr),as&&($("set",as),function Kn(E){as=E}(void 0)),St.measurementId}),us.apply(this,arguments)}class Vn{constructor(C){this.app=C}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},gr=[];const da={};let Do,zi,It="dataLayer",fi=!1;function le(E,C,M){!function ap(){const E=[];if((0,ne.ru)()&&E.push("This is a browser extension environment."),(0,ne.zI)()||E.push("Cookies are not available."),E.length>0){const C=E.map((k,$)=>`(${$+1}) ${k}`).join(" "),M=Pr.create("invalid-analytics-context",{errorInfo:C});gn.warn(M.message)}}();const k=E.options.appId;if(!k)throw Pr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Pr.create("no-api-key");gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[k])throw Pr.create("already-exists",{id:k});if(!fi){!function mh(E){let C=[];Array.isArray(window[E])?C=window[E]:window[E]=C}(It);const{wrappedGtag:W,gtagCore:ue}=function Ml(E,C,M,k,$){let W=function(...ue){window[k].push(arguments)};return window[$]&&"function"==typeof window[$]&&(W=window[$]),window[$]=function Gi(E,C,M,k){function W(){return W=(0,P.Z)(function*(ue,...Ge){try{if("event"===ue){const[Be,st]=Ge;yield function au(E,C,M,k,$){return aa.apply(this,arguments)}(E,C,M,Be,st)}else if("config"===ue){const[Be,st]=Ge;yield function hc(E,C,M,k,$,W){return fc.apply(this,arguments)}(E,C,M,k,Be,st)}else if("consent"===ue){const[Be]=Ge;E("consent","update",Be)}else if("get"===ue){const[Be,st,St]=Ge;E("get",Be,st,St)}else if("set"===ue){const[Be]=Ge;E("set",Be)}else E(ue,...Ge)}catch(Be){gn.error(Be)}}),W.apply(this,arguments)}return function $(ue){return W.apply(this,arguments)}}(W,E,C,M),{gtagCore:W,wrappedGtag:window[$]}}(Hr,gr,da,It,"gtag");zi=W,Do=ue,fi=!0}return Hr[k]=function la(E,C,M,k,$,W,ue){return us.apply(this,arguments)}(E,gr,da,C,Do,It,M),new Vn(E)}function Ri(){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const yc="@firebase/analytics";!function ha(){(0,J._registerComponent)(new de.wA(Zn,(C,{options:M})=>le(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,J._registerComponent)(new de.wA("analytics-internal",function E(C){try{const M=C.getProvider(Zn).getImmediate();return{logEvent:(k,$,W)=>function Ss(E,C,M,k){E=(0,ne.m9)(E),function _h(E,C,M,k,$){return lu.apply(this,arguments)}(zi,Hr[E.app.options.appId],C,M,k).catch($=>gn.error($))}(M,k,$,W)}}catch(M){throw Pr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,J.registerVersion)(yc,"0.10.0"),(0,J.registerVersion)(yc,"0.10.0","esm2017")}();var mr=O(4408),ir=O(7565);const Ih=new class ls extends ir.v{}(class fu extends mr.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(C,M,k):(C.flush(this),0)}});var ds=O(4986),To=O(8505),Rn=O(9468),pu=O(5363);const As=new h.GfV("7.6.1"),Oi="__angularfire_symbol__analyticsIsSupportedValue",pi="__angularfire_symbol__analyticsIsSupported",gu="__angularfire_symbol__remoteConfigIsSupportedValue",Ul="__angularfire_symbol__remoteConfigIsSupported",Bl="__angularfire_symbol__messagingIsSupportedValue",zs="__angularfire_symbol__messagingIsSupported";function up(E,C,M){if(C){if(1===C.length)return C[0];const W=C.filter(ue=>ue.app===M);if(1===W.length)return W[0]}return M.container.getProvider(E).getImmediate({optional:!0})}globalThis[pi]||(globalThis[pi]=Ri().then(E=>globalThis[Oi]=E).catch(()=>globalThis[Oi]=!1)),globalThis[zs]||(globalThis[zs]=Kt().then(E=>globalThis[Bl]=E).catch(()=>globalThis[Bl]=!1)),globalThis[Ul]||(globalThis[Ul]=go().then(E=>globalThis[gu]=E).catch(()=>globalThis[gu]=!1));const bh=(E,C)=>{const M=C?[C]:(0,q.C6)(),k=[];return M.forEach($=>{$.container.getProvider(E).instances.forEach(ue=>{k.includes(ue)||k.push(ue)})}),k};function dn(){}class _c{constructor(C,M=Ih){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,k){const $=this.zone;return this.delegate.schedule(function(ue){$.runGuarded(()=>{C.apply(this,[ue])})},M,k)}}class So{constructor(C){this.zone=C,this.task=null}call(C,M){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dn,{},dn,dn)),M.pipe((0,To.b)({next:k,complete:k,error:k})).subscribe(C).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wc=(()=>{class E{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new _c(Zone.current)),this.insideAngular=M.run(()=>new _c(Zone.current,ds.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(M){return new(M||E)(h.LFG(h.R0b))},E.\u0275prov=h.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function lr(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Th(E){return lr(),function gm(E){return function(M){return(M=M.lift(new So(E.ngZone))).pipe((0,Rn.R)(E.outsideAngular),(0,pu.Q)(E.insideAngular))}}(lr())(E)}},2090:(at,Ee,O)=>{O.d(Ee,{$s:()=>ts,BH:()=>K,G6:()=>we,L:()=>he,LL:()=>Bt,Pz:()=>ge,Sg:()=>fe,UG:()=>ie,US:()=>de,ZB:()=>Q,ZR:()=>et,aH:()=>te,b$:()=>wr,eu:()=>He,hl:()=>Ae,jU:()=>je,m9:()=>Zt,ne:()=>hn,pd:()=>lt,r3:()=>er,ru:()=>Ht,tV:()=>V,uI:()=>Le,vZ:()=>oi,w1:()=>Ps,xO:()=>Ua,xb:()=>ao,z$:()=>Te,zI:()=>Ve,zd:()=>qe});const J=function(U){const L=[];let z=0;for(let _e=0;_e<U.length;_e++){let se=U.charCodeAt(_e);se<128?L[z++]=se:se<2048?(L[z++]=se>>6|192,L[z++]=63&se|128):55296==(64512&se)&&_e+1<U.length&&56320==(64512&U.charCodeAt(_e+1))?(se=65536+((1023&se)<<10)+(1023&U.charCodeAt(++_e)),L[z++]=se>>18|240,L[z++]=se>>12&63|128,L[z++]=se>>6&63|128,L[z++]=63&se|128):(L[z++]=se>>12|224,L[z++]=se>>6&63|128,L[z++]=63&se|128)}return L},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let se=0;se<U.length;se+=3){const nt=U[se],ft=se+1<U.length,Rt=ft?U[se+1]:0,_n=se+2<U.length,fn=_n?U[se+2]:0;let Dr=(15&Rt)<<2|fn>>6,bi=63&fn;_n||(bi=64,ft||(Dr=64)),_e.push(z[nt>>2],z[(3&nt)<<4|Rt>>4],z[Dr],z[bi])}return _e.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,_e=0;for(;z<U.length;){const se=U[z++];if(se<128)L[_e++]=String.fromCharCode(se);else if(se>191&&se<224){const nt=U[z++];L[_e++]=String.fromCharCode((31&se)<<6|63&nt)}else if(se>239&&se<365){const _n=((7&se)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[_e++]=String.fromCharCode(55296+(_n>>10)),L[_e++]=String.fromCharCode(56320+(1023&_n))}else{const nt=U[z++],ft=U[z++];L[_e++]=String.fromCharCode((15&se)<<12|(63&nt)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let se=0;se<U.length;){const nt=z[U.charAt(se++)],Rt=se<U.length?z[U.charAt(se)]:0;++se;const fn=se<U.length?z[U.charAt(se)]:64;++se;const zt=se<U.length?z[U.charAt(se)]:64;if(++se,null==nt||null==Rt||null==fn||null==zt)throw new pe;_e.push(nt<<2|Rt>>4),64!==fn&&(_e.push(Rt<<4&240|fn>>2),64!==zt&&_e.push(fn<<6&192|zt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(U){return function(U){const L=J(U);return de.encodeByteArray(L,!0)}(U).replace(/\./g,"")},V=function(U){try{return de.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!Fe(z)||(U[z]=Q(U[z],L[z]));return U}function Fe(U){return"__proto__"!==U}const Oe=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&V(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},te=()=>{var U;return null===(U=Oe())||void 0===U?void 0:U.config},ge=U=>{var L;return null===(L=Oe())||void 0===L?void 0:L[`_${U}`]};class K{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,_e)=>{z?this.reject(z):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,_e))}}}function fe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",se=U.iat||0,nt=U.sub||U.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:se,exp:se+3600,auth_time:se,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},U);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ft)),""].join(".")}function Te(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function ie(){var U;const L=null===(U=Oe())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return"object"==typeof self&&self.self===self}function Ht(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function wr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ps(){const U=Te();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function we(){return!ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((U,L)=>{try{let z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(_e);se.onsuccess=()=>{se.result.close(),z||self.indexedDB.deleteDatabase(_e),U(!0)},se.onupgradeneeded=()=>{z=!1},se.onerror=()=>{var nt;L((null===(nt=se.error)||void 0===nt?void 0:nt.message)||"")}}catch(z){L(z)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class et extends Error{constructor(L,z,_e){super(z),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bt.prototype.create)}}class Bt{constructor(L,z,_e){this.service=L,this.serviceName=z,this.errors=_e}create(L,...z){const _e=z[0]||{},se=`${this.service}/${L}`,nt=this.errors[L],ft=nt?function tt(U,L){return U.replace(ct,(z,_e)=>{const se=L[_e];return null!=se?String(se):`<${_e}?>`})}(nt,_e):"Error";return new et(se,`${this.serviceName}: ${ft} (${se}).`,_e)}}const ct=/\{\$([^}]+)}/g;function er(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function ao(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function oi(U,L){if(U===L)return!0;const z=Object.keys(U),_e=Object.keys(L);for(const se of z){if(!_e.includes(se))return!1;const nt=U[se],ft=L[se];if(ai(nt)&&ai(ft)){if(!oi(nt,ft))return!1}else if(nt!==ft)return!1}for(const se of _e)if(!z.includes(se))return!1;return!0}function ai(U){return null!==U&&"object"==typeof U}function Ua(U){const L=[];for(const[z,_e]of Object.entries(U))Array.isArray(_e)?_e.forEach(se=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(se))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function qe(U){const L={};return U.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[se,nt]=_e.split("=");L[decodeURIComponent(se)]=decodeURIComponent(nt)}}),L}function lt(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function hn(U,L){const z=new xn(U,L);return z.subscribe.bind(z)}class xn{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,_e){let se;if(void 0===L&&void 0===z&&void 0===_e)throw new Error("Missing Observer.");se=function sn(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:_e},void 0===se.next&&(se.next=Er),void 0===se.error&&(se.error=Er),void 0===se.complete&&(se.complete=Er);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),nt}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Er(){}const es=1e3,Ir=2,ar=144e5,vn=.5;function ts(U,L=es,z=Ir){const _e=L*Math.pow(z,U),se=Math.round(vn*_e*(Math.random()-.5)*2);return Math.min(ar,_e+se)}function Zt(U){return U&&U._delegate?U._delegate:U}},9300:(at,Ee,O)=>{var h=O(2223);let q=null;function P(){return q}class ne{}const de=new h.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(he)},providedIn:"platform"}),n})();const Pe=new h.OlP("Location Initialized");let he=(()=>{class n extends pe{constructor(){super(),this._doc=(0,h.f3M)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Q(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ye)},providedIn:"root"}),n})();const Ce=new h.OlP("appBaseHref");let Ye=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Q(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Q(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Q(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pe),h.LFG(Ce,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Me=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pe),h.LFG(Ce,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function te(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(ut(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Q(r))}normalize(t){return n.stripTrailingSlash(function gt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ut(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Q,n.joinWithSlash=V,n.stripTrailingSlash=j,n.\u0275fac=function(t){return new(t||n)(h.LFG(Fe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Oe(){return new ze((0,h.LFG)(Fe))}()},providedIn:"root"}),n})();function ut(n){return n.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Format=0]="Format",Te[Te.Standalone=1]="Standalone",Te))(),Le=(()=>((Le=Le||{})[Le.Narrow=0]="Narrow",Le[Le.Abbreviated=1]="Abbreviated",Le[Le.Wide=2]="Wide",Le[Le.Short=3]="Short",Le))(),ie=(()=>((ie=ie||{})[ie.Short=0]="Short",ie[ie.Medium=1]="Medium",ie[ie.Long=2]="Long",ie[ie.Full=3]="Full",ie))(),je=(()=>((je=je||{})[je.Decimal=0]="Decimal",je[je.Group=1]="Group",je[je.List=2]="List",je[je.PercentSign=3]="PercentSign",je[je.PlusSign=4]="PlusSign",je[je.MinusSign=5]="MinusSign",je[je.Exponential=6]="Exponential",je[je.SuperscriptingExponent=7]="SuperscriptingExponent",je[je.PerMille=8]="PerMille",je[je.Infinity=9]="Infinity",je[je.NaN=10]="NaN",je[je.TimeSeparator=11]="TimeSeparator",je[je.CurrencyDecimal=12]="CurrencyDecimal",je[je.CurrencyGroup=13]="CurrencyGroup",je))();function He(n,e){return er((0,h.cg1)(n)[h.wAp.DateFormat],e)}function Ve(n,e){return er((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function wt(n,e){return er((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function et(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===je.CurrencyDecimal)return t[h.wAp.NumberSymbols][je.Decimal];if(e===je.CurrencyGroup)return t[h.wAp.NumberSymbols][je.Group]}return r}function Jt(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function er(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function oo(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ai=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ks={},Ua=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qe=(()=>((qe=qe||{})[qe.Short=0]="Short",qe[qe.ShortGMT=1]="ShortGMT",qe[qe.Long=2]="Long",qe[qe.Extended=3]="Extended",qe))(),lt=(()=>((lt=lt||{})[lt.FullYear=0]="FullYear",lt[lt.Month=1]="Month",lt[lt.Date=2]="Date",lt[lt.Hours=3]="Hours",lt[lt.Minutes=4]="Minutes",lt[lt.Seconds=5]="Seconds",lt[lt.FractionalSeconds=6]="FractionalSeconds",lt[lt.Day=7]="Day",lt))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function hn(n,e,t,r){let o=function L(n){if(_e(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,l=1]=n.split("-").map(m=>+m);return xn(o,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ai))return function z(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,m=Number(n[5]||0)-r,I=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,m,I,b),e}(r)}const e=new Date(n);if(!_e(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Qr(t,e)||e;let m,l=[];for(;e;){if(m=Ua.exec(e),!m){l.push(e);break}{l=l.concat(m.slice(1));const A=l.pop();if(!A)break;e=A}}let I=o.getTimezoneOffset();r&&(I=ns(r,I),o=function U(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function Zt(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(ns(e,o)-o))}(o,r,!0));let b="";return l.forEach(A=>{const R=function tn(n){if(ts[n])return ts[n];let e;switch(n){case"G":case"GG":case"GGG":e=jt(mt.Eras,Le.Abbreviated);break;case"GGGG":e=jt(mt.Eras,Le.Wide);break;case"GGGGG":e=jt(mt.Eras,Le.Narrow);break;case"y":e=un(lt.FullYear,1,0,!1,!0);break;case"yy":e=un(lt.FullYear,2,0,!0,!0);break;case"yyy":e=un(lt.FullYear,3,0,!1,!0);break;case"yyyy":e=un(lt.FullYear,4,0,!1,!0);break;case"Y":e=vn(1);break;case"YY":e=vn(2,!0);break;case"YYY":e=vn(3);break;case"YYYY":e=vn(4);break;case"M":case"L":e=un(lt.Month,1,1);break;case"MM":case"LL":e=un(lt.Month,2,1);break;case"MMM":e=jt(mt.Months,Le.Abbreviated);break;case"MMMM":e=jt(mt.Months,Le.Wide);break;case"MMMMM":e=jt(mt.Months,Le.Narrow);break;case"LLL":e=jt(mt.Months,Le.Abbreviated,Te.Standalone);break;case"LLLL":e=jt(mt.Months,Le.Wide,Te.Standalone);break;case"LLLLL":e=jt(mt.Months,Le.Narrow,Te.Standalone);break;case"w":e=ar(1);break;case"ww":e=ar(2);break;case"W":e=ar(1,!0);break;case"d":e=un(lt.Date,1);break;case"dd":e=un(lt.Date,2);break;case"c":case"cc":e=un(lt.Day,1);break;case"ccc":e=jt(mt.Days,Le.Abbreviated,Te.Standalone);break;case"cccc":e=jt(mt.Days,Le.Wide,Te.Standalone);break;case"ccccc":e=jt(mt.Days,Le.Narrow,Te.Standalone);break;case"cccccc":e=jt(mt.Days,Le.Short,Te.Standalone);break;case"E":case"EE":case"EEE":e=jt(mt.Days,Le.Abbreviated);break;case"EEEE":e=jt(mt.Days,Le.Wide);break;case"EEEEE":e=jt(mt.Days,Le.Narrow);break;case"EEEEEE":e=jt(mt.Days,Le.Short);break;case"a":case"aa":case"aaa":e=jt(mt.DayPeriods,Le.Abbreviated);break;case"aaaa":e=jt(mt.DayPeriods,Le.Wide);break;case"aaaaa":e=jt(mt.DayPeriods,Le.Narrow);break;case"b":case"bb":case"bbb":e=jt(mt.DayPeriods,Le.Abbreviated,Te.Standalone,!0);break;case"bbbb":e=jt(mt.DayPeriods,Le.Wide,Te.Standalone,!0);break;case"bbbbb":e=jt(mt.DayPeriods,Le.Narrow,Te.Standalone,!0);break;case"B":case"BB":case"BBB":e=jt(mt.DayPeriods,Le.Abbreviated,Te.Format,!0);break;case"BBBB":e=jt(mt.DayPeriods,Le.Wide,Te.Format,!0);break;case"BBBBB":e=jt(mt.DayPeriods,Le.Narrow,Te.Format,!0);break;case"h":e=un(lt.Hours,1,-12);break;case"hh":e=un(lt.Hours,2,-12);break;case"H":e=un(lt.Hours,1);break;case"HH":e=un(lt.Hours,2);break;case"m":e=un(lt.Minutes,1);break;case"mm":e=un(lt.Minutes,2);break;case"s":e=un(lt.Seconds,1);break;case"ss":e=un(lt.Seconds,2);break;case"S":e=un(lt.FractionalSeconds,1);break;case"SS":e=un(lt.FractionalSeconds,2);break;case"SSS":e=un(lt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=uo(qe.Short);break;case"ZZZZZ":e=uo(qe.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=uo(qe.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=uo(qe.Long);break;default:return null}return ts[n]=e,e}(A);b+=R?R(o,t,I):"''"===A?"'":A.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function xn(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Qr(n,e){const t=function wr(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(ks[t]=ks[t]||{},ks[t][e])return ks[t][e];let r="";switch(e){case"shortDate":r=He(n,ie.Short);break;case"mediumDate":r=He(n,ie.Medium);break;case"longDate":r=He(n,ie.Long);break;case"fullDate":r=He(n,ie.Full);break;case"shortTime":r=Ve(n,ie.Short);break;case"mediumTime":r=Ve(n,ie.Medium);break;case"longTime":r=Ve(n,ie.Long);break;case"fullTime":r=Ve(n,ie.Full);break;case"short":const o=Qr(n,"shortTime"),u=Qr(n,"shortDate");r=sn(wt(n,ie.Short),[o,u]);break;case"medium":const l=Qr(n,"mediumTime"),m=Qr(n,"mediumDate");r=sn(wt(n,ie.Medium),[l,m]);break;case"long":const I=Qr(n,"longTime"),b=Qr(n,"longDate");r=sn(wt(n,ie.Long),[I,b]);break;case"full":const A=Qr(n,"fullTime"),R=Qr(n,"fullDate");r=sn(wt(n,ie.Full),[A,R])}return r&&(ks[t][e]=r),r}function sn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Er(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function un(n,e,t=0,r=!1,o=!1){return function(u,l){let m=function xr(n,e){switch(n){case lt.FullYear:return e.getFullYear();case lt.Month:return e.getMonth();case lt.Date:return e.getDate();case lt.Hours:return e.getHours();case lt.Minutes:return e.getMinutes();case lt.Seconds:return e.getSeconds();case lt.FractionalSeconds:return e.getMilliseconds();case lt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===lt.Hours)0===m&&-12===t&&(m=12);else if(n===lt.FractionalSeconds)return function Ba(n,e){return Er(n,3).substring(0,e)}(m,e);const I=et(l,je.MinusSign);return Er(m,e,I,r,o)}}function jt(n,e,t=Te.Format,r=!1){return function(o,u){return function Xi(n,e,t,r,o,u){switch(t){case mt.Months:return function ae(n,e,t){const r=(0,h.cg1)(n),u=er([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return er(u,t)}(e,o,r)[n.getMonth()];case mt.Days:return function Ps(n,e,t){const r=(0,h.cg1)(n),u=er([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return er(u,t)}(e,o,r)[n.getDay()];case mt.DayPeriods:const l=n.getHours(),m=n.getMinutes();if(u){const b=function si(n){const e=(0,h.cg1)(n);return Jt(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?oo(r):[oo(r[0]),oo(r[1])])}(e),A=function Xn(n,e,t){const r=(0,h.cg1)(n);Jt(r);const u=er([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return er(u,t)||[]}(e,o,r),R=b.findIndex(H=>{if(Array.isArray(H)){const[X,ye]=H,ke=l>=X.hours&&m>=X.minutes,Ue=l<ye.hours||l===ye.hours&&m<ye.minutes;if(X.hours<ye.hours){if(ke&&Ue)return!0}else if(ke||Ue)return!0}else if(H.hours===l&&H.minutes===m)return!0;return!1});if(-1!==R)return A[R]}return function Kr(n,e,t){const r=(0,h.cg1)(n),u=er([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return er(u,t)}(e,o,r)[l<12?0:1];case mt.Eras:return function me(n,e){return er((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function uo(n){return function(e,t,r){const o=-1*r,u=et(t,je.MinusSign),l=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case qe.Short:return(o>=0?"+":"")+Er(l,2,u)+Er(Math.abs(o%60),2,u);case qe.ShortGMT:return"GMT"+(o>=0?"+":"")+Er(l,1,u);case qe.Long:return"GMT"+(o>=0?"+":"")+Er(l,2,u)+":"+Er(Math.abs(o%60),2,u);case qe.Extended:return 0===r?"Z":(o>=0?"+":"")+Er(l,2,u)+":"+Er(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}const ja=0,ui=4;function Ir(n){return xn(n.getFullYear(),n.getMonth(),n.getDate()+(ui-n.getDay()))}function ar(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();o=1+Math.floor((l+u)/7)}else{const u=Ir(t),l=function es(n){const e=xn(n,ja,1).getDay();return xn(n,0,1+(e<=ui?ui:ui+7)-e)}(u.getFullYear()),m=u.getTime()-l.getTime();o=1+Math.round(m/6048e5)}return Er(o,n,et(r,je.MinusSign))}}function vn(n,e=!1){return function(t,r){return Er(Ir(t).getFullYear(),n,et(r,je.MinusSign),e)}}const ts={};function ns(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function _e(n){return n instanceof Date&&!isNaN(n.valueOf())}const $a=/\s+/,Zd=[];let Jr=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this.initialClasses=Zd,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split($a):Zd}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split($a):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split($a).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ol{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ol(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Yd(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Yd(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Yd(n,e){n.context.$implicit=e.item}let Fs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class rm{constructor(){this.$implicit=null,this.ngIf=null}}function zf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}const Ke=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Lt=new h.OlP("DATE_PIPE_DEFAULT_OPTIONS");let pn=(()=>{class n{constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,u){if(null==t||""===t||t!=t)return null;try{return hn(t,r??this.defaultOptions?.dateFormat??"mediumDate",u||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw function Ut(n,e){return new h.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Ke,24),h.Y36(Lt,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Si=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function po(n){return"server"===n}let ss=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new ei((0,h.LFG)(de),window)}),n})();class ei{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function go(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ai(this.window.history)||Ai(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ai(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class El extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Bs extends El{static makeCurrent(){!function J(n){q||(q=n)}(new Bs)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fm(){return pr=pr||document.querySelector("base"),pr?pr.getAttribute("href"):null}();return null==t?null:function ch(n){na=na||document.createElement("a"),na.setAttribute("href",n);const e=na.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function co(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let na,pr=null,Il=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const lh=new h.OlP("EventManagerPlugins");let Dl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lh),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class uc{constructor(e){this._doc=e}}const Cl="ng-app-id";let ra=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=po(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Cl}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(Cl),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Cl,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$s=/%COMP%/g,fh=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ru(n,e){return e.map(t=>t.replace($s,n))}let Tl=(()=>{class n{constructor(t,r,o,u,l,m,I,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=m,this.ngZone=I,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=po(m),this.defaultRenderer=new sa(t,l,I,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof Nn?o.applyToHost(t):o instanceof Sl&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,I=this.eventManager,b=this.sharedStylesHost,A=this.removeStylesOnCompDestory,R=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new Nn(I,b,r,this.appId,A,l,m,R);break;case h.ifc.ShadowDom:return new cc(I,b,t,r,l,m,this.nonce,R);default:u=new Sl(I,b,r,A,l,m,R)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Dl),h.LFG(ra),h.LFG(h.AFp),h.LFG(fh),h.LFG(de),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class sa{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(pt[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Kt(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Kt(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=pt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Kt(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class cc extends sa{constructor(e,t,r,o,u,l,m,I){super(e,u,l,I),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=ru(o.id,o.styles);for(const A of b){const R=document.createElement("style");m&&R.setAttribute("nonce",m),R.textContent=A,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Sl extends sa{constructor(e,t,r,o,u,l,m,I){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=I?ru(I,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Nn extends Sl{constructor(e,t,r,o,u,l,m,I){const b=o+"-"+r.id;super(e,t,r,u,l,m,I,b),this.contentAttr=function ia(n){return"_ngcontent-%COMP%".replace($s,n)}(b),this.hostAttr=function nu(n){return"_nghost-%COMP%".replace($s,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let tp=(()=>{class n extends uc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const xi=["alt","control","meta","shift"],bs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let oa=(()=>{class n extends uc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),xi.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const I={};return I.domEventName=o,I.fullKey=l,I}static matchEventFullKeyCode(t,r){let o=bs[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),xi.forEach(l=>{l!==o&&(0,iu[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gh=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Ts(){Bs.makeCurrent()},multi:!0},{provide:de,useFactory:function Hs(){return(0,h.RDi)(document),document},deps:[]}]),Pr=new h.OlP(""),su=[{provide:h.rWj,useClass:class js{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(I){l=l||I,u--,0==u&&r(l)};o.forEach(function(I){I.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],dc=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function lc(){return new h.qLn},deps:[]},{provide:lh,useClass:tp,multi:!0,deps:[de,h.R0b,h.Lbi]},{provide:lh,useClass:oa,multi:!0,deps:[de]},Tl,ra,Dl,{provide:h.FYo,useExisting:Tl},{provide:class fr{},useClass:Il,deps:[]},[]];let wo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pr,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...dc,...su],imports:[Si,h.hGG]}),n})(),au=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function fc(){return new au((0,h.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const ca_firebaseConfig={apiKey:"AIzaSyDnqcQCsY6ZcqH9BOcVLHjYnM5f47uPniM",authDomain:"novels-blog.firebaseapp.com",projectId:"novels-blog",storageBucket:"novels-blog.appspot.com",messagingSenderId:"568802449446",appId:"1:568802449446:web:97cc426e495fa53ac82ee7"};var cr=O(2011),op=O(4986),Ni=O(9751),wn=O(8996),_t=O(9646),Kn=O(4976),Io=O(8189),la=O(7669);function us(...n){return function Eh(){return(0,Io.J)(1)}()((0,wn.D)(n,(0,la.yG)(n)))}var Vn=O(4482);function Hr(...n){const e=(0,la.yG)(n);return(0,Vn.e)((t,r)=>{(e?us(n,t,e):us(n,t)).subscribe(r)})}var gr=O(5403);function da(){return(0,Vn.e)((n,e)=>{let t,r=!1;n.subscribe((0,gr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var It=O(4004);function Do(n,e){return(0,Vn.e)(function kl(n,e,t,r,o){return(u,l)=>{let m=t,I=e,b=0;u.subscribe((0,gr.x)(l,A=>{const R=b++;I=m?n(I,A,R):(m=!0,A),r&&l.next(I)},o&&(()=>{m&&l.next(I),l.complete()})))}}(n,e,arguments.length>=2,!0))}var zi=O(1884);function fi(n,e){return(0,Vn.e)((t,r)=>{let o=0;t.subscribe((0,gr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}O(2644);var We,ap=O(3942),le=O(5861),Gs=O(6881),Co=O(4859),Ri=O(1877),Yt=O(2090),mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qi={},du=du||{},Tt=mc||self;function hu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fl="closure_uid_"+(1e9*Math.random()>>>0),yc=0;function Ll(n,e,t){return n.call.apply(n.bind,arguments)}function ha(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function mr(n,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ll:ha).apply(null,arguments)}function fu(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ir(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function ls(){this.s=this.s,this.o=this.o}ls.prototype.s=!1,ls.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ss(n){Object.prototype.hasOwnProperty.call(n,Fl)&&n[Fl]||(n[Fl]=++yc)}(this)},ls.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vl=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ds(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function To(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(hu(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function Rn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Rn.prototype.h=function(){this.defaultPrevented=!0};var pu=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",()=>{},e),Tt.removeEventListener("test",()=>{},e)}catch{}return n}();function As(n){return/^[\s\xa0]*$/.test(n)}function Oi(){var n=Tt.navigator;return n&&(n=n.userAgent)?n:""}function pi(n){return-1!=Oi().indexOf(n)}function gu(n){return gu[" "](n),n}gu[" "]=function(){};var bh,n,Bl=pi("Opera"),zs=pi("Trident")||pi("MSIE"),jl=pi("Edge"),Dh=jl||zs,Ch=pi("Gecko")&&!(-1!=Oi().toLowerCase().indexOf("webkit")&&!pi("Edge"))&&!(pi("Trident")||pi("MSIE"))&&!pi("Edge"),vc=-1!=Oi().toLowerCase().indexOf("webkit")&&!pi("Edge");function up(){var n=Tt.document;return n?n.documentMode:void 0}e:{var dn="",_c=(n=Oi(),Ch?/rv:([^\);]+)(\)|;)/.exec(n):jl?/Edge\/([\d\.]+)/.exec(n):zs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vc?/WebKit\/(\S+)/.exec(n):Bl?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_c&&(dn=_c?_c[1]:""),zs){var So=up();if(null!=So&&So>parseFloat(dn)){bh=String(So);break e}}bh=dn}var qs=Tt.document&&zs&&(up()||parseInt(bh,10))||void 0;function Pi(n,e){if(Rn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ch){e:{try{gu(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$l[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pi.$.h.call(this)}}ir(Pi,Rn);var $l={2:"touch",3:"pen",4:"mouse"};Pi.prototype.h=function(){Pi.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ws="closure_listenable_"+(1e6*Math.random()|0),Th=0;function gm(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++Th,this.fa=this.ia=!1}function Ec(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function cp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function C(n){const e={};for(const t in n)e[t]=n[t];return e}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<M.length;u++)t=M[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $(n){this.src=n,this.g={},this.h=0}function W(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Vl(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Ec(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ue(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}$.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=ue(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new gm(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var Ge="closure_lm_"+(1e6*Math.random()|0),Be={};function st(n,e,t,r,o){if(r&&r.once)return kr(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)st(n,e[u],t,r,o);return null}return t=fa(t),n&&n[Ws]?n.O(e,t,bo(r)?!!r.capture:!!r,o):St(n,e,t,!1,r,o)}function St(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=bo(o)?!!o.capture:!!o,m=gi(n);if(m||(n[Ge]=m=new $(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function At(){const e=hs;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)pu||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ic(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kr(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)kr(n,e[u],t,r,o);return null}return t=fa(t),n&&n[Ws]?n.P(e,t,bo(r)?!!r.capture:!!r,o):St(n,e,t,!0,r,o)}function sr(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)sr(n,e[u],t,r,o);else r=bo(r)?!!r.capture:!!r,t=fa(t),n&&n[Ws]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ue(u=n.g[e],t,r,o))&&(Ec(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=gi(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ue(e,t,r,o)),(t=-1<n?e[n]:null)&&Wi(t))}function Wi(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ws])W(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ic(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=gi(e))?(W(t,n),0==t.h&&(t.src=null,e[Ge]=null)):Ec(n)}}}function Ic(n){return n in Be?Be[n]:Be[n]="on"+n}function hs(n,e){if(n.fa)n=!0;else{e=new Pi(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Wi(n),n=t.call(r,e)}return n}function gi(n){return(n=n[Ge])instanceof $?n:null}var ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(n){return"function"==typeof n?n:(n[ki]||(n[ki]=function(e){return n.handleEvent(e)}),n[ki])}function Yn(){ls.call(this),this.i=new $(this),this.S=this,this.J=null}function Fr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Rn(e,n);else if(e instanceof Rn)e.target=e.target||n;else{var o=e;k(e=new Rn(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=lp(l,r,!0,e)&&o}if(o=lp(l=e.g=n,r,!0,e)&&o,o=lp(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=lp(l=e.g=t[u],r,!1,e)&&o}function lp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,I=l.la||l.src;l.ia&&W(n.i,l),o=!1!==m.call(I,r)&&o}}return o&&!r.defaultPrevented}ir(Yn,ls),Yn.prototype[Ws]=!0,Yn.prototype.removeEventListener=function(n,e,t,r){sr(this,n,e,t,r)},Yn.prototype.N=function(){if(Yn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ec(t[r]);delete n.g[e],n.h--}}this.J=null},Yn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hl=Tt.JSON.stringify;function pa(){var n=Sh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ym=new class mu{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new vm,n=>n.reset());class vm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Wv(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function mE(n){Tt.setTimeout(()=>{throw n},0)}let Gl,zl=!1,Sh=new class mm{constructor(){this.h=this.g=null}add(e,t){const r=ym.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},ql=()=>{const n=Tt.Promise.resolve(void 0);Gl=()=>{n.then(Zv)}};var Zv=()=>{for(var n;n=pa();){try{n.h.call(n.g)}catch(t){mE(t)}var e=ym;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zl=!1};function Zs(n,e){Yn.call(this),this.h=n||1,this.g=e||Tt,this.j=mr(this.qb,this),this.l=Date.now()}function Ah(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function _m(n,e,t){if("function"==typeof n)t&&(n=mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function Wl(n){n.g=_m(()=>{n.g=null,n.i&&(n.i=!1,Wl(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ir(Zs,Yn),(We=Zs.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Fr(this,"tick"),this.ga&&(Ah(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){Zs.$.N.call(this),Ah(this),delete this.g};class yE extends ls{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wl(this)}N(){super.N(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yu(n){ls.call(this),this.h=n,this.g={}}ir(yu,ls);var wm=[];function Mh(n,e,t,r){Array.isArray(t)||(t&&(wm[0]=t.toString()),t=wm);for(var o=0;o<t.length;o++){var u=st(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function dp(n){cp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wi(e)},n),n.g={}}function hp(){this.g=!0}function Zl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _E(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Hl(t)}catch{return e}}(n,t)+(r?" "+r:"")})}yu.prototype.N=function(){yu.$.N.call(this),dp(this)},yu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hp.prototype.Ea=function(){this.g=!1},hp.prototype.info=function(){};var Dc={},Im=null;function ga(){return Im=Im||new Yn}function Cc(n){Rn.call(this,Dc.Ta,n)}function bc(n){const e=ga();Fr(e,new Cc(e))}function pp(n,e){Rn.call(this,Dc.STAT_EVENT,n),this.stat=e}function Lr(n){const e=ga();Fr(e,new pp(e,n))}function Ao(n,e){Rn.call(this,Dc.Ua,n),this.size=e}function Tc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}Dc.Ta="serverreachability",ir(Cc,Rn),Dc.STAT_EVENT="statevent",ir(pp,Rn),Dc.Ua="timingevent",ir(Ao,Rn);var vu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ma={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fs(){}function Cm(){}fs.prototype.h=null;var gp,Sc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xh(){Rn.call(this,"d")}function Kl(){Rn.call(this,"c")}function Nh(){}function Mo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new yu(this),this.P=bm,this.V=new Zs(n=Dh?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new mp}function mp(){this.i=null,this.g="",this.h=!1}ir(xh,Rn),ir(Kl,Rn),ir(Nh,fs),Nh.prototype.g=function(){return new XMLHttpRequest},Nh.prototype.i=function(){return{}},gp=new Nh;var bm=45e3,yp={},Gr={};function Yl(n,e,t){n.L=1,n.v=xc(xo(e)),n.s=t,n.S=!0,vp(n,null)}function vp(n,e){n.G=Date.now(),wu(n),n.A=xo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Ip(t.i,"t",r),n.C=0,t=n.l.J,n.h=new mp,n.g=sb(n.l,t?e:null,!n.s),0<n.O&&(n.M=new yE(mr(n.Pa,n,n.g),n.O)),Mh(n.U,n.g,"readystatechange",n.nb),e=n.I?C(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),bc(),function fp(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),I=0;I<m.length;I++){var b=m[I].split("=");if(1<b.length){var A=b[0];b=b[1];var R=A.split("_");l=2<=R.length&&"type"==R[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Ql(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Tr(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=_u(n,t),o==Gr){4==e&&(n.o=4,Lr(14),r=!1),Zl(n.j,n.m,null,"[Incomplete Response]");break}if(o==yp){n.o=4,Lr(15),Zl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zl(n.j,n.m,o,null),ya(n,o)}Ql(n)&&o!=Gr&&o!=yp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Lr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),t_(e),e.M=!0,Lr(11))):(Zl(n.j,n.m,t,"[Invalid Chunked Response]"),Sr(n),Mc(n))}function _u(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Gr:(t=Number(e.substring(t,r)),isNaN(t)?yp:(r+=1)+t>e.length?Gr:(e=e.slice(r,r+t),n.C=r+t,e))}function wu(n){n.Y=Date.now()+n.P,_p(n,n.P)}function _p(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Tc(mr(n.lb,n),e)}function Ac(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Mc(n){0==n.l.H||n.J||CE(n.l,n)}function Sr(n){Ac(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Ah(n.V),dp(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ya(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||x(t.i,n)))if(!n.K&&x(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Fm(t),Lh(t)}km(t),Lr(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=Tc(mr(t.ib,t),6e3));if(1>=T(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else gs(t,11)}else if((n.K||t.g==n)&&Fm(t),!As(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const A=b[3];null!=A&&(t.ra=A,t.l.info("VER="+t.ra));const R=b[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const ye=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var u=r.i;u.g||-1==ye.indexOf("spdy")&&-1==ye.indexOf("quic")&&-1==ye.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(B(u,u.h),u.h=null))}if(r.F){const ke=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(r.Da=ke,Tn(r.I,r.F,ke))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=TE(r,r.J?r.pa:null,r.Y),l.K){Y(r.i,l);var m=l,I=r.L;I&&m.setTimeout(I),m.B&&(Ac(m),wu(m)),r.g=l}else e_(r);0<t.j.length&&kc(t)}else"stop"!=b[0]&&"close"!=b[0]||gs(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?gs(t,7):Jv(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}bc()}catch{}}function Rh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Sm(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(hu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Tm(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(hu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(We=Mo.prototype).setTimeout=function(n){this.P=n},We.nb=function(n){n=n.target;const e=this.M;e&&3==Ro(n)?e.l():this.Pa(n)},We.Pa=function(n){try{if(n==this.g)e:{const A=Ro(this.g);var e=this.g.Ia();if(this.g.da(),!(3>A)&&(3!=A||Dh||this.g&&(this.h.h||this.g.ja()||bp(this.g)))){this.J||4!=A||7==e||bc(),Ac(this);var t=this.g.da();this.ca=t;t:if(Ql(this)){var r=bp(this.g);n="";var o=r.length,u=4==Ro(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),Mc(this);var l="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Em(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,A,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,I=this.g;if((m=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!As(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Lr(12),Sr(this),Mc(this);break e}Zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,t)}this.S?(Tr(this,A,l),Dh&&this.i&&3==A&&(Mh(this.U,this.V,"tick",this.mb),this.V.start())):(Zl(this.j,this.m,l,null),ya(this,l)),4==A&&Sr(this),this.i&&!this.J&&(4==A?CE(this.l,this):(this.i=!1,wu(this)))}else(function Yv(n){const e={};n=(n.g&&2<=Ro(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(As(n[r]))continue;var t=Wv(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function E(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Lr(12)):(this.o=0,Lr(13)),Sr(this),Mc(this)}}}catch{}},We.mb=function(){if(this.g){var n=Ro(this.g),e=this.g.ja();this.C<e.length&&(Ac(this),Tr(this,n,e),this.i&&4!=n&&wu(this))}},We.cancel=function(){this.J=!0,Sr(this)},We.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(bc(),Lr(17)),Sr(this),this.o=2,Mc(this)):_p(this,this.Y-n)};var Oh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ks){this.h=n.h,mi(this,n.j),this.s=n.s,this.g=n.g,Jl(this,n.m),this.l=n.l;var e=n.i,t=new Rc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Am(this,t),this.o=n.o}else n&&(e=String(n).match(Oh))?(this.h=!1,mi(this,e[1]||"",!0),this.s=Eu(e[2]||""),this.g=Eu(e[3]||"",!0),Jl(this,e[4]),this.l=Eu(e[5]||"",!0),Am(this,e[6]||"",!0),this.o=Eu(e[7]||"")):(this.h=!1,this.i=new Rc(null,this.h))}function xo(n){return new Ks(n)}function mi(n,e,t){n.j=t?Eu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Am(n,e,t){e instanceof Rc?(n.i=e,function Nm(n,e){e&&!n.j&&(va(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Ph(this,r),Ip(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qn(e,ed)),n.i=new Rc(e,n.h))}function Tn(n,e,t){n.i.set(e,t)}function xc(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Eu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qn(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Nc),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Nc(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ks.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qn(e,Xl,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qn(e,Xl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qn(t,"/"==t.charAt(0)?ps:Ep,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qn(t,Mm)),n.join("")};var Xl=/[#\/\?@]/g,Ep=/[#\?:]/g,ps=/[#\?]/g,ed=/[#\?@]/g,Mm=/#/g;function Rc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function va(n){n.g||(n.g=new Map,n.h=0,n.i&&function wp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ph(n,e){va(n),e=_a(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function xm(n,e){return va(n),e=_a(n,e),n.g.has(e)}function Ip(n,e,t){Ph(n,e),0<t.length&&(n.i=null,n.g.set(_a(n,e),ds(t)),n.h+=t.length)}function _a(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function f(n){this.l=n||g,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ka&&Tt.g.Ka()&&Tt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=Rc.prototype).add=function(n,e){va(this),this.i=null,n=_a(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){va(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},We.ta=function(){va(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},We.Z=function(n){va(this);let e=[];if("string"==typeof n)xm(this,n)&&(e=e.concat(this.g.get(_a(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},We.set=function(n,e){return va(this),this.i=null,xm(this,n=_a(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var g=10;function _(n){return!!n.h||!!n.g&&n.g.size>=n.j}function T(n){return n.h?1:n.g?n.g.size:0}function x(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function B(n,e){n.g?n.g.add(e):n.h=e}function Y(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Se(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ds(n.i)}f.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var $e=class{stringify(n){return Tt.JSON.stringify(n,void 0)}parse(n){return Tt.JSON.parse(n,void 0)}};function Xe(){this.g=new $e}function rt(n,e,t){const r=t||"";try{Rh(n,function(o,u){let l=o;bo(o)&&(l=Hl(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function yi(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function No(n){this.l=n.fc||null,this.j=n.ob||!1}function Iu(n,e){Yn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ir(No,fs),No.prototype.g=function(){return new Iu(this.l,this.j)},No.prototype.i=function(n){return function(){return n}}({}),ir(Iu,Yn);var Oc=0;function Pc(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ys(n){n.readyState=4,n.l=null,n.j=null,n.A=null,wa(n)}function wa(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=Iu.prototype).open=function(n,e){if(this.readyState!=Oc)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,wa(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ys(this)),this.readyState=Oc},We.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Tt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pc(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ys(this):wa(this),3==this.readyState&&Pc(this)}},We.Za=function(n){this.g&&(this.response=this.responseText=n,Ys(this))},We.Ya=function(n){this.g&&(this.response=n,Ys(this))},We.ka=function(){this.g&&Ys(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kh=Tt.JSON.parse;function An(n){Yn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=td,this.L=this.M=!1}ir(An,Yn);var td="",Fh=/^https?$/i,nd=["POST","PUT"];function Cp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wE(n),Rm(n)}function wE(n){n.F||(n.F=!0,Fr(n,"complete"),Fr(n,"error"))}function EE(n){if(n.h&&typeof du<"u"&&(!n.C[1]||4!=Ro(n)||2!=n.da()))if(n.v&&4==Ro(n))_m(n.La,0,n);else if(Fr(n,"readystatechange"),4==Ro(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(Oh)[1]||null;!o&&Tt.self&&Tt.self.location&&(o=Tt.self.location.protocol.slice(0,-1)),r=!Fh.test(o?o.toLowerCase():"")}t=r}if(t)Fr(n,"complete"),Fr(n,"success");else{n.m=6;try{var u=2<Ro(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",wE(n)}}finally{Rm(n)}}}function Rm(n,e){if(n.g){Kv(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Fr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Kv(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function Ro(n){return n.g?n.g.readyState:0}function bp(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case td:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rd(n){let e="";return cp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Qv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=rd(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function Tp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ib(n){this.Ga=0,this.j=[],this.l=new hp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tp("baseRetryDelayMs",5e3,n),this.hb=Tp("retryDelaySeedMs",1e4,n),this.eb=Tp("forwardChannelMaxRetries",2,n),this.xa=Tp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new f(n&&n.concurrentRequestLimit),this.Ja=new Xe,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Jv(n){if(IE(n),3==n.H){var e=n.W++,t=xo(n.I);if(Tn(t,"SID",n.K),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),Vh(n,t),(e=new Mo(n,n.l,e)).L=2,e.v=xc(xo(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon)try{t=Tt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=sb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),wu(e)}Uh(n)}function Lh(n){n.g&&(t_(n),n.g.cancel(),n.g=null)}function IE(n){Lh(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),Fm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function kc(n){if(!_(n.i)&&!n.m){n.m=!0;var e=n.Na;Gl||ql(),zl||(Gl(),zl=!0),Sh.add(e,n),n.C=0}}function Pm(n,e){var t;t=e?e.m:n.W++;const r=xo(n.I);Tn(r,"SID",n.K),Tn(r,"RID",t),Tn(r,"AID",n.V),Vh(n,r),n.o&&n.s&&Qv(r,n.o,n.s),t=new Mo(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Xv(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),B(n.i,t),Yl(t,r,e)}function Vh(n,e){n.na&&cp(n.na,function(t,r){Tn(e,r,t)}),n.h&&Rh({},function(t,r){Tn(e,r,t)})}function Xv(n,e,t){t=Math.min(n.j.length,t);var r=n.h?mr(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let I=0;I<t;I++){let b=o[I].g;const A=o[I].map;if(b-=u,0>b)u=Math.max(0,o[I].g-100),m=!1;else try{rt(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function e_(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Gl||ql(),zl||(Gl(),zl=!0),Sh.add(e,n),n.A=0}}function km(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Tc(mr(n.Ma,n),bE(n,n.A)),n.A++,0))}function t_(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function DE(n){n.g=new Mo(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=xo(n.wa);Tn(e,"RID","rpc"),Tn(e,"SID",n.K),Tn(e,"AID",n.V),Tn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Tn(e,"TO",n.qa),Tn(e,"TYPE","xmlhttp"),Vh(n,e),n.o&&n.s&&Qv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=xc(xo(e)),t.s=null,t.S=!0,vp(t,n)}function Fm(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function CE(n,e){var t=null;if(n.g==e){Fm(n),t_(n),n.g=null;var r=2}else{if(!x(n.i,e))return;t=e.F,Y(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Fr(r=ga(),new Ao(r,t)),kc(n)}else e_(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function Om(n,e){return!(T(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Tc(mr(n.Na,n,e),bE(n,n.C)),n.C++,0)))}(n,e)||2==r&&km(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:gs(n,5);break;case 4:gs(n,10);break;case 3:gs(n,6);break;default:gs(n,2)}}function bE(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function gs(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=mr(n.pb,n);t||(t=new Ks("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||mi(t,"https"),xc(t)),function Un(n,e){const t=new hp;if(Tt.Image){const r=new Image;r.onload=fu(yi,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fu(yi,t,r,"TestLoadImage: error",!1,e),r.onabort=fu(yi,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fu(yi,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Lr(2);n.H=0,n.h&&n.h.za(e),Uh(n),IE(n)}function Uh(n){if(n.H=0,n.ma=[],n.h){const e=Se(n.i);(0!=e.length||0!=n.j.length)&&(To(n.ma,e),To(n.ma,n.j),n.i.i.length=0,ds(n.j),n.j.length=0),n.h.ya()}}function TE(n,e,t){var r=t instanceof Ks?xo(t):new Ks(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Jl(r,r.m);else{var o=Tt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Ks(null);r&&mi(u,r),e&&(u.g=e),o&&Jl(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Tn(r,t,e),Tn(r,"VER",n.ra),Vh(n,r),r}function sb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new An(t&&n.Ha&&!n.va?new No({ob:!0}):n.va)).Oa(n.J),e}function ob(){}function n_(){if(zs&&!(10<=Number(qs)))throw Error("Environmental error: no available transport.")}function Qs(n,e){Yn.call(this),this.g=new ib(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!As(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!As(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Bh(this)}function ab(n){xh.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function r_(){Kl.call(this),this.status=1}function Bh(n){this.g=n}function Oo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function i_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function mn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(We=An.prototype).Oa=function(n){this.M=n},We.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gp.g(),this.C=function Dm(n){return n.h||(n.h=n.i())}(this.u?this.u:gp),this.g.onreadystatechange=mr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Cp(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Tt.FormData&&n instanceof Tt.FormData,!(0<=Vl(nd,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Kv(this),0<this.B&&((this.L=function Dp(n){return zs&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.ua,this)):this.A=_m(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Cp(this,u)}},We.ua=function(){typeof du<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fr(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fr(this,"complete"),Fr(this,"abort"),Rm(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rm(this,!0)),An.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?EE(this):this.kb())},We.kb=function(){EE(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<Ro(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kh(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=ib.prototype).ra=8,We.H=1,We.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Mo(this,this.l,n);let u=this.s;if(this.U&&(u?(u=C(u),k(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xv(this,o,e),Tn(t=xo(this.I),"RID",n),Tn(t,"CVER",22),this.F&&Tn(t,"X-HTTP-Session-Id",this.F),Vh(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(rd(u)))+"&"+e:this.o&&Qv(t,this.o,u)),B(this.i,o),this.bb&&Tn(t,"TYPE","init"),this.P?(Tn(t,"$req",e),Tn(t,"SID","null"),o.aa=!0,Yl(o,t,null)):Yl(o,t,e),this.H=2}}else 3==this.H&&(n?Pm(this,n):0==this.j.length||_(this.i)||Pm(this))},We.Ma=function(){if(this.u=null,DE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Tc(mr(this.jb,this),n)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Lr(10),Lh(this),DE(this))},We.ib=function(){null!=this.v&&(this.v=null,Lh(this),km(this),Lr(19))},We.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Lr(2)):(this.l.info("Failed to ping google.com"),Lr(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=ob.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},n_.prototype.g=function(n,e){return new Qs(n,e)},ir(Qs,Yn),Qs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Lr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=TE(n,null,n.Y),kc(n)},Qs.prototype.close=function(){Jv(this.g)},Qs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hl(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&kc(e)},Qs.prototype.N=function(){this.g.h=null,delete this.j,Jv(this.g),delete this.g,Qs.$.N.call(this)},ir(ab,xh),ir(r_,Kl),ir(Bh,ob),Bh.prototype.Ba=function(){Fr(this.g,"a")},Bh.prototype.Aa=function(n){Fr(this.g,new ab(n))},Bh.prototype.za=function(n){Fr(this.g,new r_)},Bh.prototype.ya=function(){Fr(this.g,"b")},ir(Oo,function ub(){this.blockSize=-1}),Oo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Oo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)i_(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){i_(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){i_(this,r),o=0;break}}this.h=o,this.i+=e},Oo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Du={};function id(n){return-128<=n&&128>n?function Ul(n,e){var t=Du;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new mn([0|e],0>e?-1:0)}):new mn([0|n],0>n?-1:0)}function Po(n){if(isNaN(n)||!isFinite(n))return Sp;if(0>n)return Fi(Po(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Lm;return new mn(e,0)}var Lm=4294967296,Sp=id(0),SE=id(1),cb=id(16777216);function ko(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ms(n){return-1==n.h}function Fi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new mn(t,~n.h).add(SE)}function o_(n,e){return n.add(Fi(e))}function Ap(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Mp(n,e){this.g=n,this.h=e}function Vm(n,e){if(ko(e))throw Error("division by zero");if(ko(n))return new Mp(Sp,Sp);if(ms(n))return e=Vm(Fi(n),e),new Mp(Fi(e.g),Fi(e.h));if(ms(e))return e=Vm(n,Fi(e)),new Mp(Fi(e.g),e.h);if(30<n.g.length){if(ms(n)||ms(e))throw Error("slowDivide_ only works with positive integers.");for(var t=SE,r=e;0>=r.X(n);)t=AE(t),r=AE(r);var o=jh(t,1),u=jh(r,1);for(r=jh(r,2),t=jh(t,2);!ko(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=jh(r,1),t=jh(t,1)}return e=o_(n,o.R(e)),new Mp(o,e)}for(o=Sp;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Po(t)).R(e);ms(l)||0<l.X(n);)l=(u=Po(t-=r)).R(e);ko(u)&&(u=SE),o=o.add(u),n=o_(n,l)}return new Mp(o,n)}function AE(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new mn(t,n.h)}function jh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new mn(o,n.h)}(We=mn.prototype).ea=function(){if(ms(this))return-Fi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Lm+r)*e,e*=Lm}return n},We.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ko(this))return"0";if(ms(this))return"-"+Fi(this).toString(n);for(var e=Po(Math.pow(n,6)),t=this,r="";;){var o=Vm(t,e).g,u=((0<(t=o_(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ko(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},We.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},We.X=function(n){return ms(n=o_(this,n))?-1:ko(n)?0:1},We.abs=function(){return ms(this)?Fi(this):this},We.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new mn(t,-2147483648&t[t.length-1]?-1:0)},We.R=function(n){if(ko(this)||ko(n))return Sp;if(ms(this))return ms(n)?Fi(this).R(Fi(n)):Fi(Fi(this).R(n));if(ms(n))return Fi(this.R(Fi(n)));if(0>this.X(cb)&&0>n.X(cb))return Po(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,I=65535&n.D(o);t[2*r+2*o]+=l*I,Ap(t,2*r+2*o),t[2*r+2*o+1]+=u*I,Ap(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,Ap(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,Ap(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new mn(t,0)},We.gb=function(n){return Vm(this,n).h},We.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new mn(t,this.h&n.h)},We.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new mn(t,this.h|n.h)},We.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new mn(t,this.h^n.h)},n_.prototype.createWebChannel=n_.prototype.g,Qs.prototype.send=Qs.prototype.u,Qs.prototype.open=Qs.prototype.m,Qs.prototype.close=Qs.prototype.close,vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,ma.COMPLETE="complete",Cm.EventType=Sc,Sc.OPEN="a",Sc.CLOSE="b",Sc.ERROR="c",Sc.MESSAGE="d",Yn.prototype.listen=Yn.prototype.O,An.prototype.listenOnce=An.prototype.P,An.prototype.getLastError=An.prototype.Sa,An.prototype.getLastErrorCode=An.prototype.Ia,An.prototype.getStatus=An.prototype.da,An.prototype.getResponseJson=An.prototype.Wa,An.prototype.getResponseText=An.prototype.ja,An.prototype.send=An.prototype.ha,An.prototype.setWithCredentials=An.prototype.Oa,Oo.prototype.digest=Oo.prototype.l,Oo.prototype.reset=Oo.prototype.reset,Oo.prototype.update=Oo.prototype.j,mn.prototype.add=mn.prototype.add,mn.prototype.multiply=mn.prototype.R,mn.prototype.modulo=mn.prototype.gb,mn.prototype.compare=mn.prototype.X,mn.prototype.toNumber=mn.prototype.ea,mn.prototype.toString=mn.prototype.toString,mn.prototype.getBits=mn.prototype.D,mn.fromNumber=Po,mn.fromString=function s_(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Fi(s_(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Po(Math.pow(e,8)),r=Sp,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=Po(Math.pow(e,u)),r=r.R(u).add(Po(l))):r=(r=r.R(t)).add(Po(l))}return r};var ME=qi.createWebChannelTransport=function(){return new n_},Um=qi.getStatEventTarget=function(){return ga()},a_=qi.ErrorCode=vu,u_=qi.EventType=ma,lb=qi.Event=Dc,Ar=qi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xE=qi.FetchXmlHttpFactory=No,Bm=qi.WebChannel=Cm,c_=qi.XhrIo=An,NE=qi.Md5=Oo,$h=qi.Integer=mn;const RE="@firebase/firestore";class ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");let Hh="9.22.2";const Cu=new Ri.Yd("@firebase/firestore");function OE(){return Cu.logLevel}function Ne(n,...e){if(Cu.logLevel<=Ri.in.DEBUG){const t=e.map(jm);Cu.debug(`Firestore (${Hh}): ${n}`,...t)}}function Mt(n,...e){if(Cu.logLevel<=Ri.in.ERROR){const t=e.map(jm);Cu.error(`Firestore (${Hh}): ${n}`,...t)}}function Li(n,...e){if(Cu.logLevel<=Ri.in.WARN){const t=e.map(jm);Cu.warn(`Firestore (${Hh}): ${n}`,...t)}}function jm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Hh}) INTERNAL ASSERTION FAILED: `+n;throw Mt(e),new Error(e)}function dt(n,e){n||it()}function Je(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends Yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class db{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ni.UNAUTHENTICATED))}shutdown(){}}class hb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d_{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,le.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},I=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>I(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?I(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new db(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new ni(e)}}class kE{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class FE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fb{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.T=t.token,new Fc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $m(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class VE{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=$m(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function bu(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Lc(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Bn(0,0))}static max(){return new ht(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xp{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends xp{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new on(t)}static emptyPath(){return new on([])}}const UE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends xp{construct(e,t,r){return new On(e,t,r)}static isValidIdentifier(e){return UE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new De(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new De(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[o+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new De(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=I,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new De(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(on.fromString(e))}static fromName(e){return new Qe(on.fromString(e).popFirst(5))}static empty(){return new Qe(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new on(e.slice()))}}class Hm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function h_(n){return n.fields.find(e=>2===e.kind)}function Tu(n){return n.fields.filter(e=>2!==e.kind)}Hm.UNKNOWN_ID=-1;class Gm{constructor(e,t){this.fieldPath=e,this.kind=t}}class sd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sd(0,Ms.min())}}function pb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ht.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new Ms(o,Qe.empty(),e)}function gb(n){return new Ms(n.readTime,n.key,-1)}class Ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ms(ht.min(),Qe.empty(),-1)}static max(){return new Ms(ht.max(),Qe.empty(),-1)}}function f_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fo(n){return p_.apply(this,arguments)}function p_(){return p_=(0,le.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==mb)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),p_.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},I=>r(I))}),l=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let I=0;I<u;I++){const b=I;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Gh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Mr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new od(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=Np(r.target.error);this.v.reject(new od(e,o))}}static open(e,t,r,o){try{return new Gh(t,e.transaction(o,r))}catch(u){throw new od(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zm(t)}}class Zi{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Zi.S((0,Yt.z$)())&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Lo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Yt.hl)())return!1;if(Zi.C())return!0;const e=(0,Yt.z$)(),t=Zi.S(e),r=0<t&&t<10,o=Zi.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,le.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new od(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new De(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new De(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new od(e,m))},u.onupgradeneeded=l=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,le.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const I=Gh.open(u.db,e,l?"readonly":"readwrite",r),b=o(I).next(A=>(I.P(),A)).catch(A=>(I.abort(A),re.reject(A))).toPromise();return b.catch(()=>{}),yield I.R,b}catch(I){const b=I,A="FirebaseError"!==b.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class g_{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Lo(this.L.delete())}}class od extends De{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Js(n){return"IndexedDbTransactionError"===n.name}class zm{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Lo(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Lo(this.store.add(e))}get(e){return Lo(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Lo(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Lo(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const l=Np(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new re((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const I=new g_(m),b=t(m.primaryKey,m.value,I);if(b instanceof re){const A=b.catch(R=>(I.done(),re.reject(R)));r.push(A)}I.isDone?o():null===I.K?m.continue():m.continue(I.K)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lo(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Np(r.target.error);t(o)}})}let m_=!1;function Np(n){const e=Zi.S((0,Yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m_||(m_=!0,setTimeout(()=>{throw r},0)),r}}return n}class qm{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Js(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Fo(r)}yield t.et(6e4)}))}}class zA{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ne("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=gb(u);f_(l,r)>0&&(r=l)}),new Ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ki=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ad(n){return null==n}function zh(n){return 0===n&&1/n==-1/0}function $E(n){return"number"==typeof n&&Number.isInteger(n)&&!zh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y_(e)),e=HE(n.get(t),e);return y_(e)}function HE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function y_(n){return n+"\x01\x01"}function Ea(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let I;0===o.length?I=m:(o+=m,I=o,o=""),r.push(I);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:it()}u=l+2}return new on(r)}const GE=["userId","batchId"];function v_(n,e){return[n,Vi(e)]}function zE(n,e,t){return[n,Vi(e),t]}const __={},w_=["prefixPath","collectionGroup","readTime","documentId"],vb=["prefixPath","collectionGroup","documentId"],qE=["collectionGroup","readTime","prefixPath","documentId"],E_=["canonicalId","targetId"],Wm=["targetId","path"],_b=["path","targetId"],WE=["collectionId","parent"],wb=["indexId","uid"],ZE=["uid","sequenceNumber"],qA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Eb=["indexId","uid","orderedDocumentKey"],Zm=["userId","collectionPath","documentId"],Ib=["userId","collectionPath","largestBatchId"],qh=["userId","collectionGroup","largestBatchId"],Wh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Db=[...Wh,"documentOverlays"],I_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KE=I_,Cb=[...KE,"indexConfiguration","indexState","indexEntries"];class D_ extends yb{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function zr(n,e){const t=Je(n);return Zi.M(t.ht,e)}function C_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new b_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new b_(this.root,e,this.comparator,!1)}getReverseIterator(){return new b_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new b_(this.root,e,this.comparator,!0)}}class b_{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??qr.RED,this.left=o??qr.EMPTY,this.right=u??qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new qr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return qr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1,qr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rp(this.data.getIterator())}getIteratorFrom(e){return new Rp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class Rp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ud(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new En(On.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class YE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new YE("Invalid base64 string: "+o):o}}(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const Tb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vc(n){if(dt(!!n),"string"==typeof n){let e=0;const t=Tb.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yr(n.seconds),nanos:yr(n.nanos)}}function yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Da(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function Su(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xs(n){const e=n.mapValue.fields.__previous_value__;return Su(e)?Xs(e):e}function Kh(n){const e=Vc(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class WA{constructor(e,t,r,o,u,l,m,I,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=I,this.useFetchStreams=b}}class Uc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}const cd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},T_={nullValue:"NULL_VALUE"};function Au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Su(n)?4:JE(n)?9007199254740991:10:it()}function Vo(n,e){if(n===e)return!0;const t=Au(n);if(t!==Au(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kh(n).isEqual(Kh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Vc(r.timestampValue),l=Vc(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Da(n.bytesValue).isEqual(Da(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return yr(r.geoPointValue.latitude)===yr(o.geoPointValue.latitude)&&yr(r.geoPointValue.longitude)===yr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return yr(r.integerValue)===yr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=yr(r.doubleValue),l=yr(o.doubleValue);return u===l?zh(u)===zh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return bu(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(C_(u)!==C_(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Vo(u[m],l[m])))return!1;return!0}(n,e);default:return it()}var o}function Km(n,e){return void 0!==(n.values||[]).find(t=>Vo(t,e))}function Mu(n,e){if(n===e)return 0;const t=Au(n),r=Au(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=yr(o.integerValue||o.doubleValue),m=yr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return Op(n.timestampValue,e.timestampValue);case 4:return Op(Kh(n),Kh(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Da(o),m=Da(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let I=0;I<l.length&&I<m.length;I++){const b=kt(l[I],m[I]);if(0!==b)return b}return kt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=kt(yr(o.latitude),yr(u.latitude));return 0!==l?l:kt(yr(o.longitude),yr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let I=0;I<l.length&&I<m.length;++I){const b=Mu(l[I],m[I]);if(b)return b}return kt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===cd.mapValue&&u===cd.mapValue)return 0;if(o===cd.mapValue)return 1;if(u===cd.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),I=u.fields||{},b=Object.keys(I);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const R=kt(m[A],b[A]);if(0!==R)return R;const H=Mu(l[m[A]],I[b[A]]);if(0!==H)return H}return kt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function Op(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=Vc(n),r=Vc(e),o=kt(t.seconds,r.seconds);return 0!==o?o:kt(t.nanos,r.nanos)}function ld(n){return Ym(n)}function Ym(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Vc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Da(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Ym(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${Ym(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function Nt(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qm(n){return!!n&&"integerValue"in n}function Yh(n){return!!n&&"arrayValue"in n}function Sb(n){return!!n&&"nullValue"in n}function QE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kp(n){return!!n&&"mapValue"in n}function Fp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ia(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XE(n){return"nullValue"in n?T_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nt(Uc.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function Ab(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nt(Uc.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?cd:it()}function S_(n,e){const t=Mu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eI(n,e){const t=Mu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(t)}setAll(e){let t=On.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const I=this.getFieldsMap(t);this.applyChanges(I,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=Fp(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());kp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];kp(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ia(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new vi(Fp(this.value))}}function Mb(n){const e=[];return Ia(n.fields,(t,r)=>{const o=new On([t]);if(kp(r)){const u=Mb(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Yi(e)}class jn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new jn(e,0,ht.min(),ht.min(),ht.min(),vi.empty(),0)}static newFoundDocument(e,t,r,o){return new jn(e,1,t,ht.min(),r,o,0)}static newNoDocument(e,t){return new jn(e,2,t,ht.min(),ht.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,ht.min(),ht.min(),vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xu{constructor(e,t){this.position=e,this.inclusive=t}}function Nu(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):Mu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function dd(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class hd{constructor(e,t="asc"){this.field=e,this.dir=t}}function xb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Lp{}class qt extends Lp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Nb(e,t,r):"array-contains"===t?new Ob(e,r):"in"===t?new iI(e,r):"not-in"===t?new Pb(e,r):"array-contains-any"===t?new sI(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Rb(e,r):new nI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mu(t,this.value)):null!==t&&Au(this.value)===Au(t)&&this.matchesComparison(Mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yn extends Lp{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new yn(e,t)}matches(e){return Ca(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ca(n){return"and"===n.op}function Jm(n){return"or"===n.op}function Vp(n){return Xm(n)&&Ca(n)}function Xm(n){for(const e of n.filters)if(e instanceof yn)return!1;return!0}function Up(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+ld(n.value);if(Vp(n))return n.filters.map(e=>Up(e)).join(",");{const e=n.filters.map(t=>Up(t)).join(",");return`${n.op}(${e})`}}function A_(n,e){return n instanceof qt?(t=n,(r=e)instanceof qt&&t.op===r.op&&t.field.isEqual(r.field)&&Vo(t.value,r.value)):n instanceof yn?function(t,r){return r instanceof yn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&A_(u,r.filters[l]),!0)}(n,e):void it();var t,r}function ey(n,e){const t=n.filters.concat(e);return yn.create(t,n.op)}function tI(n){return n instanceof qt?`${(e=n).field.canonicalString()} ${e.op} ${ld(e.value)}`:n instanceof yn?function(e){return e.op.toString()+" {"+e.getFilters().map(tI).join(" ,")+"}"}(n):"Filter";var e}class Nb extends qt{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rb extends qt{constructor(e,t){super(e,"in",t),this.keys=rI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nI extends qt{constructor(e,t){super(e,"not-in",t),this.keys=rI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class Ob extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yh(t)&&Km(t.arrayValue,this.value)}}class iI extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Km(this.value.arrayValue,t)}}class Pb extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Km(this.value.arrayValue,t)}}class sI extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Km(this.value.arrayValue,r))}}class oI{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function M_(n,e=null,t=[],r=[],o=null,u=null,l=null){return new oI(n,e,t,r,o,u,l)}function fd(n){const e=Je(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Up(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ld(r)).join(",")),e.dt=t}return e.dt}function _i(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!A_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dd(n.startAt,e.startAt)&&dd(n.endAt,e.endAt)}function ty(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ny(n,e){return n.filters.filter(t=>t instanceof qt&&t.field.isEqual(e))}function kb(n,e,t){let r=T_,o=!0;for(const u of ny(n,e)){let l=T_,m=!0;switch(u.op){case"<":case"<=":l=XE(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=T_}S_({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];S_({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function ry(n,e,t){let r=cd,o=!0;for(const u of ny(n,e)){let l=cd,m=!0;switch(u.op){case">=":case">":l=Ab(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=cd}eI({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];eI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class ba{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=I,this.wt=null,this._t=null}}function aI(n,e,t,r,o,u,l,m){return new ba(n,e,t,r,o,u,l,m)}function Qh(n){return new ba(n)}function uI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function x_(n){return null!==n.collectionGroup}function Ru(n){const e=Je(n);if(null===e.wt){e.wt=[];const t=sy(e),r=iy(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new hd(t)),e.wt.push(new hd(On.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new hd(On.keyField(),u))}}}return e.wt}function Qi(n){const e=Je(n);if(!e._t)if("F"===e.limitType)e._t=M_(e.path,e.collectionGroup,Ru(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ru(e))t.push(new hd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new xu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new xu(e.startAt.position,e.startAt.inclusive):null;e._t=M_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function N_(n,e){e.getFirstInequalityField(),sy(n);const t=n.filters.concat([e]);return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oy(n,e,t){return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bp(n,e){return _i(Qi(n),Qi(e))&&n.limitType===e.limitType}function cI(n){return`${fd(Qi(n))}|lt:${n.limitType}`}function eo(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>tI(r)).join(", ")}]`),ad(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ld(r)).join(",")),`Target(${t})`}(Qi(n))}; limitType=${n.limitType})`}function pd(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Ru(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=Nu(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,Ru(t),r)||t.endAt&&!function(o,u,l){const m=Nu(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,Ru(t),r)));var t,r}function lI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R_(n){return(e,t)=>{let r=!1;for(const o of Ru(n)){const u=Fb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Fb(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),I=l.data.field(o);return null!==m&&null!==I?Mu(m,I):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class Ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Zh(this.inner)}size(){return this.innerSize}}const dI=new Pn(Qe.comparator);function wi(){return dI}const ay=new Pn(Qe.comparator);function uy(...n){let e=ay;for(const t of n)e=e.insert(t.key,t);return e}function O_(n){let e=ay;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Uo(){return Jh()}function P_(){return Jh()}function Jh(){return new Ta(n=>n.toString(),(n,e)=>n.isEqual(e))}const k_=new Pn(Qe.comparator),Ou=new En(Qe.comparator);function Gt(...n){let e=Ou;for(const t of n)e=e.add(t);return e}const Lb=new En(kt);function jp(){return Lb}function hI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function fI(n){return{integerValue:""+n}}function pI(n,e){return $E(e)?fI(e):hI(n,e)}class F_{constructor(){this._=void 0}}function gI(n,e,t){return n instanceof Sa?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Su(o)&&(o=Xs(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Aa?Ub(n,e):n instanceof gd?Hp(n,e):function(r,o){const u=$p(r,o),l=mI(u)+mI(r.gt);return Qm(u)&&Qm(r.gt)?fI(l):hI(r.serializer,l)}(n,e)}function Vb(n,e,t){return n instanceof Aa?Ub(n,e):n instanceof gd?Hp(n,e):t}function $p(n,e){return n instanceof Xh?Qm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sa extends F_{}class Aa extends F_{constructor(e){super(),this.elements=e}}function Ub(n,e){const t=yI(e);for(const r of n.elements)t.some(o=>Vo(o,r))||t.push(r);return{arrayValue:{values:t}}}class gd extends F_{constructor(e){super(),this.elements=e}}function Hp(n,e){let t=yI(e);for(const r of n.elements)t=t.filter(o=>!Vo(o,r));return{arrayValue:{values:t}}}class Xh extends F_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function mI(n){return yr(n.integerValue||n.doubleValue)}function yI(n){return Yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class md{constructor(e,t){this.field=e,this.transform=t}}class Gp{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qp{}function vI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new tf(n.key,or.none()):new ef(n.key,n.data,or.none());{const t=n.data,r=vi.empty();let o=new En(On.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new ku(n.key,r,new Yi(o.toArray()),or.none())}}function jb(n,e,t){n instanceof ef?function(r,o,u){const l=r.value.clone(),m=wI(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ku?function(r,o,u){if(!zp(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=wI(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(_I(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pu(n,e,t,r){return n instanceof ef?function(o,u,l,m){if(!zp(o.precondition,u))return l;const I=o.value.clone(),b=EI(o.fieldTransforms,m,u);return I.setAll(b),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null}(n,e,t,r):n instanceof ku?function(o,u,l,m){if(!zp(o.precondition,u))return l;const I=EI(o.fieldTransforms,m,u),b=u.data;return b.setAll(_I(o)),b.setAll(I),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,zp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function $b(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=$p(r.transform,o||null);null!=u&&(null===t&&(t=vi.empty()),t.set(r.field,u))}return t||null}function Hb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&bu(t,r,(o,u)=>function Bb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Aa&&r instanceof Aa||t instanceof gd&&r instanceof gd?bu(t.elements,r.elements,Vo):t instanceof Xh&&r instanceof Xh?Vo(t.gt,r.gt):t instanceof Sa&&r instanceof Sa);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ef extends qp{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ku extends qp{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _I(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wI(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,Vb(l,m,t[o]))}return r}function EI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,gI(u,l,e))}return r}class tf extends qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L_ extends qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cy{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&jb(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=P_();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const I=vI(l,m);null!==I&&r.set(o.key,I),l.isValidDocument()||l.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&bu(this.mutations,e.mutations,(t,r)=>Hb(t,r))&&bu(this.baseMutations,e.baseMutations,(t,r)=>Hb(t,r))}}class Wp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=k_;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new Wp(e,t,r,o)}}class V_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gb{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vr,an;function II(n){switch(n){default:return it();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function DI(n){if(void 0===n)return Mt("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Vr.OK:return oe.OK;case Vr.CANCELLED:return oe.CANCELLED;case Vr.UNKNOWN:return oe.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return oe.INTERNAL;case Vr.UNAVAILABLE:return oe.UNAVAILABLE;case Vr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Vr.NOT_FOUND:return oe.NOT_FOUND;case Vr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Vr.ABORTED:return oe.ABORTED;case Vr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Vr.DATA_LOSS:return oe.DATA_LOSS;default:return it()}}(an=Vr||(Vr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class B_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ly}static getOrCreateInstance(){return null===ly&&(ly=new B_),ly}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ly=null;function j_(){return new TextEncoder}const CI=new $h([4294967295,4294967295],0);function bI(n){const e=j_().encode(n),t=new NE;return t.update(e),new Uint8Array(t.digest())}function zb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new $h([t,r],0),new $h([o,u],0)]}class dy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new hy(`Invalid padding: ${t}`);if(r<0)throw new hy(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new hy(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new hy(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=$h.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply($h.fromNumber(r)));return 1===o.compare(CI)&&(o=new $h([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=bI(e),[r,o]=zb(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new dy(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=bI(e),[r,o]=zb(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class hy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bc{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Zp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bc(ht.min(),o,new Pn(kt),wi(),Gt())}}class Zp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zp(r,t,Gt(),Gt(),Gt())}}class fy{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class py{constructor(e,t){this.targetId=e,this.Vt=t}}class TI{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Bo{constructor(){this.St=0,this.Dt=jc(),this.Ct=Wr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gt(),t=Gt(),r=Gt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new Zp(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=jc()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Kp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=wi(),this.zt=Ei(),this.Wt=new Pn(kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(ty(l))if(0===o){const m=new Qe(l.path);this.Yt(r,m,jn.newNoDocument(m,ht.min()))}else dt(1===o);else{const m=this.ie(r);if(m!==o){const I=this.re(e,m);0!==I&&(this.ee(r),this.Wt=this.Wt.insert(r,2===I?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=B_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,A,R){var H,X,ye,ke,Ue,vt;const Ot={localCacheCount:A,existenceFilterCount:R.count},Dt=R.unchangedNames;return Dt&&(Ot.bloomFilter={applied:0===b,hashCount:null!==(H=Dt?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(ke=null===(ye=null===(X=Dt?.bits)||void 0===X?void 0:X.bitmap)||void 0===ye?void 0:ye.length)&&void 0!==ke?ke:0,padding:null!==(vt=null===(Ue=Dt?.bits)||void 0===Ue?void 0:Ue.padding)&&void 0!==vt?vt:0}),Ot}(I,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let I,b;try{I=Da(u).toUint8Array()}catch(A){if(A instanceof YE)return Li("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw A}try{b=new dy(I,l,m)}catch(A){return Li(A instanceof hy?"BloomFilter error: ":"Applying bloom filter failed: ",A),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&ty(m.target)){const I=new Qe(m.target.path);null!==this.jt.get(I)||this.ae(l,I)||this.Yt(l,I,jn.newNoDocument(I,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Gt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(I=>{const b=this.se(I);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new Bc(e,t,this.Wt,this.jt,r);return this.jt=wi(),this.zt=Ei(),this.Wt=new Pn(kt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Bo,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new En(kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Bo),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Ei(){return new Pn(Qe.comparator)}function jc(){return new Pn(Qe.comparator)}const gy={asc:"ASCENDING",desc:"DESCENDING"},to={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$_={and:"AND",or:"OR"};class nf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $c(n,e){return n.useProto3Json||ad(e)?e:{value:e}}function jo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yd(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rf(n,e){return jo(n,e.toTimestamp())}function $n(n){return dt(!!n),ht.fromTimestamp(function(e){const t=Vc(e);return new Bn(t.seconds,t.nanos)}(n))}function Hc(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vd(n){const e=on.fromString(n);return dt(Yp(e)),e}function Ma(n,e){return Hc(n.databaseId,e.path)}function $o(n,e){const t=vd(e);if(t.get(1)!==n.databaseId.projectId)throw new De(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(G_(t))}function my(n,e){return Hc(n.databaseId,e)}function H_(n){const e=vd(n);return 4===e.length?on.emptyPath():G_(e)}function sf(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function G_(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function z_(n,e,t){return{name:Ma(n,e),fields:t.value.mapValue.fields}}function q_(n,e,t){const r=$o(n,e.name),o=$n(e.updateTime),u=e.createTime?$n(e.createTime):ht.min(),l=new vi({mapValue:{fields:e.fields}}),m=jn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function _d(n,e){let t;if(e instanceof ef)t={update:z_(n,e.key,e.value)};else if(e instanceof tf)t={delete:Ma(n,e.key)};else if(e instanceof ku)t={update:z_(n,e.key,e.data),updateMask:K_(e.fieldMask)};else{if(!(e instanceof L_))return it();t={verify:Ma(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Sa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Aa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:rf(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function W_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?or.updateTime($n(o.updateTime)):void 0!==o.exists?or.exists(o.exists):or.none():or.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(dt("REQUEST_TIME"===l.setToServerValue),m=new Sa):"appendMissingElements"in l?m=new Aa(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new gd(l.removeAllFromArray.values||[]):"increment"in l?m=new Xh(u,l.increment):it();const I=On.fromServerFormat(l.fieldPath);return new md(I,m)}(n,o)):[];var o;if(e.update){const o=$o(n,e.update.name),u=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Yi((e.updateMask.fieldPaths||[]).map(b=>On.fromServerFormat(b)));return new ku(o,u,l,t,r)}return new ef(o,u,t,r)}if(e.delete){const o=$o(n,e.delete);return new tf(o,t)}if(e.verify){const o=$o(n,e.verify);return new L_(o,t)}return it()}function qb(n,e){return{documents:[my(n,e.path)]}}function Z_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=my(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=my(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(I){if(0!==I.length)return af(yn.create(I,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(I){if(0!==I.length)return I.map(b=>{return{field:Gc((A=b).field),direction:YA(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=$c(n,e.limit);var m,I;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(I=e.endAt).inclusive,values:I.position}),t}function MI(n){let e=H_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const R=xI(A);return R instanceof yn&&Vp(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new hd(zc((R=A).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(A){let R;return R="object"==typeof A?A.value:A,ad(R)?null:R}(t.limit));let I=null;var A;t.startAt&&(I=new xu((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new xu(A.values||[],!A.before)}(t.endAt)),aI(e,o,l,u,m,"F",I,b)}function xI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zc(e.unaryFilter.field);return qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zc(e.unaryFilter.field);return qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=zc(e.unaryFilter.field);return qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=zc(e.unaryFilter.field);return qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?qt.create(zc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return yn.create(e.compositeFilter.filters.map(t=>xI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function YA(n){return gy[n]}function Wb(n){return to[n]}function Zb(n){return $_[n]}function Gc(n){return{fieldPath:n.canonicalString()}}function zc(n){return On.fromServerFormat(n.fieldPath)}function af(n){return n instanceof qt?function(e){if("=="===e.op){if(QE(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NAN"}};if(Sb(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(QE(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NOT_NAN"}};if(Sb(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gc(e.field),op:Wb(e.op),value:e.value}}}(n):n instanceof yn?function(e){const t=e.getFilters().map(r=>af(r));return 1===t.length?t[0]:{compositeFilter:{op:Zb(e.op),filters:t}}}(n):it()}function K_(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yp(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class xa{constructor(e,t,r,o,u=ht.min(),l=ht.min(),m=Wr.EMPTY_BYTE_STRING,I=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=I}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uf{constructor(e){this.fe=e}}function RI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ma(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:jo(o,u.version.toTimestamp()),createTime:jo(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wd(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:wd(e.version)}}var o,u;return r}function qc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ed(n){const e=new Bn(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function Id(n,e){const t=(e.baseMutations||[]).map(u=>W_(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>W_(n.fe,u)),o=Bn.fromMillis(e.localWriteTimeMs);return new cy(e.batchId,o,t,r)}function Qp(n){const e=Ed(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ed(n.lastLimboFreeSnapshotVersion):ht.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=Qi(Qh(H_(o.documents[0])))):r=Qi(MI(n.query)),new xa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function yy(n,e){const t=wd(e.snapshotVersion),r=wd(e.lastLimboFreeSnapshotVersion);let o;o=ty(e.target)?qb(n.fe,e.target):Z_(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function cf(n){const e=MI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?oy(e,e.limit,"L"):e}function lf(n,e){return new V_(e.largestBatchId,W_(n.fe,e.overlayMutation))}function Kb(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function OI(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:wd(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Yb{getBundleMetadata(e,t){return vy(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ed(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return vy(e).put({bundleId:(r=t).id,createTime:wd($n(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return PI(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:cf(o.bundledQuery),readTime:Ed(o.readTime)};var o})}saveNamedQuery(e,t){return PI(e).put({name:(r=t).name,readTime:wd($n(r.readTime)),bundledQuery:r.bundledQuery});var r}}function vy(n){return zr(n,"bundles")}function PI(n){return zr(n,"namedQueries")}class Jp{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Jp(e,t.uid||"")}getOverlay(e,t){return Xp(e).get(Kb(this.userId,t)).next(r=>r?lf(this.serializer,r):null)}getOverlays(e,t){const r=Uo();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new V_(t,l);o.push(this.we(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Vi(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Xp(e).J("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Uo(),u=Vi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Xp(e).j("collectionPathOverlayIndex",l).next(m=>{for(const I of m){const b=lf(this.serializer,I);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Uo();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xp(e).X({index:"collectionGroupOverlayIndex",range:m},(I,b,A)=>{const R=lf(this.serializer,b);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):A.done()}).next(()=>u)}we(e,t){return Xp(e).put(function(r,o,u){const[l,m,I]=Kb(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:I,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:_d(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Xp(n){return zr(n,"documentOverlays")}class Dd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(yr(e.integerValue));else if("doubleValue"in e){const r=yr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),zh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Da(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?JE(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function kI(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Y_(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=kI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Dd.Ve=new Dd;class FI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=Y_(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=Y_(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Qb{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Jb{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class eg{constructor(){this.je=new FI,this.ze=new Qb(this.je),this.We=new Jb(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Wc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wc(this.indexId,this.documentKey,this.arrayValue,r)}}function Na(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_y(n.arrayValue,e.arrayValue),0!==t?t:(t=_y(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function _y(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Xb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){dt(e.collectionGroup===this.collectionId);const t=h_(e);if(void 0!==t&&!this.en(t))return!1;const r=Tu(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function tg(n){var e,t;if(dt(n instanceof qt||n instanceof yn),n instanceof qt){if(n instanceof iI){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>qt.create(n.field,"==",u)))||[];return yn.create(o,"or")}return n}const r=n.filters.map(o=>tg(o));return yn.create(r,n.op)}function wy(n){if(0===n.getFilters().length)return[];const e=Q_(tg(n));return dt(LI(e)),ng(e)||Ey(e)?[e]:e.getFilters()}function ng(n){return n instanceof qt}function Ey(n){return n instanceof yn&&Vp(n)}function LI(n){return ng(n)||Ey(n)||function(e){if(e instanceof yn&&Jm(e)){for(const t of e.getFilters())if(!ng(t)&&!Ey(t))return!1;return!0}return!1}(n)}function Q_(n){if(dt(n instanceof qt||n instanceof yn),n instanceof qt)return n;if(1===n.filters.length)return Q_(n.filters[0]);const e=n.filters.map(r=>Q_(r));let t=yn.create(e,n.op);return t=df(t),LI(t)?t:(dt(t instanceof yn),dt(Ca(t)),dt(t.filters.length>1),t.filters.reduce((r,o)=>J_(r,o)))}function J_(n,e){let t;return dt(n instanceof qt||n instanceof yn),dt(e instanceof qt||e instanceof yn),t=n instanceof qt?e instanceof qt?yn.create([n,e],"and"):Iy(n,e):e instanceof qt?Iy(e,n):function(r,o){if(dt(r.filters.length>0&&o.filters.length>0),Ca(r)&&Ca(o))return ey(r,o.getFilters());const u=Jm(r)?r:o,l=Jm(r)?o:r,m=u.filters.map(I=>J_(I,l));return yn.create(m,"or")}(n,e),df(t)}function Iy(n,e){if(Ca(e))return ey(e,n.getFilters());{const t=e.filters.map(r=>J_(n,r));return yn.create(t,"or")}}function df(n){if(dt(n instanceof qt||n instanceof yn),n instanceof qt)return n;const e=n.getFilters();if(1===e.length)return df(e[0]);if(Xm(n))return n;const t=e.map(o=>df(o)),r=[];return t.forEach(o=>{o instanceof qt?r.push(o):o instanceof yn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:yn.create(r,n.op)}class VI{constructor(){this.rn=new Dy}addToCollectionParentIndex(e,t){return this.rn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ms.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Dy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new En(on.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new En(on.comparator)).toArray()}}const Cy=new Uint8Array(0);class eT{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Dy,this.un=new Ta(r=>fd(r),(r,o)=>_i(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Vi(o)};return X_(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Lc(t),""],!1,!0);return X_(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ea(l.parent))}return r})}addFieldIndex(e,t){const r=rg(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=bd(e);return u.next(m=>{l.put(OI(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=rg(e),o=bd(e),u=Cd(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Cd(e);let o=!0;const u=new Map;return re.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Gt();const m=[];return re.forEach(u,(I,b)=>{var A;Ne("IndexedDbIndexManager",`Using index ${A=I,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Dt=>`${Dt.fieldPath}:${Dt.kind}`).join(",")}`} to execute ${fd(t)}`);const R=function(Dt,Ft){const Wt=h_(Ft);if(void 0===Wt)return null;for(const ln of ny(Dt,Wt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(b,I),H=function(Dt,Ft){const Wt=new Map;for(const ln of Tu(Ft))for(const vs of ny(Dt,ln.fieldPath))switch(vs.op){case"==":case"in":Wt.set(ln.fieldPath.canonicalString(),vs.value);break;case"not-in":case"!=":return Wt.set(ln.fieldPath.canonicalString(),vs.value),Array.from(Wt.values())}return null}(b,I),X=function(Dt,Ft){const Wt=[];let ln=!0;for(const vs of Tu(Ft)){const nm=0===vs.kind?kb(Dt,vs.fieldPath,Dt.startAt):ry(Dt,vs.fieldPath,Dt.startAt);Wt.push(nm.value),ln&&(ln=nm.inclusive)}return new xu(Wt,ln)}(b,I),ye=function(Dt,Ft){const Wt=[];let ln=!0;for(const vs of Tu(Ft)){const nm=0===vs.kind?ry(Dt,vs.fieldPath,Dt.endAt):kb(Dt,vs.fieldPath,Dt.endAt);Wt.push(nm.value),ln&&(ln=nm.inclusive)}return new xu(Wt,ln)}(b,I),ke=this.hn(I,b,X),Ue=this.hn(I,b,ye),vt=this.ln(I,b,H),Ot=this.fn(I.indexId,R,ke,X.inclusive,Ue,ye.inclusive,vt);return re.forEach(Ot,Dt=>r.H(Dt,t.limit).next(Ft=>{Ft.forEach(Wt=>{const ln=Qe.fromSegments(Wt.documentKey);l.has(ln)||(l=l.add(ln),m.push(ln))})}))}).next(()=>m)}return re.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wy(yn.create(e.filters,"and")).map(r=>M_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const I=(null!=t?t.length:1)*Math.max(r.length,u.length),b=I/(null!=t?t.length:1),A=[];for(let R=0;R<I;++R){const H=t?this.dn(t[R/b]):Cy,X=this.wn(e,H,r[R%b],o),ye=this._n(e,H,u[R%b],l),ke=m.map(Ue=>this.wn(e,H,Ue,!0));A.push(...this.createRange(X,ye,ke))}return A}wn(e,t,r,o){const u=new Wc(e,Qe.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new Wc(e,Qe.empty(),t,r);return o?u.Je():u}an(e,t){const r=new Xb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return re.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let I=new En(On.comparator),b=!1;for(const A of m.filters)for(const R of A.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?b=!0:I=I.add(R.field));for(const A of m.orderBy)A.field.isKeyField()||(I=I.add(A.field));return I.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new eg;for(const o of Tu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);Dd.Ve._e(u,l)}return r.Qe()}dn(e){const t=new eg;return Dd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new eg;return Dd.Ve._e(Nt(this.databaseId,t),r.He(function(o){const u=Tu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new eg);let u=0;for(const l of Tu(e)){const m=r[u++];for(const I of o)if(this.yn(t,l.fieldPath)&&Yh(m))o=this.pn(o,l,m);else{const b=I.He(l.kind);Dd.Ve._e(m,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const I=new eg;I.seed(m.Qe()),Dd.Ve._e(l,I.He(t.kind)),u.push(I)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=rg(e),o=bd(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(I=>{l.push(function(b,A){const R=A?new sd(A.sequenceNumber,new Ms(Ed(A.readTime),new Qe(Ea(A.documentKey)),A.largestBatchId)):sd.empty(),H=b.fields.map(([X,ye])=>new Gm(On.fromServerFormat(X),ye));return new Hm(b.indexId,b.collectionGroup,H,R)}(m,I))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=rg(e),u=bd(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,I=>u.put(OI(I.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,I=>this.En(e,o,I).next(b=>{const A=this.An(u,I);return b.isEqual(A)?re.resolve():this.vn(e,u,I,b,A)}))))})}Rn(e,t,r,o){return Cd(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return Cd(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=Cd(e);let u=new En(Na);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Wc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new En(Na);const o=this.mn(t,e);if(null==o)return r;const u=h_(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Yh(l))for(const m of l.arrayValue.values||[])r=r.add(new Wc(t.indexId,e.key,this.dn(m),o))}else r=r.add(new Wc(t.indexId,e.key,Cy,o));return r}vn(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,I,b,A,R){const H=m.getIterator(),X=I.getIterator();let ye=ud(H),ke=ud(X);for(;ye||ke;){let Ue=!1,vt=!1;if(ye&&ke){const Ot=b(ye,ke);Ot<0?vt=!0:Ot>0&&(Ue=!0)}else null!=ye?vt=!0:Ue=!0;Ue?(A(ke),ke=ud(X)):vt?(R(ye),ye=ud(H)):(ye=ud(H),ke=ud(X))}}(o,u,Na,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),re.waitFor(l)}Tn(e){let t=1;return bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Na(l,m)).filter((l,m,I)=>!m||0!==Na(l,I[m-1]));const o=[];o.push(e);for(const l of r){const m=Na(l,e),I=Na(l,t);if(0===m)o[0]=e.Je();else if(m>0&&I<0)o.push(l),o.push(l.Je());else if(I>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Cy,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Cy,[]]))}return u}bn(e,t){return Na(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(e0)}getMinOffset(e,t){return re.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||it())).next(e0)}}function X_(n){return zr(n,"collectionParents")}function Cd(n){return zr(n,"indexEntries")}function rg(n){return zr(n,"indexConfiguration")}function bd(n){return zr(n,"indexState")}function e0(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;f_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ms(e.readTime,e.documentKey,t)}const UI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ii{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function t0(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const I=r.X({range:l},(A,R,H)=>(m++,H.delete()));u.push(I.next(()=>{dt(1===m)}));const b=[];for(const A of t.mutations){const R=zE(e,A.key.path,t.batchId);u.push(o.delete(R)),b.push(A.key)}return re.waitFor(u).next(()=>b)}function ig(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(41943040,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class sg{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new sg(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zc(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=hf(e),l=Zc(e);return l.add({}).next(m=>{dt("number"==typeof m);const I=new cy(m,t,r,o),b=function(H,X,ye){const ke=ye.baseMutations.map(vt=>_d(H.fe,vt)),Ue=ye.mutations.map(vt=>_d(H.fe,vt));return{userId:X,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:ke,mutations:Ue}}(this.serializer,this.userId,I),A=[];let R=new En((H,X)=>kt(H.canonicalString(),X.canonicalString()));for(const H of o){const X=zE(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),A.push(l.put(b)),A.push(u.put(X,__))}return R.forEach(H=>{A.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=I.keys()}),re.waitFor(A).next(()=>I)})}lookupMutationBatch(e,t){return Zc(e).get(t).next(r=>r?(dt(r.userId===this.userId),Id(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?re.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Zc(e).X({index:"userMutationsIndex",range:o},(l,m,I)=>{m.userId===this.userId&&(dt(m.batchId>=r),u=Id(this.serializer,m)),I.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zc(e).j("userMutationsIndex",t).next(r=>r.map(o=>Id(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=v_(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return hf(e).X({range:o},(l,m,I)=>{const[b,A,R]=l,H=Ea(A);if(b===this.userId&&t.path.isEqual(H))return Zc(e).get(R).next(X=>{if(!X)throw it();dt(X.userId===this.userId),u.push(Id(this.serializer,X))});I.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);const o=[];return t.forEach(u=>{const l=v_(this.userId,u.path),m=IDBKeyRange.lowerBound(l),I=hf(e).X({range:m},(b,A,R)=>{const[H,X,ye]=b,ke=Ea(X);H===this.userId&&u.path.isEqual(ke)?r=r.add(ye):R.done()});o.push(I)}),re.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=v_(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new En(kt);return hf(e).X({range:l},(I,b,A)=>{const[R,H,X]=I,ye=Ea(H);R===this.userId&&r.isPrefixOf(ye)?ye.length===o&&(m=m.add(X)):A.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Zc(e).get(u).next(l=>{if(null===l)throw it();dt(l.userId===this.userId),r.push(Id(this.serializer,l))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return t0(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return hf(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const I=Ea(u[1]);o.push(I)}else m.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return BI(e,this.userId,t)}xn(e){return by(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function BI(n,e,t){const r=v_(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return hf(n).X({range:u,Y:!0},(m,I,b)=>{const[A,R,H]=m;A===e&&R===o&&(l=!0),b.done()}).next(()=>l)}function Zc(n){return zr(n,"mutations")}function hf(n){return zr(n,"documentMutations")}function by(n){return zr(n,"mutationQueues")}class Fu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Fu(0)}static Mn(){return new Fu(-1)}}class jI{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Fu(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ht.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Td(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Td(e).X((l,m)=>{const I=Qp(m);I.sequenceNumber<=t&&null===r.get(I.targetId)&&(o++,u.push(this.removeTargetData(e,I)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Td(e).X((r,o)=>{const u=Qp(o);t(u)})}$n(e){return n0(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}On(e,t){return n0(e).put("targetGlobalKey",t)}Fn(e,t){return Td(e).put(yy(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=fd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Td(e).X({range:o,index:"queryTargetsIndex"},(l,m,I)=>{const b=Qp(m);_i(t,b.target)&&(u=b,I.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Lu(e);return t.forEach(l=>{const m=Vi(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=Lu(e);return re.forEach(t,u=>{const l=Vi(u.path);return re.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Lu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Lu(e);let u=Gt();return o.X({range:r,Y:!0},(l,m,I)=>{const b=Ea(l[1]),A=new Qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Vi(t.path),o=IDBKeyRange.bound([r],[Lc(r)],!1,!0);let u=0;return Lu(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],I,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return Td(e).get(t).next(r=>r?Qp(r):null)}}function Td(n){return zr(n,"targets")}function n0(n){return zr(n,"targetGlobal")}function Lu(n){return zr(n,"targetDocuments")}function r0([n,e],[t,r]){const o=kt(n,t);return 0===o?kt(e,r):o}class $I{constructor(e){this.Ln=e,this.buffer=new En(r0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();r0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class s0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Js(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Fo(r)}yield t.Qn(3e5)}))}}class HI{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Ki.ct);const r=new $I(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(UI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UI):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,I,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,I=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),OE()<=Ri.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(I-m)+`ms\n\tRemoved ${R} documents in `+(b-I)+`ms\nTotal Duration: ${b-A}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class Kc{constructor(e,t){this.db=e,this.garbageCollector=function og(n,e){return new HI(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return Ty(e,r)}removeReference(e,t,r){return Ty(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ty(e,t)}Xn(e,t){return function(r,o){let u=!1;return by(r).Z(l=>BI(r,l,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const I=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ht.min()),Lu(e).delete([0,Vi(l.path)])))});o.push(I)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ty(e,t)}Yn(e,t){const r=Lu(e);let o,u=Ki.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:I,sequenceNumber:b})=>{0===l?(u!==Ki.ct&&t(new Qe(Ea(o)),u),u=b,o=I):u=Ki.ct}).next(()=>{u!==Ki.ct&&t(new Qe(Ea(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ty(n,e){return Lu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:r}));var r}class GI{constructor(){this.changes=new Ta(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o0{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vu(e).put(r)}removeEntry(e,t,r){return Vu(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],qc(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return Vu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sy(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return Vu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sy(t))},(o,u)=>{r={document:this.ts(t,u),size:ig(u)}}).next(()=>r)}getEntries(e,t){let r=wi();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=wi(),o=new Pn(Qe.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,ig(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return re.resolve();let o=new En(qI);t.forEach(I=>o=o.add(I));const u=IDBKeyRange.bound(Sy(o.first()),Sy(o.last())),l=o.getIterator();let m=l.getNext();return Vu(e).X({index:"documentKeyIndex",range:u},(I,b,A)=>{const R=Qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&qI(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.G(Sy(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),qc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vu(e).j(IDBKeyRange.bound(l,m,!0)).next(I=>{let b=wi();for(const A of I){const R=this.ts(Qe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);R.isFoundDocument()&&(pd(t,R)||o.has(R.key))&&(b=b.insert(R.key,R))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=wi();const l=tT(t,r),m=tT(t,Ms.max());return Vu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(I,b,A)=>{const R=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new a0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zI(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}Zn(e,t){return zI(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function NI(n,e){let t;if(e.document)t=q_(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=Ed(e.noDocument.readTime);t=jn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Qe.fromSegments(e.unknownDocument.path),o=Ed(e.unknownDocument.version);t=jn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Bn(r[0],r[1]);return ht.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return jn.newInvalidDocument(e)}}function Yc(n){return new o0(n)}class a0 extends GI{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ta(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new En((u,l)=>kt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const I=RI(this.os.serializer,l);o=o.add(u.path.popLast());const b=ig(I);r+=b-m.size,t.push(this.os.addEntry(e,u,I))}else if(r-=m.size,this.trackRemovals){const I=RI(this.os.serializer,l.convertToNoDocument(ht.min()));t.push(this.os.addEntry(e,u,I))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function zI(n){return zr(n,"remoteDocumentGlobal")}function Vu(n){return zr(n,"remoteDocumentsV14")}function Sy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tT(n,e){const t=e.documentKey.path.toArray();return[n,qc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qI(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=kt(t[u],r[u]),o)return o;return o=kt(t.length,r.length),o||(o=kt(t[t.length-2],r[r.length-2]),o||kt(t[t.length-1],r[r.length-1]))}class nT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u0{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Pu(r.mutation,o,Yi.empty(),Bn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const o=Uo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=uy();return u.forEach((m,I)=>{l=l.insert(m,I.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Uo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=wi();const l=Jh(),m=Jh();return t.forEach((I,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof ku)?u=u.insert(b.key,b):void 0!==A?(l.set(b.key,A.mutation.getFieldMask()),Pu(A.mutation,b,A.mutation.getFieldMask(),Bn.now())):l.set(b.key,Yi.empty())}),this.recalculateAndSaveOverlays(e,u).next(I=>(I.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var R;return m.set(b,new nT(A,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Jh();let o=new Pn((l,m)=>l-m),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(I=>{const b=t.get(I);if(null===b)return;let A=r.get(I)||Yi.empty();A=m.applyToLocalView(b,A),r.set(I,A);const R=(o.get(m.batchId)||Gt()).add(I);o=o.insert(m.batchId,R)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const I=m.getNext(),b=I.key,A=I.value,R=P_();A.forEach(H=>{if(!u.has(H)){const X=vI(t.get(H),r.get(H));null!==X&&R.set(H,X),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):x_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(Uo());let m=-1,I=u;return l.next(b=>re.forEach(b,(A,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(A)?re.resolve():this.remoteDocumentCache.getEntry(e,A).next(H=>{I=I.insert(A,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,I,b,Gt())).next(A=>({batchId:m,changes:O_(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let o=uy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=uy();return this.indexManager.getCollectionParents(e,o).next(l=>re.forEach(l,m=>{const I=(b=t,A=m.child(o),new ba(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,I,r).next(b=>{b.forEach((A,R)=>{u=u.insert(A,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,I)=>{const b=I.getKey();null===u.get(b)&&(u=u.insert(b,jn.newInvalidDocument(b)))});let l=uy();return u.forEach((m,I)=>{const b=o.get(m);void 0!==b&&Pu(b.mutation,I,Yi.empty(),Bn.now()),pd(t,I)&&(l=l.insert(m,I))}),l})}}class rT{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return re.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:$n(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:cf(r.bundledQuery),readTime:$n(r.readTime)}),re.resolve();var r}}class Zr{constructor(){this.overlays=new Pn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Uo();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=Uo(),u=t.length+1,l=new Qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const I=m.getNext().value,b=I.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&I.largestBatchId>r&&o.set(I.getKey(),I)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Pn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Uo(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=Uo(),I=u.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=o)););return re.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new V_(t,r));let u=this.ls.get(t);void 0===u&&(u=Gt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class Ay{constructor(){this.fs=new En(ri.ds),this.ws=new En(ri._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ri(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ri(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new on([])),r=new ri(t,e),o=new ri(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new on([])),r=new ri(t,e),o=new ri(t,e+1);let u=Gt();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ri(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ri{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||kt(e.As,t.As)}static _s(e,t){return kt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class iT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new En(ri.ds)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new cy(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new ri(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ri(t,0),o=new ri(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);return t.forEach(o=>{const u=new ri(o,0),l=new ri(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),re.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const l=new ri(new Qe(u),0);let m=new En(kt);return this.Rs.forEachWhile(I=>{const b=I.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(I.As)),!0)},l),re.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return re.forEach(t.mutations,o=>{const u=new ri(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ri(t,0),o=this.Rs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WI{constructor(e){this.Ds=e,this.docs=new Pn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():jn.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=wi();const l=t.path,m=new Qe(l.child("")),I=this.docs.getIteratorFrom(m);for(;I.hasNext();){const{key:b,value:{document:A}}=I.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||f_(gb(A),r)<=0||(o.has(A.key)||pd(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,o){it()}Cs(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sT(this)}getSize(e){return re.resolve(this.size)}}class sT extends GI{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ZI{constructor(e){this.persistence=e,this.xs=new Ta(t=>fd(t),_i),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Ay,this.targetCount=0,this.Ms=Fu.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),re.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Fu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Fn(t),re.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.ks.containsKey(t))}}class My{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ki(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ZI(this),this.indexManager=new VI,this.remoteDocumentCache=new WI(r=>this.referenceDelegate.Ls(r)),this.serializer=new uf(t),this.qs=new rT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zr,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new iT(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new ff(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return re.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class ff extends yb{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Qs=new Ay,this.js=null}static zs(e){return new xy(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),re.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ws,r=>{const o=Qe.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,ht.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return re.or([()=>re.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class KI{constructor(e){this.serializer=e}O(e,t,r,o){const u=new Gh("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GE,{unique:!0}),m.createObjectStore("documentMutations"),YI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),YI(e)),l=l.next(()=>function(m){const I=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return I.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,I){return I.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GE,{unique:!0});const A=I.store("mutations"),R=b.map(H=>A.put(H));return re.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const I=m.createObjectStore("documentOverlays",{keyPath:Zm});I.createIndex("collectionPathOverlayIndex",Ib,{unique:!1}),I.createIndex("collectionGroupOverlayIndex",qh,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const I=m.createObjectStore("remoteDocumentsV14",{keyPath:w_});I.createIndex("documentKeyIndex",vb),I.createIndex("collectionGroupIndex",qE)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:wb}).createIndex("sequenceNumberIndex",ZE,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:qA}).createIndex("documentKeyIndex",Eb,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=ig(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>re.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>re.forEach(m,I=>{dt(I.userId===u.userId);const b=Id(this.serializer,I);return t0(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const I=new on(l),b=[0,Vi(I)];u.push(t.get(b).next(A=>A?re.resolve():t.put({targetId:0,path:Vi(I),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:WE});const r=t.store("collectionParents"),o=new Dy,u=l=>{if(o.add(l)){const m=l.lastSegment(),I=l.popLast();return r.put({collectionId:m,parent:Vi(I)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const I=new on(l);return u(I.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,I],b)=>{const A=Ea(m);return u(A.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=Qp(o),l=yy(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),I=(b=l,b.document?new Qe(on.fromString(b.document.name).popFirst(5)):b.noDocument?Qe.fromSegments(b.noDocument.path):b.unknownDocument?Qe.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const A={prefixPath:I.slice(0,I.length-2),collectionGroup:I[I.length-2],documentId:I[I.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>re.waitFor(o))}si(e,t){const r=t.store("mutations"),o=Yc(this.serializer),u=new My(xy.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(I=>{var b;let A=null!==(b=m.get(I.userId))&&void 0!==b?b:Gt();Id(this.serializer,I).keys().forEach(R=>A=A.add(R)),m.set(I.userId,A)}),re.forEach(m,(I,b)=>{const A=new ni(b),R=Jp.de(this.serializer,A),H=u.getIndexManager(A),X=sg.de(A,this.serializer,H,u.referenceDelegate);return new u0(o,X,R,H).recalculateAndSaveOverlaysForDocumentKeys(new D_(t,Ki.ct),I).next()})})}}function YI(n){n.createObjectStore("targetDocuments",{keyPath:Wm}).createIndex("documentTargetsIndex",_b,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",E_,{unique:!0}),n.createObjectStore("targetGlobal")}const Ry="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QI{constructor(e,t,r,o,u,l,m,I,b,A,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=A,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!QI.D())throw new De(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kc(this,o),this.di=t+"main",this.serializer=new uf(I),this.wi=new Zi(this.di,this.ui,new KI(this.serializer)),this.Bs=new jI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Yc(this.serializer),this.qs=new Yb,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===A&&Mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(oe.FAILED_PRECONDITION,Ry);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ki(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,le.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Js(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return pf(e).get("owner").next(t=>re.resolve(this.Ri(t)))}Pi(e){return gf(e).delete(this.clientId)}bi(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=zr(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(I=>-1===l.indexOf(I));return re.forEach(m,I=>o.delete(I.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?re.resolve(!0):pf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new De(oe.FAILED_PRECONDITION,Ry);return!1}}return!(!this.networkEnabled||!this.inForeground)||gf(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new D_(t,Ki.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>gf(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return sg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eT(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Jp.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?Cb:14===l?KE:13===l?I_:12===l?Db:11===l?Wh:void it();var l;let m;return this.wi.runTransaction(e,o,u,I=>(m=new D_(I,this.Os?this.Os.next():Ki.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new De(oe.FAILED_PRECONDITION,mb);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(I=>(m.raiseOnCommittedEvent(),I))}Oi(e){return pf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(oe.FAILED_PRECONDITION,Ry)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pf(e).put("owner",t)}static D(){return Zi.D()}Ai(e){const t=pf(e);return t.get("owner").next(r=>this.Ri(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mt(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Yt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pf(n){return zr(n,"owner")}function gf(n){return zr(n,"clientMetadata")}function no(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class c0{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=Gt(),o=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new c0(e,t.fromCache,r,o)}}class JI{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(uI(t))return re.resolve(null);let r=Qi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=oy(t,null,"F"),r=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Gt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(I=>{const b=this.ji(t,m);return this.zi(t,b,l,I.readTime)?this.Ki(e,oy(t,null,"F")):this.Wi(e,b,t,I)}))})))}Gi(e,t,r,o){return uI(t)||o.isEqual(ht.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(OE()<=Ri.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(t)),this.Wi(e,l,t,pb(o,-1)))})}ji(e,t){let r=new En(R_(e));return t.forEach((o,u)=>{pd(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return OE()<=Ri.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",eo(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ms.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class Ra{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Pn(kt),this.Yi=new Ta(u=>fd(u),_i),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ro(n,e,t,r){return new Ra(n,e,t,r)}function io(n,e){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,le.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let I=Gt();for(const b of o){l.push(b.batchId);for(const A of b.mutations)I=I.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)I=I.add(A.key)}return t.localDocuments.getDocuments(r,I).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),Oy.apply(this,arguments)}function eD(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function tD(n,e,t){let r=Gt(),o=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=wi();return t.forEach((m,I)=>{const b=u.get(m);I.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),I.isNoDocument()&&I.version.isEqual(ht.min())?(e.removeEntry(m,I.readTime),l=l.insert(m,I)):!b.isValidDocument()||I.version.compareTo(b.version)>0||0===I.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(I),l=l.insert(m,I)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",I.version)}),{nr:l,sr:o}})}function aT(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qc(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new xa(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Oa(n,e,t){return l0.apply(this,arguments)}function l0(){return l0=(0,le.Z)(function*(n,e,t){const r=Je(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Js(l))throw l;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),l0.apply(this,arguments)}function ag(n,e,t){const r=Je(n);let o=ht.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,I,b){const A=Je(m),R=A.Yi.get(b);return void 0!==R?re.resolve(A.Ji.get(R)):A.Bs.getTargetData(I,b)}(r,l,Qi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(I=>{u=I})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:ht.min(),t?u:Gt())).next(m=>(d0(r,lI(e),m),{documents:m,ir:u})))}function nD(n,e){const t=Je(n),r=Je(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function rD(n,e){const t=Je(n),r=t.Xi.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,pb(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(d0(t,e,o),o))}function d0(n,e,t){let r=n.Xi.get(e)||ht.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function mf(){return mf=(0,le.Z)(function*(n,e,t,r){const o=Je(n);let u=Gt(),l=wi();for(const b of t){const A=e.rr(b.metadata.name);b.document&&(u=u.add(A));const R=e.ur(b);R.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(A,R)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),I=yield Qc(o,(b=r,Qi(Qh(on.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>tD(b,m,l).next(A=>(m.apply(b),A)).next(A=>o.Bs.removeMatchingKeysForTargetId(b,I.targetId).next(()=>o.Bs.addMatchingKeys(b,u,I.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.nr,A.sr)).next(()=>A.nr)))}),mf.apply(this,arguments)}function uT(n,e){return Py.apply(this,arguments)}function Py(){return Py=(0,le.Z)(function*(n,e,t=Gt()){const r=yield Qc(n,Qi(cf(e.bundledQuery))),o=Je(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=$n(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Wr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Py.apply(this,arguments)}function h0(n,e){return`firestore_clients_${n}_${e}`}function f0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function p0(n,e){return`firestore_targets_${n}_${e}`}class ky{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new De(o.error.code,o.error.message))),l?new ky(e,t,o.state,u):(Mt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new De(r.error.code,r.error.message))),u?new Sd(e,r.state,o):(Mt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ad{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=jp();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=$E(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Ad(e,u):(Mt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Fy{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Fy(t.clientId,t.onlineState):(Mt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ly{constructor(){this.activeTargetIds=jp()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vy{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(kt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=h0(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Ly),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(h0(e.persistenceKey,o));if(u){const l=Ad.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(p0(this.persistenceKey,e));if(r){const o=Sd.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(p0(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=Ki.ct;if(null!=u)try{const m=JSON.parse(u);dt("number"==typeof m),l=m}catch(m){Mt("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Ki.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new ky(this.currentUser,e,t,r),u=f0(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=f0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=p0(this.persistenceKey,e),u=new Sd(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Ad.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return ky.ar(new ni(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return Sd.ar(o,t)}br(e){return Fy.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(I=>{o.has(I)||l.push(I)}),o.forEach(I=>{u.has(I)||m.push(I)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=jp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class g0{constructor(){this.Hr=new Ly,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Ly,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sD{Yr(e){}shutdown(){}}class m0{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ug=null;function Uy(){return null===ug?ug=268435456+Math.round(2147483648*Math.random()):ug++,"0x"+ug.toString(16)}const cT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ui="WebChannelConnection";class dT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=Uy(),m=this.To(e,t);Ne("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const I={};return this.Eo(I,o,u),this.Ao(e,m,I,r).then(b=>(Ne("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Li("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${cT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=Uy();return new Promise((l,m)=>{const I=new c_;I.setWithCredentials(!0),I.listenOnce(u_.COMPLETE,()=>{try{switch(I.getLastErrorCode()){case a_.NO_ERROR:const A=I.getResponseJson();Ne(Ui,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),l(A);break;case a_.TIMEOUT:Ne(Ui,`RPC '${e}' ${u} timed out`),m(new De(oe.DEADLINE_EXCEEDED,"Request time out"));break;case a_.HTTP_ERROR:const R=I.getStatus();if(Ne(Ui,`RPC '${e}' ${u} failed with status:`,R,"response text:",I.getResponseText()),R>0){let H=I.getResponseJson();Array.isArray(H)&&(H=H[0]);const X=H?.error;if(X&&X.status&&X.message){const ye=function(ke){const Ue=ke.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Ue)>=0?Ue:oe.UNKNOWN}(X.status);m(new De(ye,X.message))}else m(new De(oe.UNKNOWN,"Server responded with status "+I.getStatus()))}else m(new De(oe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ne(Ui,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Ne(Ui,`RPC '${e}' ${u} sending request:`,o),I.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=Uy(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ME(),m=Um(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(I.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(I.xmlHttpFactory=new xE({})),this.Eo(I.initMessageHeaders,t,r),I.encodeInitMessageHeaders=!0;const A=u.join("");Ne(Ui,`Creating RPC '${e}' stream ${o}: ${A}`,I);const R=l.createWebChannel(A,I);let H=!1,X=!1;const ye=new lT({ro:Ue=>{X?Ne(Ui,`Not sending because RPC '${e}' stream ${o} is closed:`,Ue):(H||(Ne(Ui,`Opening RPC '${e}' stream ${o} transport.`),R.open(),H=!0),Ne(Ui,`RPC '${e}' stream ${o} sending:`,Ue),R.send(Ue))},oo:()=>R.close()}),ke=(Ue,vt,Ot)=>{Ue.listen(vt,Dt=>{try{Ot(Dt)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return ke(R,Bm.EventType.OPEN,()=>{X||Ne(Ui,`RPC '${e}' stream ${o} transport opened.`)}),ke(R,Bm.EventType.CLOSE,()=>{X||(X=!0,Ne(Ui,`RPC '${e}' stream ${o} transport closed`),ye.wo())}),ke(R,Bm.EventType.ERROR,Ue=>{X||(X=!0,Li(Ui,`RPC '${e}' stream ${o} transport errored:`,Ue),ye.wo(new De(oe.UNAVAILABLE,"The operation could not be completed")))}),ke(R,Bm.EventType.MESSAGE,Ue=>{var vt;if(!X){const Ot=Ue.data[0];dt(!!Ot);const Ft=Ot.error||(null===(vt=Ot[0])||void 0===vt?void 0:vt.error);if(Ft){Ne(Ui,`RPC '${e}' stream ${o} received error:`,Ft);const Wt=Ft.status;let ln=function(nm){const uR=Vr[nm];if(void 0!==uR)return DI(uR)}(Wt),vs=Ft.message;void 0===ln&&(ln=oe.INTERNAL,vs="Unknown error status: "+Wt+" with message "+Ft.message),X=!0,ye.wo(new De(ln,vs)),R.close()}else Ne(Ui,`RPC '${e}' stream ${o} received:`,Ot),ye._o(Ot)}}),ke(m,lb.STAT_EVENT,Ue=>{Ue.stat===Ar.PROXY?Ne(Ui,`RPC '${e}' stream ${o} detected buffering proxy`):Ue.stat===Ar.NOPROXY&&Ne(Ui,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{ye.fo()},0),ye}}function oD(){return typeof window<"u"?window:null}function By(){return typeof document<"u"?document:null}function cg(n){return new nf(n,!0)}class y0{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class aD{constructor(e,t,r,o,u,l,m,I){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=I,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new y0(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,le.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,le.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Mt(t.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new De(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,le.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hT extends aD{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function AI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:it(),o=e.targetChange.targetIds||[],u=function(I,b){return I.useProto3Json?(dt(void 0===b||"string"==typeof b),Wr.fromBase64String(b||"")):(dt(void 0===b||b instanceof Uint8Array),Wr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(I){const b=void 0===I.code?oe.UNKNOWN:DI(I.code);return new De(b,I.message||"")}(l);t=new TI(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=$o(n,r.document.name),u=$n(r.document.updateTime),l=r.document.createTime?$n(r.document.createTime):ht.min(),m=new vi({mapValue:{fields:r.document.fields}}),I=jn.newFoundDocument(o,u,l,m);t=new fy(r.targetIds||[],r.removedTargetIds||[],I.key,I)}else if("documentDelete"in e){const r=e.documentDelete,o=$o(n,r.document),u=r.readTime?$n(r.readTime):ht.min(),l=jn.newNoDocument(o,u);t=new fy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=$o(n,r.document);t=new fy([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new Gb(o,u);t=new py(r.targetId,l)}}var I;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ht.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ht.min():u.readTime?$n(u.readTime):ht.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=sf(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=ty(m)?{documents:qb(o,m)}:{query:Z_(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=yd(o,u.resumeToken);const I=$c(o,u.expectedCount);null!==I&&(l.expectedCount=I)}else if(u.snapshotVersion.compareTo(ht.min())>0){l.readTime=jo(o,u.snapshotVersion.toTimestamp());const I=$c(o,u.expectedCount);null!==I&&(l.expectedCount=I)}return l}(this.serializer,e);const r=function KA(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=sf(this.serializer),t.removeTarget=e,this.Wo(t)}}class fT extends aD{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ZA(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let u=$n(r.updateTime?r.updateTime:o);return u.isEqual(ht.min())&&(u=$n(o)),new Gp(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.cu(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_d(this.serializer,r))};this.Wo(t)}}class pT extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new De(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(oe.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new De(oe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class mT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Mt(t),this.mu=!1):Ne("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yT{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,le.Z)(function*(){var I;Uu(l)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,le.Z)(function*(b){const A=Je(b);A.vu.add(4),yield Md(A),A.bu.set("Unknown"),A.vu.delete(4),yield lg(A)}),function(b){return I.apply(this,arguments)})(l))}))}),this.bu=new mT(r,o)}}function lg(n){return _0.apply(this,arguments)}function _0(){return _0=(0,le.Z)(function*(n){if(Uu(n))for(const e of n.Ru)yield e(!0)}),_0.apply(this,arguments)}function Md(n){return jy.apply(this,arguments)}function jy(){return jy=(0,le.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),jy.apply(this,arguments)}function dg(n,e){const t=Je(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Gy(t)?Hy(t):Nd(t).Ko()&&$y(t,e))}function yf(n,e){const t=Je(n),r=Nd(t);t.Au.delete(e),r.Ko()&&w0(t,e),0===t.Au.size&&(r.Ko()?r.jo():Uu(t)&&t.bu.set("Unknown"))}function $y(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nd(n).su(e)}function w0(n,e){n.Vu.qt(e),Nd(n).iu(e)}function Hy(n){n.Vu=new Kp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Nd(n).start(),n.bu.gu()}function Gy(n){return Uu(n)&&!Nd(n).Uo()&&n.Au.size>0}function Uu(n){return 0===Je(n).vu.size}function E0(n){n.Vu=void 0}function uD(n){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,le.Z)(function*(n){n.Au.forEach((e,t)=>{$y(n,e)})}),Bu.apply(this,arguments)}function vT(n,e){return I0.apply(this,arguments)}function I0(){return I0=(0,le.Z)(function*(n,e){E0(n),Gy(n)?(n.bu.Iu(e),Hy(n)):n.bu.set("Unknown")}),I0.apply(this,arguments)}function vf(n,e,t){return cD.apply(this,arguments)}function cD(){return cD=(0,le.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof TI&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _f(n,r)}else if(e instanceof fy?n.Vu.Ht(e):e instanceof py?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ht.min()))try{const r=yield eD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,I)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Au.get(I);b&&o.Au.set(I,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,I)=>{const b=o.Au.get(m);if(!b)return;o.Au.set(m,b.withResumeToken(Wr.EMPTY_BYTE_STRING,b.snapshotVersion)),w0(o,m);const A=new xa(b.target,m,I,b.sequenceNumber);$y(o,A)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield _f(n,r)}var r}),cD.apply(this,arguments)}function _f(n,e,t){return lD.apply(this,arguments)}function lD(){return lD=(0,le.Z)(function*(n,e,t){if(!Js(e))throw e;n.vu.add(1),yield Md(n),n.bu.set("Offline"),t||(t=()=>eD(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield lg(n)}))}),lD.apply(this,arguments)}function D0(n,e){return e().catch(t=>_f(n,t,e))}function xd(n){return dD.apply(this,arguments)}function dD(){return dD=(0,le.Z)(function*(n){const e=Je(n),t=Jc(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;bt(e);)try{const o=yield aT(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,_T(e,o)}catch(o){yield _f(e,o)}hD(e)&&fD(e)}),dD.apply(this,arguments)}function bt(n){return Uu(n)&&n.Eu.length<10}function _T(n,e){n.Eu.push(e);const t=Jc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function hD(n){return Uu(n)&&!Jc(n).Uo()&&n.Eu.length>0}function fD(n){Jc(n).start()}function wf(n){return C0.apply(this,arguments)}function C0(){return C0=(0,le.Z)(function*(n){Jc(n).hu()}),C0.apply(this,arguments)}function zy(n){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,le.Z)(function*(n){const e=Jc(n);for(const t of n.Eu)e.uu(t.mutations)}),Ef.apply(this,arguments)}function vr(n,e,t){return pD.apply(this,arguments)}function pD(){return pD=(0,le.Z)(function*(n,e,t){const r=n.Eu.shift(),o=Wp.from(r,e,t);yield D0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield xd(n)}),pD.apply(this,arguments)}function gD(n,e){return qy.apply(this,arguments)}function qy(){return qy=(0,le.Z)(function*(n,e){var t;e&&Jc(n).ou&&(yield(t=(0,le.Z)(function*(r,o){if(II(u=o.code)&&u!==oe.ABORTED){const l=r.Eu.shift();Jc(r).Qo(),yield D0(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield xd(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),hD(n)&&fD(n)}),qy.apply(this,arguments)}function mD(n,e){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,le.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Uu(t);t.vu.add(3),yield Md(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield lg(t)}),Wy.apply(this,arguments)}function Zy(n,e){return Ky.apply(this,arguments)}function Ky(){return Ky=(0,le.Z)(function*(n,e){const t=Je(n);e?(t.vu.delete(2),yield lg(t)):e||(t.vu.add(2),yield Md(t),t.bu.set("Unknown"))}),Ky.apply(this,arguments)}function Nd(n){return n.Su||(n.Su=function(e,t,r){const o=Je(e);return o.fu(),new hT(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:uD.bind(null,n),ao:vT.bind(null,n),nu:vf.bind(null,n)}),n.Ru.push(function(){var e=(0,le.Z)(function*(t){t?(n.Su.Qo(),Gy(n)?Hy(n):n.bu.set("Unknown")):(yield n.Su.stop(),E0(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Jc(n){return n.Du||(n.Du=function(e,t,r){const o=Je(e);return o.fu(),new fT(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:wf.bind(null,n),ao:gD.bind(null,n),au:zy.bind(null,n),cu:vr.bind(null,n)}),n.Ru.push(function(){var e=(0,le.Z)(function*(t){t?(n.Du.Qo(),yield xd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class b0{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new b0(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(n,e){if(Mt("AsyncQueue",`${e}: ${n}`),Js(n))return new De(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Pa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=uy(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new Pa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yD{constructor(){this.Cu=new Pn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Df{constructor(e,t,r,o,u,l,m,I,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=I,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Df(e,t,Pa.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class wT{constructor(){this.Nu=void 0,this.listeners=[]}}class Yy{constructor(){this.queries=new Ta(e=>cI(e),Bp),this.onlineState="Unknown",this.ku=new Set}}function Qy(n,e){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,le.Z)(function*(n,e){const t=Je(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new wT),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=If(l,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&S0(t)}),Jy.apply(this,arguments)}function Xy(n,e){return T0.apply(this,arguments)}function T0(){return T0=(0,le.Z)(function*(n,e){const t=Je(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),T0.apply(this,arguments)}function hg(n,e){const t=Je(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&S0(t)}function fg(n,e,t){const r=Je(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function S0(n){n.ku.forEach(e=>{e.next()})}class A0{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Df(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Df.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ET{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class M0{constructor(e){this.serializer=e}rr(e){return $o(this.serializer,e)}ur(e){return e.metadata.exists?q_(this.serializer,e.document,!1):jn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return $n(e)}}class vD{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x0(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=on.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new M0(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Gt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function iD(n,e,t,r){return mf.apply(this,arguments)}(e.localStore,new M0(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield uT(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function x0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _D{constructor(e){this.key=e}}class N0{constructor(e){this.key=e}}class wD{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gt(),this.mutatedKeys=Gt(),this.tc=R_(e),this.ec=new Pa(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new yD,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const I="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,R)=>{const H=o.get(A),X=pd(this.query,R)?R:null,ye=!!H&&this.mutatedKeys.has(H.key),ke=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ue=!1;H&&X?H.data.isEqual(X.data)?ye!==ke&&(r.track({type:3,doc:X}),Ue=!0):this.rc(H,X)||(r.track({type:2,doc:X}),Ue=!0,(I&&this.tc(X,I)>0||b&&this.tc(X,b)<0)&&(m=!0)):!H&&X?(r.track({type:0,doc:X}),Ue=!0):H&&!X&&(r.track({type:1,doc:H}),Ue=!0,(I||b)&&(m=!0)),Ue&&(X?(l=l.add(X),u=ke?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,A)=>function(R,H){const X=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return X(R)-X(H)}(b.type,A.type)||this.tc(b.doc,A.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,I=m!==this.Xu;return this.Xu=m,0!==u.length||I?{snapshot:new Df(this.query,e.ec,o,u,e.mutatedKeys,0===m,I,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new yD,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new N0(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new _D(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Gt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Df.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class IT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QA{constructor(e){this.key=e,this.fc=!1}}class JA{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ta(m=>cI(m),Bp),this._c=new Map,this.mc=new Set,this.gc=new Pn(Qe.comparator),this.yc=new Map,this.Ic=new Ay,this.Tc={},this.Ec=new Map,this.Ac=Fu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function XA(n,e){return ED.apply(this,arguments)}function ED(){return ED=(0,le.Z)(function*(n,e){const t=av(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Qc(t.localStore,Qi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield ev(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&dg(t.remoteStore,l)}return o}),ED.apply(this,arguments)}function ev(n,e,t,r,o){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,le.Z)(function*(n,e,t,r,o){n.Rc=(R,H,X)=>{return(ye=(0,le.Z)(function*(ke,Ue,vt,Ot){let Dt=Ue.view.sc(vt);Dt.zi&&(Dt=yield ag(ke.localStore,Ue.query,!1).then(({documents:ln})=>Ue.view.sc(ln,Dt)));const Ft=Ot&&Ot.targetChanges.get(Ue.targetId),Wt=Ue.view.applyChanges(Dt,ke.isPrimaryClient,Ft);return rv(ke,Ue.targetId,Wt.cc),Wt.snapshot}),function(ke,Ue,vt,Ot){return ye.apply(this,arguments)})(n,R,H,X);var ye};const u=yield ag(n.localStore,e,!0),l=new wD(e,u.ir),m=l.sc(u.documents),I=Zp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,I);rv(n,t,b.cc);const A=new IT(e,t,l);return n.wc.set(e,A),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Cf.apply(this,arguments)}function DT(n,e){return R0.apply(this,arguments)}function R0(){return R0=(0,le.Z)(function*(n,e){const t=Je(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!Bp(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Oa(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),yf(t.remoteStore,r.targetId),Od(t,r.targetId)}).catch(Fo))):(Od(t,r.targetId),yield Oa(t.localStore,r.targetId,!0))}),R0.apply(this,arguments)}function Rd(){return Rd=(0,le.Z)(function*(n,e,t){const r=$0(n);try{const o=yield function(u,l){const m=Je(u),I=Bn.now(),b=l.reduce((H,X)=>H.add(X.key),Gt());let A,R;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let X=wi(),ye=Gt();return m.Zi.getEntries(H,b).next(ke=>{X=ke,X.forEach((Ue,vt)=>{vt.isValidDocument()||(ye=ye.add(Ue))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,X)).next(ke=>{A=ke;const Ue=[];for(const vt of l){const Ot=$b(vt,A.get(vt.key).overlayedDocument);null!=Ot&&Ue.push(new ku(vt.key,Ot,Mb(Ot.value.mapValue),or.exists(!0)))}return m.mutationQueue.addMutationBatch(H,I,Ue,l)}).next(ke=>{R=ke;const Ue=ke.applyToLocalDocumentSet(A,ye);return m.documentOverlayCache.saveOverlays(H,ke.batchId,Ue)})}).then(()=>({batchId:R.batchId,changes:O_(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let I=u.Tc[u.currentUser.toKey()];I||(I=new Pn(kt)),I=I.insert(l,m),u.Tc[u.currentUser.toKey()]=I}(r,o.batchId,t),yield ju(r,o.changes),yield xd(r.remoteStore)}catch(o){const u=If(o,"Failed to persist write");t.reject(u)}}),Rd.apply(this,arguments)}function DD(n,e){return O0.apply(this,arguments)}function O0(){return O0=(0,le.Z)(function*(n,e){const t=Je(n);try{const r=yield function oT(n,e){const t=Je(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((A,R)=>{const H=o.get(R);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,A.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,A.addedDocuments,R)));let X=H.withSequenceNumber(u.currentSequenceNumber);var ye,ke,Ue;null!==e.targetMismatches.get(R)?X=X.withResumeToken(Wr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):A.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(A.resumeToken,r)),o=o.insert(R,X),ke=X,Ue=A,(0===(ye=H).resumeToken.approximateByteSize()||ke.snapshotVersion.toMicroseconds()-ye.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,X))});let I=wi(),b=Gt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(tD(u,l,e.documentUpdates).next(A=>{I=A.nr,b=A.sr})),!r.isEqual(ht.min())){const A=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return re.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,I,b)).next(()=>I)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?dt(l.fc):o.removedDocuments.size>0&&(dt(l.fc),l.fc=!1))}),yield ju(t,r,e)}catch(r){yield Fo(r)}}),O0.apply(this,arguments)}function CD(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Je(u);m.onlineState=l;let I=!1;m.queries.forEach((b,A)=>{for(const R of A.listeners)R.Mu(l)&&(I=!0)}),I&&S0(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CT(n,e,t){return bD.apply(this,arguments)}function bD(){return bD=(0,le.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new Pn(Qe.comparator);l=l.insert(u,jn.newNoDocument(u,ht.min()));const m=Gt().add(u),I=new Bc(ht.min(),new Map,new Pn(kt),l,m);yield DD(r,I),r.gc=r.gc.remove(u),r.yc.delete(e),gg(r)}else yield Oa(r.localStore,e,!1).then(()=>Od(r,e,t)).catch(Fo)}),bD.apply(this,arguments)}function bT(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,le.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const o=yield function XI(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,I,b){const A=I.batch,R=A.keys();let H=re.resolve();return R.forEach(X=>{H=H.next(()=>b.getEntry(m,X)).next(ye=>{const ke=I.docVersions.get(X);dt(null!==ke),ye.version.compareTo(ke)<0&&(A.applyToRemoteDocument(ye,I),ye.isValidDocument()&&(ye.setReadTime(I.commitVersion),b.addEntry(ye)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Gt();for(let I=0;I<l.mutationResults.length;++I)l.mutationResults[I].transformResults.length>0&&(m=m.add(l.batch.mutations[I].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);F0(t,r,null),nv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ju(t,o)}catch(o){yield Fo(o)}}),tv.apply(this,arguments)}function TT(n,e,t){return P0.apply(this,arguments)}function P0(){return P0=(0,le.Z)(function*(n,e,t){const r=Je(n);try{const o=yield function(u,l){const m=Je(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let b;return m.mutationQueue.lookupMutationBatch(I,l).next(A=>(dt(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(I,A))).next(()=>m.mutationQueue.performConsistencyCheck(I)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(I,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,b)).next(()=>m.localDocuments.getDocuments(I,b))})}(r.localStore,e);F0(r,e,t),nv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ju(r,o)}catch(o){yield Fo(o)}}),P0.apply(this,arguments)}function k0(){return k0=(0,le.Z)(function*(n,e){const t=Je(n);Uu(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Je(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=If(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),k0.apply(this,arguments)}function nv(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function F0(n,e,t){const r=Je(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Od(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||TD(n,r)})}function TD(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(yf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),gg(n))}function rv(n,e,t){for(const r of t)r instanceof _D?(n.Ic.addReference(r.key,e),ST(n,r)):r instanceof N0?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||TD(n,r.key)):it()}function ST(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.mc.add(r),gg(n))}function gg(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(on.fromString(e)),r=n.Ac.next();n.yc.set(r,new QA(t)),n.gc=n.gc.insert(t,r),dg(n.remoteStore,new xa(Qi(Qh(t.path)),r,"TargetPurposeLimboResolution",Ki.ct))}}function ju(n,e,t){return iv.apply(this,arguments)}function iv(){return iv=(0,le.Z)(function*(n,e,t){const r=Je(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,I)=>{l.push(r.Rc(I,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(I.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const A=c0.Li(I.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,le.Z)(function*(I,b){const A=Je(I);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>re.forEach(b,H=>re.forEach(H.Fi,X=>A.persistence.referenceDelegate.addReference(R,H.targetId,X)).next(()=>re.forEach(H.Bi,X=>A.persistence.referenceDelegate.removeReference(R,H.targetId,X)))))}catch(R){if(!Js(R))throw R;Ne("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const H=R.targetId;if(!R.fromCache){const X=A.Ji.get(H),ke=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);A.Ji=A.Ji.insert(H,ke)}}}),function(I,b){return m.apply(this,arguments)})(r.localStore,u))}),iv.apply(this,arguments)}function SD(n,e){return L0.apply(this,arguments)}function L0(){return L0=(0,le.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield io(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new De(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ju(t,r.er)}var o}),L0.apply(this,arguments)}function AT(n,e){const t=Je(n),r=t.yc.get(e);if(r&&r.fc)return Gt().add(r.key);{let o=Gt();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function MT(n,e){return mg.apply(this,arguments)}function mg(){return mg=(0,le.Z)(function*(n,e){const t=Je(n),r=yield ag(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&rv(t,e.targetId,o.cc),o}),mg.apply(this,arguments)}function xT(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,le.Z)(function*(n,e){const t=Je(n);return rD(t.localStore,e).then(r=>ju(t,r))}),sv.apply(this,arguments)}function NT(n,e,t,r){return V0.apply(this,arguments)}function V0(){return V0=(0,le.Z)(function*(n,e,t,r){const o=Je(n),u=yield function(l,m){const I=Je(l),b=Je(I.mutationQueue);return I.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Sn(A,m).next(R=>R?I.localDocuments.getDocuments(A,R):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield xd(o.remoteStore):"acknowledged"===t||"rejected"===t?(F0(o,e,r||null),nv(o,e),m=e,Je(Je(o.localStore).mutationQueue).Cn(m)):it(),yield ju(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),V0.apply(this,arguments)}function U0(){return U0=(0,le.Z)(function*(n,e){const t=Je(n);if(av(t),$0(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield AD(t,r.toArray());t.vc=!0,yield Zy(t.remoteStore,!0);for(const u of o)dg(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Od(t,l),Oa(t.localStore,l,!0))),yf(t.remoteStore,l)}),yield o,yield AD(t,r),function(u){const l=Je(u);l.yc.forEach((m,I)=>{yf(l.remoteStore,I)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pn(Qe.comparator)}(t),t.vc=!1,yield Zy(t.remoteStore,!1)}}),U0.apply(this,arguments)}function AD(n,e,t){return B0.apply(this,arguments)}function B0(){return B0=(0,le.Z)(function*(n,e,t){const r=Je(n),o=[],u=[];for(const l of e){let m;const I=r._c.get(l);if(I&&0!==I.length){m=yield Qc(r.localStore,Qi(I[0]));for(const b of I){const A=r.wc.get(b),R=yield MT(r,A);R.snapshot&&u.push(R.snapshot)}}else{const b=yield nD(r.localStore,l);m=yield Qc(r.localStore,b),yield ev(r,MD(b),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),B0.apply(this,arguments)}function MD(n){return aI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OT(n){const e=Je(n);return Je(Je(e.localStore).persistence).$i()}function xD(n,e,t,r){return ov.apply(this,arguments)}function ov(){return ov=(0,le.Z)(function*(n,e,t,r){const o=Je(n);if(o.vc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield rD(o.localStore,lI(u[0])),m=Bc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Wr.EMPTY_BYTE_STRING);yield ju(o,l,m);break}case"rejected":yield Oa(o.localStore,e,!0),Od(o,e,r);break;default:it()}}),ov.apply(this,arguments)}function PT(n,e,t){return j0.apply(this,arguments)}function j0(){return j0=(0,le.Z)(function*(n,e,t){const r=av(n);if(r.vc){for(const o of e){if(r._c.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield nD(r.localStore,o),l=yield Qc(r.localStore,u);yield ev(r,MD(u),l.targetId,!1,l.resumeToken),dg(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield Oa(r.localStore,o,!1).then(()=>{yf(r.remoteStore,o),Od(r,o)}).catch(Fo))}}),j0.apply(this,arguments)}function av(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CT.bind(null,e),e.dc.nu=hg.bind(null,e.eventManager),e.dc.Pc=fg.bind(null,e.eventManager),e}function $0(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TT.bind(null,e),e}class yg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.serializer=cg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ro(this.persistence,new JI,e.initialUser,this.serializer)}createPersistence(e){return new My(xy.zs,this.serializer)}createSharedClientState(e){return new g0}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vg extends yg{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield $0(r.Vc.syncEngine),yield xd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ro(this.persistence,new JI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new s0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new zA(t,this.persistence);return new qm(e.asyncQueue,r)}createPersistence(e){const t=no(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new QI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oD(),By(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new g0}}class G0 extends vg{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof Vy&&(r.sharedClientState.syncEngine={jr:NT.bind(null,o),zr:xD.bind(null,o),Wr:PT.bind(null,o),$i:OT.bind(null,o),Qr:xT.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,le.Z)(function*(l){yield function RT(n,e){return U0.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=oD();if(!Vy.D(t))throw new De(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=no(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xc{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>CD(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=SD.bind(null,r.syncEngine),yield Zy(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Yy}createDatastore(e){const t=cg(e.databaseInfo.databaseId),r=new dT(e.databaseInfo);return new pT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>CD(this.syncEngine,m,0),l=m0.D()?new m0:new sD,new yT(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,I,b){const A=new JA(r,o,u,l,m,I);return b&&(A.vc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const r=Je(t);Ne("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Md(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ND(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class uv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class z0{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,le.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new ET(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,le.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class FT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,le.Z)(function*(u,l){const m=Je(u),I=sf(m.serializer)+"/documents",b={documents:l.map(X=>Ma(m.serializer,X))},A=yield m.vo("BatchGetDocuments",I,b,l.length),R=new Map;A.forEach(X=>{const ye=function SI(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=$o(t,r.found.name),u=$n(r.found.updateTime),l=r.found.createTime?$n(r.found.createTime):ht.min(),m=new vi({mapValue:{fields:r.found.fields}});return jn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=$o(t,r.missing),u=$n(r.readTime);return jn.newNoDocument(o,u)}(n,e):it()}(m.serializer,X);R.set(ye.key.toString(),ye)});const H=[];return l.forEach(X=>{const ye=R.get(X.toString());dt(!!ye),H.push(ye)}),H}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new tf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Qe.fromPath(o);e.mutations.push(new L_(u,e.precondition(u)))}),yield(r=(0,le.Z)(function*(o,u){const l=Je(o),m=sf(l.serializer)+"/documents",I={writes:u.map(b=>_d(l.serializer,b))};yield l.Io("Commit",m,I)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?or.exists(!1):or.updateTime(t):or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new De(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RD{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new y0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,le.Z)(function*(){const t=new FT(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!ad(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!II(t)}return!1}}class bf{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ni.UNAUTHENTICATED,this.clientId=VE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,le.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=If(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function _g(n,e){return q0.apply(this,arguments)}function q0(){return q0=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,le.Z)(function*(u){r.isEqual(u)||(yield io(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),q0.apply(this,arguments)}function OD(n,e){return wg.apply(this,arguments)}function wg(){return wg=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield W0(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>mD(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>mD(e.remoteStore,u)),n._onlineComponents=e}),wg.apply(this,arguments)}function cv(n){return"FirebaseError"===n.name?n.code===oe.FAILED_PRECONDITION||n.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function W0(n){return lv.apply(this,arguments)}function lv(){return lv=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!cv(t))throw t;Li("Error using user provided cache. Falling back to memory cache: "+t),yield _g(n,new yg)}}else Ne("FirestoreClient","Using default OfflineComponentProvider"),yield _g(n,new yg);return n._offlineComponents}),lv.apply(this,arguments)}function Eg(n){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield OD(n,n._uninitializedComponentsProvider._online)):(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield OD(n,new Xc))),n._onlineComponents}),Z0.apply(this,arguments)}function K0(n){return W0(n).then(e=>e.persistence)}function Tf(n){return W0(n).then(e=>e.localStore)}function Y0(n){return Eg(n).then(e=>e.remoteStore)}function dv(n){return Eg(n).then(e=>e.syncEngine)}function Pd(n){return J0.apply(this,arguments)}function J0(){return J0=(0,le.Z)(function*(n){const e=yield Eg(n),t=e.eventManager;return t.onListen=XA.bind(null,e.syncEngine),t.onUnlisten=DT.bind(null,e.syncEngine),t}),J0.apply(this,arguments)}function X0(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(o,u,l,m,I){const b=new uv({next:R=>{u.enqueueAndForget(()=>Xy(o,A));const H=R.docs.has(l);!H&&R.fromCache?I.reject(new De(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?I.reject(new De(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(R)},error:R=>I.reject(R)}),A=new A0(Qh(l.path),b,{includeMetadataChanges:!0,Ku:!0});return Qy(o,A)}(yield Pd(n),n.asyncQueue,e,t,r)})),r.promise}function ew(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(o,u,l,m,I){const b=new uv({next:R=>{u.enqueueAndForget(()=>Xy(o,A)),R.fromCache&&"server"===m.source?I.reject(new De(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(R)},error:R=>I.reject(R)}),A=new A0(l,b,{includeMetadataChanges:!0,Ku:!0});return Qy(o,A)}(yield Pd(n),n.asyncQueue,e,t,r)})),r.promise}function PD(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const kD=new Map;function hv(n,e,t){if(!t)throw new De(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tw(n,e,t,r){if(!0===e&&!0===r)throw new De(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FD(n){if(!Qe.isDocumentKey(n))throw new De(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LD(n){if(Qe.isDocumentKey(n))throw new De(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fv(n);throw new De(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VD(n,e){if(e<=0)throw new De(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class UD{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new De(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=PD(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new De(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new De(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new De(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ig{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UD(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new l_;switch(t.type){case"firstParty":return new FE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kD.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),kD.delete(e),t.terminate())}(this),Promise.resolve()}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class Ho extends ii{constructor(e,t,r){super(e,t,Qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new Qe(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function nw(n,e,...t){if(n=(0,Yt.m9)(n),hv("collection","path",e),n instanceof Ig){const r=on.fromString(e,...t);return LD(r),new Ho(n,null,r)}{if(!(n instanceof Hn||n instanceof Ho))throw new De(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return LD(r),new Ho(n.firestore,null,r)}}function Dg(n,e,...t){if(n=(0,Yt.m9)(n),1===arguments.length&&(e=VE.A()),hv("doc","path",e),n instanceof Ig){const r=on.fromString(e,...t);return FD(r),new Hn(n,null,new Qe(r))}{if(!(n instanceof Hn||n instanceof Ho))throw new De(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return FD(r),new Hn(n.firestore,n instanceof Ho?n.converter:null,new Qe(r))}}function jD(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),(n instanceof Hn||n instanceof Ho)&&(e instanceof Hn||e instanceof Ho)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $D(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),n instanceof ii&&e instanceof ii&&n.firestore===e.firestore&&Bp(n._query,e._query)&&n.converter===e.converter}class HD{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new y0(this,"async_queue_retry"),this.Xc=()=>{const t=By();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=By();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=By();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Mr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,le.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Js(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Mt("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=b0.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function rw(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class HT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends Ig{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new HD,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Go(this),this._firestoreClient.terminate()}}function dr(n){return n._firestoreClient||Go(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Go(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new WA(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,PD(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new bf(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function Af(n,e,t){const r=new Mr;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield _g(n,t),yield OD(n,e),r.resolve()}catch(o){const u=o;if(!cv(u))throw u;Li("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function mv(n){if(n._initialized||n._terminated)throw new De(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(Wr.fromBase64String(e))}catch(t){throw new De(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zo(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $u{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class el{constructor(e){this._methodName=e}}class kd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const XT=/^__.*__$/;class eS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ku(e,this.data,this.fieldMask,t,this.fieldTransforms):new ef(e,this.data,t,this.fieldTransforms)}}class sw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ku(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ow(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Mf{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Ag(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ow(this.ca)&&XT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class GD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cg(e)}ya(e,t,r,o=!1){return new Mf({ca:e,methodName:t,ga:r,path:On.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fd(n){const e=n._freezeSettings(),t=cg(n._databaseId);return new GD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bg(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);yv("Data must be an object, but it was:",l,r);const m=ZD(r,l);let I,b;if(u.merge)I=new Yi(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const R of u.mergeFields){const H=Vd(e,R,t);if(!l.contains(H))throw new De(oe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);lw(A,H)||A.push(H)}I=new Yi(A),b=l.fieldTransforms.filter(R=>I.covers(R.field))}else I=null,b=l.fieldTransforms;return new eS(new vi(m),I,b)}class xf extends el{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}function zD(n,e,t){return new Mf({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class aw extends el{_toFieldTransform(e){return new md(e.path,new Sa)}isEqual(e){return e instanceof aw}}class uw extends el{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zD(this,e,!0),r=this.pa.map(u=>Ld(u,t)),o=new Aa(r);return new md(e.path,o)}isEqual(e){return this===e}}class cw extends el{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zD(this,e,!0),r=this.pa.map(u=>Ld(u,t)),o=new gd(r);return new md(e.path,o)}isEqual(e){return this===e}}class qD extends el{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Xh(e.serializer,pI(e.serializer,this.Ia));return new md(e.path,t)}isEqual(e){return this===e}}function Tg(n,e,t,r){const o=n.ya(1,e,t);yv("Data must be an object, but it was:",o,r);const u=[],l=vi.empty();Ia(r,(I,b)=>{const A=vv(e,I,t);b=(0,Yt.m9)(b);const R=o.da(A);if(b instanceof xf)u.push(A);else{const H=Ld(b,R);null!=H&&(u.push(A),l.set(A,H))}});const m=new Yi(u);return new sw(l,m,o.fieldTransforms)}function Sg(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[Vd(e,r,t)],I=[o];if(u.length%2!=0)throw new De(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(Vd(e,u[H])),I.push(u[H+1]);const b=[],A=vi.empty();for(let H=m.length-1;H>=0;--H)if(!lw(b,m[H])){const X=m[H];let ye=I[H];ye=(0,Yt.m9)(ye);const ke=l.da(X);if(ye instanceof xf)b.push(X);else{const Ue=Ld(ye,ke);null!=Ue&&(b.push(X),A.set(X,Ue))}}const R=new Yi(b);return new sw(A,R,l.fieldTransforms)}function WD(n,e,t,r=!1){return Ld(t,n.ya(r?4:3,e))}function Ld(n,e){if(KD(n=(0,Yt.m9)(n)))return yv("Unsupported field value:",e,n),ZD(n,e);if(n instanceof el)return function(t,r){if(!ow(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Ld(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pI(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Bn.fromDate(t);return{timestampValue:jo(r.serializer,o)}}if(t instanceof Bn){const o=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jo(r.serializer,o)}}if(t instanceof kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof zo)return{bytesValue:yd(r.serializer,t._byteString)};if(t instanceof Hn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hc(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${fv(t)}`)}(n,e)}function ZD(n,e){const t={};return Zh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(n,(r,o)=>{const u=Ld(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function KD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof kd||n instanceof zo||n instanceof Hn||n instanceof el)}function yv(n,e,t){if(!KD(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fv(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Vd(n,e,t){if((e=(0,Yt.m9)(e))instanceof $u)return e._internalPath;if("string"==typeof e)return vv(n,e);throw Ag("Field path arguments must be of type string or ",n,!1,void 0,t)}const YD=new RegExp("[~\\*/\\[\\]]");function vv(n,e,t){if(e.search(YD)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $u(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ag(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let I="";return(u||l)&&(I+=" (found",u&&(I+=` in field ${r}`),l&&(I+=` in document ${o}`),I+=")"),new De(oe.INVALID_ARGUMENT,m+n+I)}function lw(n,e){return n.some(t=>t.isEqual(e))}class Mg{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class QD extends Mg{data(){return super.data()}}function xg(n,e){return"string"==typeof e?vv(n,e):e instanceof $u?e._internalPath:e._delegate._internalPath}function JD(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class Ng extends _v{}function _r(n,e,...t){let r=[];e instanceof _v&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof Nf).length,l=o.filter(m=>m instanceof ka).length;if(u>1||u>0&&l>0)throw new De(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class ka extends Ng{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ka(e,t,r)}_apply(e){const t=this._parse(e);return Dv(e._query,t),new ii(e.firestore,e.converter,N_(e._query,t))}_parse(e){const t=Fd(e.firestore);return function(o,u,l,m,I,b,A){let R;if(I.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Rg(A,b);const H=[];for(const X of A)H.push(eC(m,o,X));R={arrayValue:{values:H}}}else R=eC(m,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Rg(A,b),R=WD(l,"where",A,"in"===b||"not-in"===b);return qt.create(I,b,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Nf extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)Dv(u,m),u=N_(u,m)}(e._query,t),new ii(e.firestore,e.converter,N_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wv extends Ng{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wv(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new De(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new hd(o,u);return function(m,I){if(null===iy(m)){const b=sy(m);null!==b&&sS(0,b,I.field)}}(r,l),l}(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ba(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class tl extends Ng{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new tl(e,t,r)}_apply(e){return new ii(e.firestore,e.converter,oy(e._query,this._limit,this._limitType))}}class Ev extends Ng{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ev(e,t,r)}_apply(e){const t=pw(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(o=t,new ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Iv extends Ng{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Iv(e,t,r)}_apply(e){const t=pw(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(o=t,new ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function pw(n,e,t,r){if(t[0]=(0,Yt.m9)(t[0]),t[0]instanceof Mg)return function(o,u,l,m,I){if(!m)throw new De(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of Ru(o))if(A.field.isKeyField())b.push(Nt(u,m.key));else{const R=m.data.field(A.field);if(Su(R))throw new De(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=A.field.canonicalString();throw new De(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(R)}return new xu(b,I)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Fd(n.firestore);return function(u,l,m,I,b,A){const R=u.explicitOrderBy;if(b.length>R.length)throw new De(oe.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let X=0;X<b.length;X++){const ye=b[X];if(R[X].field.isKeyField()){if("string"!=typeof ye)throw new De(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof ye}`);if(!x_(u)&&-1!==ye.indexOf("/"))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${ye}' contains a slash.`);const ke=u.path.child(on.fromString(ye));if(!Qe.isDocumentKey(ke))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const Ue=new Qe(ke);H.push(Nt(l,Ue))}else{const ke=WD(m,I,ye);H.push(ke)}}return new xu(H,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function eC(n,e,t){if("string"==typeof(t=(0,Yt.m9)(t))){if(""===t)throw new De(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(e)&&-1!==t.indexOf("/"))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!Qe.isDocumentKey(r))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nt(n,new Qe(r))}if(t instanceof Hn)return Nt(n,t._key);throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fv(t)}.`)}function Rg(n,e){if(!Array.isArray(n)||0===n.length)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dv(n,e){if(e.isInequality()){const r=sy(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new De(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=iy(n);null!==u&&sS(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function sS(n,e,t){if(!t.isEqual(e))throw new De(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mw{convertValue(e,t="none"){switch(Au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ia(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new kd(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xs(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kh(e));default:return null}}convertTimestamp(e){const t=Vc(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);dt(Yp(r));const o=new Uc(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return o.isEqual(t)||Mt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Og(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Rf extends mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class Of{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hu extends Mg{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pg extends Hu{data(e={}){return super.data(e)}}class nl{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Of(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pg(this._firestore,this._userDataWriter,r.key,r,new Of(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Pg(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Of(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new Pg(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Of(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let I=-1,b=-1;return 0!==l.type&&(I=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:tC(l.type),doc:m,oldIndex:I,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function vw(n,e){return n instanceof Hu&&e instanceof Hu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nl&&e instanceof nl&&n._firestore===e._firestore&&$D(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Gu extends mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function _w(n,e,t){n=rn(n,Hn);const r=rn(n.firestore,Jn),o=Og(n.converter,e,t);return kg(r,[bg(Fd(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,or.none())])}function ww(n,e,t,...r){n=rn(n,Hn);const o=rn(n.firestore,Jn),u=Fd(o);let l;return l="string"==typeof(e=(0,Yt.m9)(e))||e instanceof $u?Sg(u,"updateDoc",n._key,e,t,r):Tg(u,"updateDoc",n._key,e),kg(o,[l.toMutation(n._key,or.exists(!0))])}function oC(n,...e){var t,r,o;n=(0,Yt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||rw(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(rw(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let I,b,A;if(n instanceof Hn)b=rn(n.firestore,Jn),A=Qh(n._key.path),I={next:R=>{e[l]&&e[l](Cv(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=rn(n,ii);b=rn(R.firestore,Jn),A=R._query;const H=new Gu(b);I={next:X=>{e[l]&&e[l](new nl(b,H,R,X))},error:e[l+1],complete:e[l+2]},JD(n._query)}return function(R,H,X,ye){const ke=new uv(ye),Ue=new A0(H,ke,X);return R.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return Qy(yield Pd(R),Ue)})),()=>{ke.Dc(),R.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return Xy(yield Pd(R),Ue)}))}}(dr(b),A,m,I)}function kg(n,e){return function(t,r){const o=new Mr;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function ID(n,e,t){return Rd.apply(this,arguments)}(yield dv(t),r,o)})),o.promise}(dr(n),e)}function Cv(n,e,t){const r=t.docs.get(e._key),o=new Gu(n);return new Hu(n,o,e._key,r,new Of(t.hasPendingWrites,t.fromCache),e.converter)}const pS={maxAttempts:5};class gS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fd(e)}set(e,t,r){this._verifyNotCommitted();const o=Ud(e,this._firestore),u=Og(o.converter,t,r),l=bg(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,or.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ud(e,this._firestore);let l;return l="string"==typeof(t=(0,Yt.m9)(t))||t instanceof $u?Sg(this._dataReader,"WriteBatch.update",u._key,t,r,o):Tg(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ud(e,this._firestore);return this._mutations=this._mutations.concat(new tf(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ud(n,e){if((n=(0,Yt.m9)(n)).firestore!==e)throw new De(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fd(e)}get(e){const t=Ud(e,this._firestore),r=new Rf(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const u=o[0];if(u.isFoundDocument())return new Mg(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Mg(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=Ud(e,this._firestore),u=Og(o.converter,t,r),l=bg(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Ud(e,this._firestore);let l;return l="string"==typeof(t=(0,Yt.m9)(t))||t instanceof $u?Sg(this._dataReader,"Transaction.update",u._key,t,r,o):Tg(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Ud(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ud(e,this._firestore),r=new Gu(this._firestore);return super.get(e).then(o=>new Hu(this._firestore,r,t._key,o._document,new Of(!1,!1),t.converter))}}function Fg(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Dw(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function cC(){if(!function bb(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hh=Gs.SDK_VERSION,(0,Gs._registerComponent)(new Co.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Jn(new d_(t.getProvider("auth-internal")),new fb(t.getProvider("app-check-internal")),function(m,I){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new De(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(m.options.projectId,I)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Gs.registerVersion)(RE,"3.12.2",n),(0,Gs.registerVersion)(RE,"3.12.2","esm2017")}();class bv{constructor(e){this._delegate=e}static fromBase64String(e){return cC(),new bv(zo.fromBase64String(e))}static fromUint8Array(e){return Dw(),new bv(zo.fromUint8Array(e))}toBase64(){return cC(),this._delegate.toBase64()}toUint8Array(){return Dw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Di(n){return function CS(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Cw{enableIndexedDbPersistence(e,t){return function zT(n,e){mv(n=rn(n,Jn));const t=dr(n);if(t._uninitializedComponentsProvider)throw new De(oe.FAILED_PRECONDITION,"SDK cache is already specified.");Li("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Xc;return Af(t,o,new vg(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function iw(n){mv(n=rn(n,Jn));const e=dr(n);if(e._uninitializedComponentsProvider)throw new De(oe.FAILED_PRECONDITION,"SDK cache is already specified.");Li("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Xc;return Af(e,r,new G0(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qT(n){if(n._initialized&&!n._terminated)throw new De(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(r){if(!Zi.D())return Promise.resolve();const o=r+"main";yield Zi.delete(o)}),function(r){return t.apply(this,arguments)})(no(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Sf(n,e,t,r={}){var o;const u=(n=rn(n,Ig))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,I;if("string"==typeof r.mockUserToken)m=r.mockUserToken,I=ni.MOCK_USER;else{m=(0,Yt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new De(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new ni(b)}n._authCredentials=new hb(new db(m,I))}}(this._delegate,e,t,r)}enableNetwork(){return function ZT(n){return function LT(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield K0(n),t=yield Y0(n);return e.setNetworkEnabled(!0),function(r){const o=Je(r);return o.vu.delete(0),lg(o)}(t)}))}(dr(n=rn(n,Jn)))}(this._delegate)}disableNetwork(){return function gv(n){return function VT(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield K0(n),t=yield Y0(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(o){const u=Je(o);u.vu.add(0),yield Md(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(dr(n=rn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function WT(n){return function(e){const t=new Mr;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function pg(n,e){return k0.apply(this,arguments)}(yield dv(e),t)})),t.promise}(dr(n=rn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function dS(n,e){return function BT(n,e){const t=new uv(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Pd(n),o=t,Je(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Pd(n),o=t,void Je(r).ku.delete(o);var r,o}))}}(dr(n=rn(n,Jn)),rw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jd(this,nw(this._delegate,e))}catch(t){throw Bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new xs(this,Dg(this._delegate,e))}catch(t){throw Bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ji(this,function BD(n,e){if(n=rn(n,Ig),hv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(n,null,(t=e,new ba(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uC(n,e,t){n=rn(n,Jn);const r=Object.assign(Object.assign({},pS),t);return function(o){if(o.maxAttempts<1)throw new De(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Mr;return o.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const I=yield function Q0(n){return Eg(n).then(e=>e.datastore)}(o);new RD(o.asyncQueue,I,l,u,m).run()})),m.promise}(dr(n),o=>e(new dM(n,o)),r)}(this._delegate,t=>e(new Tw(this,t)))}batch(){return dr(this._delegate),new Sw(new gS(this._delegate,e=>kg(this._delegate,e)))}loadBundle(e){return function YT(n,e){const t=dr(n=rn(n,Jn)),r=new HT;return function jT(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?j_().encode(u):u,I=function(I,b){if(I instanceof Uint8Array)return ND(I,b);if(I instanceof ArrayBuffer)return ND(new Uint8Array(I),b);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new z0(I,l);var I}(t,cg(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function kT(n,e,t){const r=Je(n);var o;(o=(0,le.Z)(function*(u,l,m){try{const I=yield l.getMetadata();if(yield function(H,X){const ye=Je(H),ke=$n(X.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",Ue=>ye.qs.getBundleMetadata(Ue,X.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(ke)>=0)}(u.localStore,I))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=I).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(x0(I));const b=new vD(I,u.localStore,l.serializer);let A=yield l.bc();for(;A;){const H=yield b.zu(A);H&&m._updateProgress(H),A=yield l.bc()}const R=yield b.complete();return yield ju(u,R.Ju,void 0),yield function(H,X){const ye=Je(H);return ye.persistence.runTransaction("Save bundle","readwrite",ke=>ye.qs.saveBundleMetadata(ke,X))}(u.localStore,I),m._completeWith(R.progress),Promise.resolve(R.Hu)}catch(I){return Li("SyncEngine",`Loading bundle failed with ${I}`),m._failWith(I),Promise.resolve(new Set)}var H}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield dv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function QT(n,e){return function tM(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,r){const o=Je(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield Tf(n),e)}))}(dr(n=rn(n,Jn)),e).then(t=>t?new ii(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ji(this,t):null)}}class Tv extends mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new bv(new zo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xs.forKey(t,this.firestore,null)}}class Tw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tv(e)}get(e){const t=zu(e);return this._delegate.get(t).then(r=>new Lg(this._firestore,new Hu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=zu(e);return r?(Fg("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zu(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zu(e);return this._delegate.delete(t),this}}class Sw{constructor(e){this._delegate=e}set(e,t,r){const o=zu(e);return r?(Fg("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zu(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bd.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Bd(e,new Tv(e),t),o.set(t,u)),u}}Bd.INSTANCES=new WeakMap;class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xs(t,new Hn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new xs(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jd(this.firestore,nw(this._delegate,e))}catch(t){throw Bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.m9)(e))instanceof Hn&&jD(this._delegate,e)}set(e,t){t=Fg("DocumentReference.set",t);try{return t?_w(this._delegate,e,t):_w(this._delegate,e)}catch(r){throw Bi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ww(this._delegate,e):ww(this._delegate,e,t,...r)}catch(o){throw Bi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function iC(n){return kg(rn(n.firestore,Jn),[new tf(n._key,or.none())])}(this._delegate)}onSnapshot(...e){const t=Aw(e),r=Mw(e,o=>new Lg(this.firestore,new Hu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return oC(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function nC(n){n=rn(n,Hn);const e=rn(n.firestore,Jn),t=dr(e),r=new Gu(e);return function UT(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(o,u,l){try{const m=yield function(I,b){const A=Je(I);return A.persistence.runTransaction("read document","readonly",R=>A.localDocuments.getDocument(R,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new De(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const I=If(m,`Failed to get document '${u} from cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield Tf(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Hu(e,r,n._key,o,new Of(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function uS(n){n=rn(n,Hn);const e=rn(n.firestore,Jn);return X0(dr(e),n._key,{source:"server"}).then(t=>Cv(e,n,t))}(this._delegate):function aS(n){n=rn(n,Hn);const e=rn(n.firestore,Jn);return X0(dr(e),n._key).then(t=>Cv(e,n,t))}(this._delegate),t.then(r=>new Lg(this.firestore,new Hu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Bd.getInstance(this.firestore,e):null))}}function Bi(n,e,t){return n.message=n.message.replace(e,t),n}function Aw(n){for(const e of n)if("object"==typeof e&&!Di(e))return e;return{}}function Mw(n,e){var t,r;let o;return o=Di(n[0])?n[0]:Di(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Lg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vw(this._delegate,e._delegate)}}class Pf extends Lg{data(e){const t=this._delegate.data(e);return function PE(n,e){n||it()}(void 0!==t),t}}class Ji{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tv(e)}where(e,t,r){try{return new Ji(this.firestore,_r(this._delegate,function tS(n,e,t){const r=e,o=xg("where",n);return ka._create(o,r,t)}(e,t,r)))}catch(o){throw Bi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ji(this.firestore,_r(this._delegate,function dw(n,e="asc"){const t=e,r=xg("orderBy",n);return wv._create(r,t)}(e,t)))}catch(r){throw Bi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ji(this.firestore,_r(this._delegate,function nS(n){return VD("limit",n),tl._create("limit",n,"F")}(e)))}catch(t){throw Bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ji(this.firestore,_r(this._delegate,function hw(n){return VD("limitToLast",n),tl._create("limitToLast",n,"L")}(e)))}catch(t){throw Bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ji(this.firestore,_r(this._delegate,function XD(...n){return Ev._create("startAt",n,!0)}(...e)))}catch(t){throw Bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ji(this.firestore,_r(this._delegate,function rS(...n){return Ev._create("startAfter",n,!1)}(...e)))}catch(t){throw Bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ji(this.firestore,_r(this._delegate,function iS(...n){return Iv._create("endBefore",n,!1)}(...e)))}catch(t){throw Bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ji(this.firestore,_r(this._delegate,function fw(...n){return Iv._create("endAt",n,!0)}(...e)))}catch(t){throw Bi(t,"endAt()","Query.endAt()")}}isEqual(e){return $D(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rC(n){n=rn(n,ii);const e=rn(n.firestore,Jn),t=dr(e),r=new Gu(e);return function eM(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(o,u,l){try{const m=yield ag(o,u,!0),I=new wD(u,m.ir),b=I.sc(m.documents),A=I.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const I=If(m,`Failed to execute query '${u} against cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield Tf(n),e,t);var r})),t.promise}(t,n._query).then(o=>new nl(e,r,n,o))}(this._delegate):"server"===e?.source?function lS(n){n=rn(n,ii);const e=rn(n.firestore,Jn),t=dr(e),r=new Gu(e);return ew(t,n._query,{source:"server"}).then(o=>new nl(e,r,n,o))}(this._delegate):function cS(n){n=rn(n,ii);const e=rn(n.firestore,Jn),t=dr(e),r=new Gu(e);return JD(n._query),ew(t,n._query).then(o=>new nl(e,r,n,o))}(this._delegate),t.then(r=>new Fa(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Aw(e),r=Mw(e,o=>new Fa(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return oC(this._delegate,t,r)}withConverter(e){return new Ji(this.firestore,this._delegate.withConverter(e?Bd.getInstance(this.firestore,e):null))}}class xw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Fa{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xw(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pf(this._firestore,r))})}isEqual(e){return vw(this._delegate,e._delegate)}}class jd extends Ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xs(this.firestore,e):null}doc(e){try{return new xs(this.firestore,void 0===e?Dg(this._delegate):Dg(this._delegate,e))}catch(t){throw Bi(t,"doc()","CollectionReference.doc()")}}add(e){return function sC(n,e){const t=rn(n.firestore,Jn),r=Dg(n),o=Og(n.converter,e);return kg(t,[bg(Fd(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xs(this.firestore,t))}isEqual(e){return jD(this._delegate,e._delegate)}withConverter(e){return new jd(this.firestore,this._delegate.withConverter(e?Bd.getInstance(this.firestore,e):null))}}function zu(n){return rn(n,Hn)}class Vg{constructor(...e){this._delegate=new $u(...e)}static documentId(){return new Vg(On.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.m9)(e))instanceof $u&&this._delegate._internalPath.isEqual(e._internalPath)}}class $d{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yS(){return new aw("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $d(e)}static delete(){const e=function mS(){return new xf("deleteField")}();return e._methodName="FieldValue.delete",new $d(e)}static arrayUnion(...e){const t=function vS(...n){return new uw("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $d(t)}static arrayRemove(...e){const t=function hM(...n){return new cw("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $d(t)}static increment(e){const t=function _S(n){return new qD("increment",n)}(e);return t._methodName="FieldValue.increment",new $d(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fM={Firestore:lC,GeoPoint:kd,Timestamp:Bn,Blob:bv,Transaction:Tw,WriteBatch:Sw,DocumentReference:xs,DocumentSnapshot:Lg,Query:Ji,QueryDocumentSnapshot:Pf,QuerySnapshot:Fa,CollectionReference:jd,FieldPath:Vg,FieldValue:$d,setLogLevel:function bw(n){!function GA(n){Cu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function bS(n){(function dC(n,e){n.INTERNAL.registerComponent(new Co.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},fM)))})(n,(e,t)=>new lC(e,t,new Cw)),n.registerVersion("@firebase/firestore-compat","0.3.11")}(ap.Z);var Hd=O(7579),TS=O(6451),Sv=O(5363),Ug=O(8421);function ji(n,e){return(0,Vn.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,gr.x)(r,I=>{o?.unsubscribe();let b=0;const A=u++;(0,Ug.Xf)(n(I,A)).subscribe(o=(0,gr.x)(r,R=>r.next(e?e(I,R,A,b++):R),()=>{o=null,m()}))},()=>{l=!0,m()}))})}var hC=O(6063);class SS extends Hd.x{constructor(e=1/0,t=1/0,r=hC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let I=1;I<r.length&&r[I]<=l;I+=2)m=I;m&&r.splice(0,m+1)}}}var fC=O(3099);function AS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,fC.B)({connector:()=>new SS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Bg=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qu=O(515);function kf(n){return n<=0?()=>qu.E:(0,Vn.e)((e,t)=>{let r=0;e.subscribe((0,gr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function jg(n){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe((0,gr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Rw(n=Ff){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe((0,gr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Ff(){return new Bg}var Gd=O(4671);function Wu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fi((o,u)=>n(o,u,r)):Gd.y,kf(1),t?jg(e):Rw(()=>new Bg))}var Lf=O(576);function pC(n,e){return(0,Lf.m)(e)?ji(()=>n,e):ji(()=>n)}var Ow=O(9468);O(259);const kw=new Map,mC={activated:!1,tokenObservers:[]},yC={initialized:!1,enabled:!1};function Mn(n){return kw.get(n)||Object.assign({},mC)}function Vf(){return yC}const Hg="https://content-firebaseappcheck.googleapis.com/v1",Lw="exchangeDebugToken",Gg={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class _M{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,le.Z)(function*(){t.stop();try{t.pending=new Yt.BH,yield function wM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ci=new Yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vw(n){if(!Mn(n).activated)throw Ci.create("use-before-activation",{appName:n.name})}function qg(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,le.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(R){throw Ci.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw Ci.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(R){throw Ci.create("fetch-parse-error",{originalErrorMessage:R?.message})}const I=m.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(I[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),Mv.apply(this,arguments)}function Bw(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${Hg}/projects/${t}/apps/${r}:${Lw}?key=${o}`,body:{debug_token:e}}}const jw="firebase-app-check-database",EM=1,Uf="firebase-app-check-store";let Nv=null;function $w(){return $w=(0,le.Z)(function*(n,e){const r=(yield function wC(){return Nv||(Nv=new Promise((n,e)=>{try{const t=indexedDB.open(jw,EM);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ci.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Uf,{keyPath:"compositeKey"})}}catch(t){e(Ci.create("storage-open",{originalErrorMessage:t?.message}))}}),Nv)}()).transaction(Uf,"readwrite"),u=r.objectStore(Uf).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=I=>{l()},r.onerror=I=>{var b;m(Ci.create("storage-set",{originalErrorMessage:null===(b=I.target.error)||void 0===b?void 0:b.message}))}})}),$w.apply(this,arguments)}const Wg=new Ri.Yd("@firebase/app-check");function Pv(n,e){return(0,Yt.hl)()?function DM(n,e){return function EC(n,e){return $w.apply(this,arguments)}(function US(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zw(){return Vf().enabled}function qw(){return kv.apply(this,arguments)}function kv(){return kv=(0,le.Z)(function*(){const n=Vf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),kv.apply(this,arguments)}const CM={error:"UNKNOWN_ERROR"};function jS(n){return Yt.US.encodeString(JSON.stringify(n),!1)}function zd(n){return DC.apply(this,arguments)}function DC(){return DC=(0,le.Z)(function*(n,e=!1){const t=n.app;Vw(t);const r=Mn(t);let u,o=r.token;if(o&&!Kg(o)&&(r.token=void 0,o=void 0),!o){const I=yield r.cachedTokenPromise;I&&(Kg(I)?o=I:yield Pv(t,void 0))}if(!e&&o&&Kg(o))return{token:o.token};let m,l=!1;if(zw()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qg(Bw(t,yield qw()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const I=yield r.exchangeTokenPromise;return yield Pv(t,I),r.token=I,{token:I.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Mn(t).exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?Wg.warn(I.message):Wg.error(I),u=I}return o?u?m=Kg(o)?{token:o.token,internalError:u}:SC(u):(m={token:o.token},r.token=o,yield Pv(t,o)):m=SC(u),l&&function HS(n,e){const t=Mn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),DC.apply(this,arguments)}function bC(){return bC=(0,le.Z)(function*(n){const e=n.app;Vw(e);const{provider:t}=Mn(e);if(zw()){const r=yield qw(),{token:o}=yield qg(Bw(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),bC.apply(this,arguments)}function Ww(n,e){const t=Mn(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $S(n){const{app:e}=n,t=Mn(e);let r=t.tokenRefresher;r||(r=function bM(n){const{app:e}=n;return new _M((0,le.Z)(function*(){let r;if(r=Mn(e).token?yield zd(n,!0):yield zd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Gg.RETRIAL_MIN_WAIT,Gg.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Kg(n){return n.expireTimeMillis-Date.now()>0}function SC(n){return{token:jS(CM),error:n}}class TM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mn(this.app);for(const t of e)Ww(this.app,t.next);return Promise.resolve()}}const so="app-check-internal";!function AC(){(0,Gs._registerComponent)(new Co.wA("app-check",n=>function SM(n,e){return new TM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(so).initialize()})),(0,Gs._registerComponent)(new Co.wA(so,n=>function AM(n){return{getToken:e=>zd(n,e),getLimitedUseToken:()=>function CC(n){return bC.apply(this,arguments)}(n),addTokenListener:e=>function TC(n,e,t,r){const{app:o}=n,u=Mn(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Kg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),$S(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$S(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ww(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gs.registerVersion)("@firebase/app-check","0.8.0")}();class qS{constructor(){return(0,Kn.vb)("app-check")}}typeof window<"u"&&window;var OM=O(9260);const PM=new h.OlP("angularfire2.auth.use-emulator"),kM=new h.OlP("angularfire2.auth.settings"),FM=new h.OlP("angularfire2.auth.tenant-id"),LM=new h.OlP("angularfire2.auth.langugage-code"),VM=new h.OlP("angularfire2.auth.use-device-language"),UM=new h.OlP("angularfire.auth.persistence"),BM=(n,e,t,r,o,u,l,m)=>(0,cr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),r&&(I.tenantId=r),I.languageCode=o,u&&I.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))I.settings[b]=A;return m&&I.setPersistence(m),I},[t,r,o,u,l,m]);let jM=(()=>{class n{constructor(t,r,o,u,l,m,I,b,A,R,H,X){const ye=new Hd.x,ke=(0,_t.of)(void 0).pipe((0,Sv.Q)(l.outsideAngular),ji(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,2644)))),(0,It.U)(()=>(0,cr.on)(t,u,r)),(0,It.U)(Ue=>BM(Ue,u,m,b,A,R,I,H)),AS({bufferSize:1,refCount:!1}));if(po(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_t.of)(null);else{ke.pipe(Wu()).subscribe();const vt=ke.pipe(ji(Ft=>Ft.getRedirectResult().then(Wt=>Wt,()=>null)),Kn.iC,AS({bufferSize:1,refCount:!1})),Ot=ke.pipe(ji(Ft=>new Ni.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onAuthStateChanged(ln=>Wt.next(ln),ln=>Wt.error(ln),()=>Wt.complete()))})))),Dt=ke.pipe(ji(Ft=>new Ni.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onIdTokenChanged(ln=>Wt.next(ln),ln=>Wt.error(ln),()=>Wt.complete()))}))));this.authState=vt.pipe(pC(Ot),(0,Ow.R)(l.outsideAngular),(0,Sv.Q)(l.insideAngular)),this.user=vt.pipe(pC(Dt),(0,Ow.R)(l.outsideAngular),(0,Sv.Q)(l.insideAngular)),this.idToken=this.user.pipe(ji(Ft=>Ft?(0,wn.D)(Ft.getIdToken()):(0,_t.of)(null))),this.idTokenResult=this.user.pipe(ji(Ft=>Ft?(0,wn.D)(Ft.getIdTokenResult()):(0,_t.of)(null))),this.credential=(0,TS.T)(vt,ye,this.authState.pipe(fi(Ft=>!Ft))).pipe((0,It.U)(Ft=>Ft?.user?Ft:null),(0,Ow.R)(l.outsideAngular),(0,Sv.Q)(l.insideAngular))}return(0,cr.pX)(this,ke,u,{spy:{apply:(Ue,vt,Ot)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Ot.then(Dt=>ye.next(Dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cr.Dh),h.LFG(cr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(PM,8),h.LFG(kM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(UM,8),h.LFG(qS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function $M(n,e){return function SR(n,e=op.z){return new Ni.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ZS(n,e){return $M(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function MC(n,e){return ZS(n,e).pipe(Hr(void 0),da(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const I=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(l.metadata)||!I&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function HM(n,e,t){return MC(n,t).pipe(Do((r,o)=>function MR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return KS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return KS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,zi.x)(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function KS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function GM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Hr(void 0),da(),fi(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Do((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return HM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return ZS(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Kn.iC)}add(e){return this.ref.add(e)}doc(e){return new qM(this.ref.doc(e),this.afs)}}class qM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=KM(r,t);return new zM(o,u,this.afs)}snapshotChanges(){return function AR(n,e){return $M(n,e).pipe(Hr(void 0),da(),(0,It.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(Kn.iC)}}class NR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MC(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),fi(t=>t.length>0),Kn.iC):MC(this.query,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Do((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return HM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return ZS(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Kn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Kn.iC)}}const WM=new h.OlP("angularfire2.enableFirestorePersistence"),ZM=new h.OlP("angularfire2.firestore.persistenceSettings"),RR=new h.OlP("angularfire2.firestore.settings"),OR=new h.OlP("angularfire2.firestore.use-emulator");function KM(n,e=(t=>t)){return{query:e(n),ref:n}}let xC=(()=>{class n{constructor(t,r,o,u,l,m,I,b,A,R,H,X,ye,ke,Ue,vt,Ot){this.schedulers=I;const Dt=(0,cr.on)(t,m,r),Ft=A;R&&BM(Dt,m,H,ye,ke,Ue,X,vt),[this.firestore,this.persistenceEnabled$]=(0,cr.cc)(`${Dt.name}.firestore`,"AngularFirestore",Dt.name,()=>{const Wt=m.runOutsideAngular(()=>Dt.firestore());if(u&&Wt.settings(u),Ft&&Wt.useEmulator(...Ft),o&&!po(l)){const ln=()=>{try{return(0,wn.D)(Wt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(vs){return typeof console<"u"&&console.warn(vs),(0,_t.of)(!1)}};return[Wt,m.runOutsideAngular(ln)]}return[Wt,(0,_t.of)(!1)]},[u,Ft,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=KM(o,r),m=this.schedulers.ngZone.run(()=>u);return new zM(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new NR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new qM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cr.Dh),h.LFG(cr.xv,8),h.LFG(WM,8),h.LFG(RR,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(ZM,8),h.LFG(OR,8),h.LFG(jM,8),h.LFG(PM,8),h.LFG(kM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(UM,8),h.LFG(qS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PR=(()=>{class n{constructor(){OM.Z.registerVersion("angularfire",Kn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WM,useValue:!0},{provide:ZM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xC]}),n})();var Zu=O(1135);const{isArray:FR}=Array,{getPrototypeOf:LR,prototype:VR,keys:UR}=Object;function YM(n){if(1===n.length){const e=n[0];if(FR(e))return{args:e,keys:null};if(function BR(n){return n&&"object"==typeof n&&LR(n)===VR}(e)){const t=UR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:jR}=Array;function QM(n){return(0,It.U)(e=>function $R(n,e){return jR(e)?n(...e):n(e)}(n,e))}function JM(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var HR=O(9672);function YS(...n){const e=(0,la.yG)(n),t=(0,la.jO)(n),{args:r,keys:o}=YM(n);if(0===r.length)return(0,wn.D)([],e);const u=new Ni.y(function GR(n,e,t=Gd.y){return r=>{XM(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let I=0;I<o;I++)XM(e,()=>{const b=(0,wn.D)(n[I],e);let A=!1;b.subscribe((0,gr.x)(r,R=>{u[I]=R,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>JM(o,l):Gd.y));return t?u.pipe(QM(t)):u}function XM(n,e,t){n?(0,HR.f)(t,n,e):e()}function ex(n){return new Ni.y(e=>{(0,Ug.Xf)(n()).subscribe(e)})}var zR=O(9635);function Zw(n,e){const t=(0,Lf.m)(n)?n:()=>n,r=o=>o.error(t());return new Ni.y(e?o=>e.schedule(r,0,o):r)}var tx=O(727);function QS(){return(0,Vn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class nx extends Ni.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tx.w0.EMPTY)}return e}refCount(){return QS()(this)}}var Ns=O(5577);function Kw(n,e){return(0,Lf.m)(e)?(0,Ns.z)(n,e,1):(0,Ns.z)(n,1)}var Rs=O(8505);function Yg(n){return(0,Vn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,gr.x)(t,void 0,void 0,l=>{u=(0,Ug.Xf)(n(l,Yg(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function JS(n){return n<=0?()=>qu.E:(0,Vn.e)((e,t)=>{let r=[];e.subscribe((0,gr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function XS(n){return(0,Vn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",Yw=Symbol("RouteTitle");class ZR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fv(n){return new ZR(n)}function KR(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function rl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!rx(n[o],e[o]))return!1;return!0}function rx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ix(n){return n.length>0?n[n.length-1]:null}function Bf(n){return function kR(n){return!!n&&(n instanceof Ni.y||(0,Lf.m)(n.lift)&&(0,Lf.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,wn.D)(Promise.resolve(n)):(0,_t.of)(n)}const QR={exact:function ax(n,e,t){if(!Qg(n.segments,e.segments)||!NC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ax(n.children[r],e.children[r],t))return!1;return!0},subset:ux},sx={exact:function JR(n,e){return rl(n,e)},subset:function XR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rx(n[t],e[t]))},ignored:()=>!0};function ox(n,e,t){return QR[t.paths](n.root,e.root,t.matrixParams)&&sx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ux(n,e,t){return cx(n,e,e.segments,t)}function cx(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Qg(o,t)||e.hasChildren()||!NC(o,t,r))}if(n.segments.length===t.length){if(!Qg(n.segments,t)||!NC(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ux(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Qg(n.segments,o)&&NC(n.segments,o,r)&&n.children[Qt])&&cx(n.children[Qt],e,u,r)}}function NC(n,e,t){return e.every((r,o)=>sx[t](n[o].parameters,r.parameters))}class Lv{constructor(e=new kn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fv(this.queryParams)),this._queryParamMap}toString(){return n1.serialize(this)}}class kn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return RC(this)}}class Qw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fv(this.parameters)),this._parameterMap}toString(){return hx(this)}}function Qg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Jw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new eA},providedIn:"root"}),n})();class eA{parse(e){const t=new f1(e);return new Lv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xw(e.root,!0)}`,r=function s1(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${OC(t)}=${OC(o)}`).join("&"):`${OC(t)}=${OC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function r1(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const n1=new eA;function RC(n){return n.segments.map(e=>hx(e)).join("/")}function Xw(n,e){if(!n.hasChildren())return RC(n);if(e){const t=n.children[Qt]?Xw(n.children[Qt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==Qt&&r.push(`${o}:${Xw(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function t1(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Qt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Qt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===Qt?[Xw(n.children[Qt],!1)]:[`${o}:${Xw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${RC(n)}/${t[0]}`:`${RC(n)}/(${t.join("//")})`}}function lx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function OC(n){return lx(n).replace(/%3B/gi,";")}function tA(n){return lx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PC(n){return decodeURIComponent(n)}function dx(n){return PC(n.replace(/\+/g,"%20"))}function hx(n){return`${tA(n.path)}${function i1(n){return Object.keys(n).map(e=>`;${tA(e)}=${tA(n[e])}`).join("")}(n.parameters)}`}const o1=/^[^\/()?;#]+/;function nA(n){const e=n.match(o1);return e?e[0]:""}const a1=/^[^\/()?;=#]+/,c1=/^[^=?&#]+/,d1=/^[^&#]+/;class f1{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kn([],{}):new kn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new kn(e,t)),r}parseSegment(){const e=nA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Qw(PC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function u1(n){const e=n.match(a1);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=nA(this.remaining);o&&(r=o,this.capture(r))}e[PC(t)]=PC(r)}parseQueryParam(e){const t=function l1(n){const e=n.match(c1);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function h1(n){const e=n.match(d1);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=dx(t),u=dx(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nA(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Qt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Qt]:new kn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function fx(n){return n.segments.length>0?new kn([],{[Qt]:n}):n}function px(n){const e={};for(const r of Object.keys(n.children)){const u=px(n.children[r]);if(r===Qt&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function p1(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new kn(n.segments.concat(e.segments),e.children)}return n}(new kn(n.segments,e))}function Jg(n){return n instanceof Lv}function gx(n){let e;const o=fx(function t(u){const l={};for(const I of u.children){const b=t(I);l[I.outlet]=b}const m=new kn(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function mx(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return rA(o,o,o,t,r);const u=function m1(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vx(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([I,b])=>{m[I]="string"==typeof b?b.split("/"):b}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,I)=>{0==I&&"."===m||(0==I&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new vx(t,e,r)}(e);if(u.toRoot())return rA(o,o,new kn([],{}),t,r);const l=function y1(n,e,t){if(n.isAbsolute)return new FC(e,!0,0);if(!t)return new FC(e,!1,NaN);if(null===t.parent)return new FC(t,!0,0);const r=kC(n.commands[0])?0:1;return function v1(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new FC(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?tE(l.segmentGroup,l.index,u.commands):_x(l.segmentGroup,l.index,u.commands);return rA(o,l.segmentGroup,m,t,r)}function kC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eE(n){return"object"==typeof n&&null!=n&&n.outlets}function rA(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([I,b])=>{u[I]=Array.isArray(b)?b.map(A=>`${A}`):`${b}`}),l=n===e?t:yx(n,e,t);const m=fx(px(l));return new Lv(m,u,o)}function yx(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:yx(u,e,t)}),new kn(n.segments,r)}class vx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kC(r[0]))throw new h.vHH(4003,!1);const o=r.find(eE);if(o&&o!==ix(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class FC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _x(n,e,t){if(n||(n=new kn([],{})),0===n.segments.length&&n.hasChildren())return tE(n,e,t);const r=function w1(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(eE(m))break;const I=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===I)break;if(I&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ex(I,b,l))return u;r+=2}else{if(!Ex(I,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new kn(n.segments.slice(0,r.pathIndex),{});return u.children[Qt]=new kn(n.segments.slice(r.pathIndex),n.children),tE(u,0,o)}return r.match&&0===o.length?new kn(n.segments,{}):r.match&&!n.hasChildren()?iA(n,e,t):r.match?tE(n,0,o):iA(n,e,t)}function tE(n,e,t){if(0===t.length)return new kn(n.segments,{});{const r=function _1(n){return eE(n[0])?n[0].outlets:{[Qt]:n}}(t),o={};if(!r[Qt]&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length){const u=tE(n.children[Qt],e,t);return new kn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=_x(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new kn(n.segments,o)}}function iA(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(eE(u)){const I=E1(u.outlets);return new kn(r,I)}if(0===o&&kC(t[0])){r.push(new Qw(n.segments[e].path,wx(t[0]))),o++;continue}const l=eE(u)?u.outlets[Qt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&kC(m)?(r.push(new Qw(l,wx(m))),o+=2):(r.push(new Qw(l,{})),o++)}return new kn(r,{})}function E1(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=iA(new kn([],{}),0,r))}),e}function wx(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Ex(n,e,t){return n==t.path&&rl(e,t.parameters)}const nE="imperative";class il{constructor(e,t){this.id=e,this.url=t}}class sA extends il{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xg extends il{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class LC extends il{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rE extends il{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class oA extends il{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class I1 extends il{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D1 extends il{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C1 extends il{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class b1 extends il{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T1 extends il{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S1{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class A1{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class M1{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x1{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N1{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R1{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ix{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class O1{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new iE,this.attachRef=null}}let iE=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new O1,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Dx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=aA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=aA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=uA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return uA(e,this._root).map(t=>t.value)}}function aA(n,e){if(n===e.value)return e;for(const t of e.children){const r=aA(n,t);if(r)return r}return null}function uA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=uA(n,t);if(r.length)return r.unshift(e),r}return[]}class qd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Cx extends Dx{constructor(e,t){super(e),this.snapshot=t,cA(this,e)}toString(){return this.snapshot.toString()}}function bx(n,e){const t=function P1(n,e){const l=new VC([],{},{},"",{},Qt,e,null,{});return new Sx("",new qd(l,[]))}(0,e),r=new Zu.X([new Qw("",{})]),o=new Zu.X({}),u=new Zu.X({}),l=new Zu.X({}),m=new Zu.X(""),I=new jf(r,o,l,m,u,Qt,e,t.root);return I.snapshot=t.root,new Cx(new qd(I,[]),t)}class jf{constructor(e,t,r,o,u,l,m,I){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=I,this.title=this.dataSubject?.pipe((0,It.U)(b=>b[Yw]))??(0,_t.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>Fv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>Fv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function k1(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class VC{get title(){return this.data?.[Yw]}constructor(e,t,r,o,u,l,m,I,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=I,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sx extends Dx{constructor(e,t){super(t),this.url=e,cA(this,t)}toString(){return Ax(this._root)}}function cA(n,e){e.value._routerState=n,e.children.forEach(t=>cA(n,t))}function Ax(n){const e=n.children.length>0?` { ${n.children.map(Ax).join(", ")} } `:"";return`${n.value}${e}`}function lA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),rl(e.params,t.params)||n.paramsSubject.next(t.params),function YR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),rl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dA(n,e){const t=rl(n.params,e.params)&&function e1(n,e){return Qg(n,e)&&n.every((t,r)=>rl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dA(n.parent,e.parent))}let hA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(iE),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(UC,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,I=new F1(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:I,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class F1{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jf?this.route:e===iE?this.childContexts:this.parent.get(e,t)}}const UC=new h.OlP("");let Mx=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=YS([r.queryParams,r.params,r.data]).pipe(ji(([u,l,m],I)=>(m={...u,...l,...m},0===I?(0,_t.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function sE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function V1(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return sE(n,r,o);return sE(n,r)})}(n,e,t);return new qd(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>sE(n,m)),l}}const r=function U1(n){return new jf(new Zu.X(n.url),new Zu.X(n.params),new Zu.X(n.queryParams),new Zu.X(n.fragment),new Zu.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>sE(n,u));return new qd(r,o)}}const fA="ngNavigationCancelingError";function xx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Jg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Nx(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Nx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[fA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Rx(n){return Ox(n)&&Jg(n.url)}function Ox(n){return n&&n[fA]}let Px=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[hA],encapsulation:2}),n})();function pA(n){const e=n.children&&n.children.map(pA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=Px),t}function Ku(n){return n.outlet||Qt}function oE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class q1{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Vv(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Vv(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Vv(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=Vv(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new R1(u.value.snapshot))}),e.children.length&&this.forwardEvent(new x1(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(lA(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),lA(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=oE(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class kx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class BC{constructor(e,t){this.component=e,this.route=t}}function W1(n,e,t){const r=n._root;return aE(r,e?e._root:null,t,[r.value])}function Uv(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function aE(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Vv(e);return n.children.forEach(l=>{(function K1(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const I=function Y1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qg(n.url,e.url)||!rl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dA(n,e)||!rl(n.queryParams,e.queryParams);default:return!dA(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);I?o.canActivateChecks.push(new kx(r)):(u.data=l.data,u._resolvedData=l._resolvedData),aE(n,e,u.component?m?m.children:null:t,r,o),I&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new BC(m.outlet.component,l))}else l&&uE(e,m,o),o.canActivateChecks.push(new kx(r)),aE(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>uE(m,t.getContext(l),o)),o}function uE(n,e,t){const r=Vv(n),o=n.value;Object.entries(r).forEach(([u,l])=>{uE(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new BC(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function cE(n){return"function"==typeof n}function Fx(n){return n instanceof Bg||"EmptyError"===n?.name}const jC=Symbol("INITIAL_VALUE");function Bv(){return ji(n=>YS(n.map(e=>e.pipe(kf(1),Hr(jC)))).pipe((0,It.U)(e=>{for(const t of e)if(!0!==t){if(t===jC)return jC;if(!1===t||t instanceof Lv)return t}return!0}),fi(e=>e!==jC),kf(1)))}function Lx(n){return(0,zR.z)((0,Rs.b)(e=>{if(Jg(e))throw xx(0,e)}),(0,It.U)(e=>!0===e))}class $C{constructor(e){this.segmentGroup=e||null}}class Vx{constructor(e){this.urlTree=e}}function jv(n){return Zw(new $C(n))}function Ux(n){return Zw(new Vx(n))}class mO{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,_t.of)(r);if(o.numberOfChildren>1||!o.children[Qt])return Zw(new h.vHH(4e3,!1));o=o.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Lv(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,I])=>{l[m]=this.createSegmentGroup(e,I,r,o)}),new kn(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const gA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yO(n,e,t,r,o){const u=mA(n,e,t);return u.matched?(r=function B1(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function fO(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,_t.of)(!0);const u=o.map(l=>{const m=Uv(l,n);return Bf(function nO(n){return n&&cE(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,_t.of)(u).pipe(Bv(),Lx())}(r,e,t).pipe((0,It.U)(l=>!0===l?u:{...gA}))):(0,_t.of)(u)}function mA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||KR)(t,n,e);if(!o)return{...gA};const u={};Object.entries(o.posParams??{}).forEach(([m,I])=>{u[m]=I.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function Bx(n,e,t,r){return t.length>0&&function wO(n,e,t){return t.some(r=>HC(n,e,r)&&Ku(r)!==Qt)}(n,t,r)?{segmentGroup:new kn(e,_O(r,new kn(t,n.children))),slicedSegments:[]}:0===t.length&&function EO(n,e,t){return t.some(r=>HC(n,e,r))}(n,t,r)?{segmentGroup:new kn(n.segments,vO(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new kn(n.segments,n.children),slicedSegments:t}}function vO(n,e,t,r,o){const u={};for(const l of r)if(HC(n,t,l)&&!o[Ku(l)]){const m=new kn([],{});u[Ku(l)]=m}return{...o,...u}}function _O(n,e){const t={};t[Qt]=e;for(const r of n)if(""===r.path&&Ku(r)!==Qt){const o=new kn([],{});t[Ku(r)]=o}return t}function HC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class bO{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new mO(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=Bx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe(Yg(t=>{if(t instanceof Vx)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof $C?this.noMatchError(t):t}),(0,It.U)(t=>{const r=new VC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,{}),o=new qd(r,t),u=new Sx("",o),l=function g1(n,e,t=null,r=null){return mx(gx(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Qt).pipe(Yg(r=>{throw r instanceof $C?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Tx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,wn.D)(o).pipe(Kw(u=>{const l=r.children[u],m=function G1(n,e){const t=n.filter(r=>Ku(r)===e);return t.push(...n.filter(r=>Ku(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),Do((u,l)=>(u.push(...l),u)),jg(null),function qR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fi((o,u)=>n(o,u,r)):Gd.y,JS(1),t?jg(e):Rw(()=>new Bg))}(),(0,Ns.z)(u=>{if(null===u)return jv(r);const l=jx(u);return function TO(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,_t.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,wn.D)(t).pipe(Kw(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(Yg(I=>{if(I instanceof $C)return(0,_t.of)(null);throw I}))),Wu(m=>!!m),Yg(m=>{if(Fx(m))return function DO(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,_t.of)([]):jv(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function IO(n,e,t,r){return!!(Ku(n)===r||r!==Qt&&HC(e,t,n))&&("**"===n.path||mA(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):jv(o):jv(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ux(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Ns.z)(l=>{const m=new kn(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:I,remainingSegments:b,positionalParamSegments:A}=mA(t,o,u);if(!m)return jv(t);const R=this.applyRedirects.applyRedirectCommands(I,o.redirectTo,A);return o.redirectTo.startsWith("/")?Ux(R):this.applyRedirects.lineralizeSegments(o,R).pipe((0,Ns.z)(H=>this.processSegment(e,r,t,H.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const I=o.length>0?ix(o).parameters:{},b=new VC(o,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$x(r),Ku(r),r.component??r._loadedComponent??null,r,Hx(r));m=(0,_t.of)({snapshot:b,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=yO(t,r,o,e).pipe((0,It.U)(({matched:I,consumedSegments:b,remainingSegments:A,parameters:R})=>I?{snapshot:new VC(b,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$x(r),Ku(r),r.component??r._loadedComponent??null,r,Hx(r)),consumedSegments:b,remainingSegments:A}:null));return m.pipe(ji(I=>null===I?jv(t):this.getChildConfig(e=r._injector??e,r,o).pipe(ji(({routes:b})=>{const A=r._loadedInjector??e,{snapshot:R,consumedSegments:H,remainingSegments:X}=I,{segmentGroup:ye,slicedSegments:ke}=Bx(t,H,X,b);if(0===ke.length&&ye.hasChildren())return this.processChildren(A,b,ye).pipe((0,It.U)(vt=>null===vt?null:[new qd(R,vt)]));if(0===b.length&&0===ke.length)return(0,_t.of)([new qd(R,[])]);const Ue=Ku(r)===u;return this.processSegment(A,b,ye,ke,Ue?Qt:u,!0).pipe((0,It.U)(vt=>[new qd(R,vt)]))}))))}getChildConfig(e,t,r){return t.children?(0,_t.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,_t.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function hO(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,_t.of)(!0);const u=o.map(l=>{const m=Uv(l,n);return Bf(function J1(n){return n&&cE(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,_t.of)(u).pipe(Bv(),Lx())}(e,t,r).pipe((0,Ns.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Rs.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function gO(n){return Zw(Nx(!1,3))}())):(0,_t.of)({routes:[],injector:e})}}function SO(n){const e=n.value.routeConfig;return e&&""===e.path}function jx(n){const e=[],t=new Set;for(const r of n){if(!SO(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=jx(r.children);e.push(new qd(r.value,o))}return e.filter(r=>!t.has(r))}function $x(n){return n.data||{}}function Hx(n){return n.resolve||{}}function Gx(n){return"string"==typeof n.title||null===n.title}function yA(n){return ji(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,It.U)(()=>e)):(0,_t.of)(e)})}const $v=new h.OlP("ROUTES");let vA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,_t.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Bf(t.loadComponent()).pipe((0,It.U)(zx),(0,Rs.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),XS(()=>{this.componentLoaders.delete(t)})),o=new nx(r,()=>new Hd.x).pipe(QS());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,_t.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,It.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let I,b;return Array.isArray(m)?b=m:(I=m.create(t).injector,b=I.get($v,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:b.map(pA),injector:I}}),XS(()=>{this.childrenLoaders.delete(r)})),l=new nx(u,()=>new Hd.x).pipe(QS());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Bf(t()).pipe((0,It.U)(zx),(0,Ns.z)(r=>r instanceof h.YKP||Array.isArray(r)?(0,_t.of)(r):(0,wn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zx(n){return function PO(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let GC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Hd.x,this.configLoader=(0,h.f3M)(vA),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(Jw),this.rootContexts=(0,h.f3M)(iE),this.inputBindingEnabled=null!==(0,h.f3M)(UC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_t.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new A1(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new S1(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Zu.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nE,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fi(r=>0!==r.id),(0,It.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ji(r=>{let o=!1,u=!1;return(0,_t.of)(r).pipe((0,Rs.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ji(l=>{const m=t.browserUrlTree.toString(),I=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!I&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new rE(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),qu.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return qx(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,_t.of)(l).pipe(ji(A=>{const R=this.transitions?.getValue();return this.events.next(new sA(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?qu.E:Promise.resolve(A)}),function AO(n,e,t,r,o,u){return(0,Ns.z)(l=>function CO(n,e,t,r,o,u,l="emptyOnly"){return new bO(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,It.U)(({state:m,tree:I})=>({...l,targetSnapshot:m,urlAfterRedirects:I}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Rs.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,r.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const H=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(H,A)}t.browserUrlTree=A.urlAfterRedirects}const R=new I1(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(I&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:R,source:H,restoredState:X,extras:ye}=l,ke=new sA(A,this.urlSerializer.serialize(R),H,X);this.events.next(ke);const Ue=bx(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:Ue,urlAfterRedirects:R,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}},(0,_t.of)(r)}{const A="";return this.events.next(new rE(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),qu.E}}),(0,Rs.b)(l=>{const m=new D1(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,It.U)(l=>r={...l,guards:W1(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function iO(n,e){return(0,Ns.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,_t.of)({...t,guardsResult:!0}):function sO(n,e,t,r){return(0,wn.D)(n).pipe((0,Ns.z)(o=>function dO(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,_t.of)(!0);const l=u.map(m=>{const I=oE(e)??o,b=Uv(m,I);return Bf(function tO(n){return n&&cE(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):I.runInContext(()=>b(n,e,t,r))).pipe(Wu())});return(0,_t.of)(l).pipe(Bv())}(o.component,o.route,t,e,r)),Wu(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Ns.z)(m=>m&&function Q1(n){return"boolean"==typeof n}(m)?function oO(n,e,t,r){return(0,wn.D)(e).pipe(Kw(o=>us(function uO(n,e){return null!==n&&e&&e(new M1(n)),(0,_t.of)(!0)}(o.route.parent,r),function aO(n,e){return null!==n&&e&&e(new N1(n)),(0,_t.of)(!0)}(o.route,r),function lO(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Z1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ex(()=>{const m=l.guards.map(I=>{const b=oE(l.node)??t,A=Uv(I,b);return Bf(function eO(n){return n&&cE(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Wu())});return(0,_t.of)(m).pipe(Bv())}));return(0,_t.of)(u).pipe(Bv())}(n,o.path,t),function cO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,_t.of)(!0);const o=r.map(u=>ex(()=>{const l=oE(e)??t,m=Uv(u,l);return Bf(function X1(n){return n&&cE(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Wu())}));return(0,_t.of)(o).pipe(Bv())}(n,o.route,t))),Wu(o=>!0!==o,!0))}(r,u,n,e):(0,_t.of)(m)),(0,It.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Rs.b)(l=>{if(r.guardsResult=l.guardsResult,Jg(l.guardsResult))throw xx(0,l.guardsResult);const m=new C1(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),fi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),yA(l=>{if(l.guards.canActivateChecks.length)return(0,_t.of)(l).pipe((0,Rs.b)(m=>{const I=new b1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}),ji(m=>{let I=!1;return(0,_t.of)(m).pipe(function MO(n,e){return(0,Ns.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,_t.of)(t);let u=0;return(0,wn.D)(o).pipe(Kw(l=>function xO(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Gx(o)&&(u[Yw]=o.title),function NO(n,e,t,r){const o=function RO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,_t.of)({});const u={};return(0,wn.D)(o).pipe((0,Ns.z)(l=>function OO(n,e,t,r){const o=oE(e)??r,u=Uv(n,o);return Bf(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Wu(),(0,Rs.b)(m=>{u[l]=m}))),JS(1),function WR(n){return(0,It.U)(()=>n)}(u),Yg(l=>Fx(l)?qu.E:Zw(l)))}(u,n,e,r).pipe((0,It.U)(l=>(n._resolvedData=l,n.data=Tx(n,t).resolve,o&&Gx(o)&&(n.data[Yw]=o.title),null)))}(l.route,r,n,e)),(0,Rs.b)(()=>u++),JS(1),(0,Ns.z)(l=>u===o.length?(0,_t.of)(t):qu.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Rs.b)({next:()=>I=!0,complete:()=>{I||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Rs.b)(m=>{const I=new T1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}))}),yA(l=>{const m=I=>{const b=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Rs.b)(A=>{I.component=A}),(0,It.U)(()=>{})));for(const A of I.children)b.push(...m(A));return b};return YS(m(l.targetSnapshot.root)).pipe(jg(),kf(1))}),yA(()=>this.afterPreactivation()),(0,It.U)(l=>{const m=function L1(n,e,t){const r=sE(n,e._root,t?t._root:void 0);return new Cx(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Rs.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,It.U)(o=>(new q1(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),kf(1),(0,Rs.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Xg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),XS(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Yg(l=>{if(u=!0,Ox(l)){Rx(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new LC(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Rx(l)){const I=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||qx(r.source)};t.scheduleNavigation(I,nE,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new oA(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(I){r.reject(I)}}return qu.E}))}))}cancelNavigationTransition(t,r,o){const u=new LC(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qx(n){return n!==nE}let Wx=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[Yw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(kO)},providedIn:"root"}),n})(),kO=(()=>{class n extends Wx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(au))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(VO)},providedIn:"root"}),n})();class LO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let VO=(()=>{class n extends LO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zC=new h.OlP("",{providedIn:"root",factory:()=>({})});let UO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(BO)},providedIn:"root"}),n})(),BO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Wo=(()=>((Wo=Wo||{})[Wo.COMPLETE=0]="COMPLETE",Wo[Wo.FAILED=1]="FAILED",Wo[Wo.REDIRECTING=2]="REDIRECTING",Wo))();function Zx(n,e){n.events.pipe(fi(t=>t instanceof Xg||t instanceof LC||t instanceof oA||t instanceof rE),(0,It.U)(t=>t instanceof Xg||t instanceof rE?Wo.COMPLETE:t instanceof LC&&(0===t.code||1===t.code)?Wo.REDIRECTING:Wo.FAILED),fi(t=>t!==Wo.REDIRECTING),kf(1)).subscribe(()=>{e()})}function jO(n){throw n}function $O(n,e,t){return e.parse("/")}const HO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let La=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(zC,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||jO,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||$O,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(UO),this.routeReuseStrategy=(0,h.f3M)(FO),this.titleStrategy=(0,h.f3M)(Wx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)($v,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(GC),this.urlSerializer=(0,h.f3M)(Jw),this.location=(0,h.f3M)(ze),this.componentInputBindingEnabled=!!(0,h.f3M)(UC,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Lv,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bx(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const I={...o};delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(u.state=I)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:I}=r,b=I?this.currentUrlTree.fragment:l;let R,A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}null!==A&&(A=this.removeEmptyProps(A));try{R=gx(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return mx(R,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Jg(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,nE,null,r)}navigate(t,r={skipLocationChange:!1}){return function zO(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...HO}:!1===r?{...GO}:r,Jg(t))return ox(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ox(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,I,b;l?(m=l.resolve,I=l.reject,b=l.promise):b=new Promise((R,H)=>{m=R,I=H});const A=this.pendingTasks.add();return Zx(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(A))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:I,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hv=(()=>{class n{constructor(t,r,o,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Hd.x;const I=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===I||"area"===I,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof Xg&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(La),h.Y36(jf),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Fe))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class Kx{}let ZO=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(fi(t=>t instanceof Xg),Kw(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,wn.D)(o).pipe((0,Io.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,_t.of)(null);const u=o.pipe((0,Ns.z)(l=>null===l?(0,_t.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,wn.D)([u,l]).pipe((0,Io.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(La),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Kx),h.LFG(vA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _A=new h.OlP("");let Yx=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xg?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof rE&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ix&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ix(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Wd(n,e){return{\u0275kind:n,\u0275providers:e}}function Jx(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(La),o=n.get(Xx);1===n.get(wA)&&r.initialNavigation(),n.get(eN,null,h.XFs.Optional)?.setUpPreloading(),n.get(_A,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Xx=new h.OlP("",{factory:()=>new Hd.x}),wA=new h.OlP("",{providedIn:"root",factory:()=>1}),eN=new h.OlP("");function JO(n){return Wd(0,[{provide:eN,useExisting:ZO},{provide:Kx,useExisting:n}])}const tN=new h.OlP("ROUTER_FORROOT_GUARD"),eP=[ze,{provide:Jw,useClass:eA},La,iE,{provide:jf,useFactory:function Qx(n){return n.routerState.root},deps:[La]},vA,[]];function tP(){return new h.PXZ("Router",La)}let nN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[eP,[],{provide:$v,multi:!0,useValue:t},{provide:tN,useFactory:sP,deps:[[La,new h.FiY,new h.tp0]]},{provide:zC,useValue:r||{}},r?.useHash?{provide:Fe,useClass:Me}:{provide:Fe,useClass:Ye},{provide:_A,useFactory:()=>{const n=(0,h.f3M)(ss),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(zC),r=(0,h.f3M)(GC),o=(0,h.f3M)(Jw);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Yx(o,r,n,e,t)}},r?.preloadingStrategy?JO(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:tP},r?.initialNavigation?oP(r):[],r?.bindToComponentInputs?Wd(8,[Mx,{provide:UC,useExisting:Mx}]).\u0275providers:[],[{provide:rN,useFactory:Jx},{provide:h.tb,multi:!0,useExisting:rN}]]}}static forChild(t){return{ngModule:n,providers:[{provide:$v,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tN,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function sP(n){return"guarded"}function oP(n){return["disabled"===n.initialNavigation?Wd(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(La);return()=>{e.setUpLocationChangeListener()}}},{provide:wA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wd(2,[{provide:wA,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(La),u=e.get(Xx);Zx(o,()=>{r(!0)}),e.get(GC).afterPreactivation=()=>(r(!0),u.closed?(0,_t.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const rN=new h.OlP("");let EA=(()=>{class n{constructor(t){this.afs=t}loadFeatured(){return this.afs.collection("posts",t=>t.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe((0,It.U)(t=>t.map(r=>{const o=r.payload.doc.data();return{id:r.payload.doc.id,data:o}})))}loadLatest(){return this.afs.collection("posts",t=>t.orderBy("createdAt")).snapshotChanges().pipe((0,It.U)(t=>t.map(r=>{const o=r.payload.doc.data();return{id:r.payload.doc.id,data:o}})))}loadCategoryPosts(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe((0,It.U)(r=>r.map(o=>{const u=o.payload.doc.data();return{id:o.payload.doc.id,data:u}})))}loadSinglePost(t){return this.afs.doc(`posts/${t}`).valueChanges()}loadRelatedPosts(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe((0,It.U)(r=>r.map(o=>{const u=o.payload.doc.data();return{id:o.payload.doc.id,data:u}})))}countViews(t){const r={views:OM.Z.firestore.FieldValue.increment(1)};return this.afs.doc(`posts/${t}`).update(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xC))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uP(n,e){1&n&&(h.TgZ(0,"small",9),h._uU(1," Featured "),h.qZA())}const cP=function(n){return["/post",n]};function lP(n,e){if(1&n&&(h.TgZ(0,"div",1),h._UZ(1,"img",2),h.TgZ(2,"div",3)(3,"small",4),h._uU(4),h.qZA(),h.YNc(5,uP,2,0,"small",5),h.TgZ(6,"small",6),h._uU(7),h.qZA(),h.TgZ(8,"h5",7),h._uU(9),h.qZA(),h.TgZ(10,"p"),h._uU(11),h.qZA(),h.TgZ(12,"small",8),h._uU(13),h.ALo(14,"date"),h.qZA()()()),2&n){const t=h.oxw();h.Q6J("routerLink",h.VKq(10,cP,t.postData.id)),h.xp6(1),h.s9C("src",t.postData.data.postImgPath,h.LSH),h.xp6(3),h.hij(" ",t.postData.data.category.category," "),h.xp6(1),h.Q6J("ngIf",t.postData.data.isFeatured),h.xp6(2),h.hij(" Views ",t.postData.data.views," "),h.xp6(2),h.Oqu(t.postData.data.title),h.xp6(2),h.Oqu(t.postData.data.excerpt),h.xp6(2),h.hij(" LAST UPDATED - ",h.lcZ(14,8,t.postData.data.createdAt.toMillis())," ")}}let IA=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ms-3",4,"ngIf"],[1,"bg-light","text-info","text-center","ms-3"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ms-3"],[1,"bg-light","text-success","text-center","ms-3"]],template:function(t,r){1&t&&h.YNc(0,lP,15,12,"div",0),2&t&&h.Q6J("ngIf",r.postData)},dependencies:[Fs,Hv,pn],styles:[".card[_ngcontent-%COMP%]{max-width:400px;min-height:450px}"]}),n})();function dP(n,e){if(1&n&&(h.TgZ(0,"div",9),h._UZ(1,"app-post-card",10),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}function hP(n,e){if(1&n&&(h.TgZ(0,"div",11),h._UZ(1,"app-post-card",10),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}let fP=(()=>{class n{constructor(t){this.postService=t,this.featuredPostArray=[],this.latestPostArray=[]}ngOnInit(){this.postService.loadLatest().subscribe(t=>{this.latestPostArray=t}),this.postService.loadFeatured().subscribe(t=>{this.featuredPostArray=t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(EA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:14,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white","mt-5"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),h._uU(5,"Featured Posts"),h.qZA()(),h.TgZ(6,"div",2),h.YNc(7,dP,2,1,"div",5),h.qZA()()()(),h.TgZ(8,"section",6)(9,"div",7)(10,"h2"),h._uU(11,"Lastet Posts"),h.qZA()(),h.TgZ(12,"div",2),h.YNc(13,hP,2,1,"div",8),h.qZA()()),2&t&&(h.xp6(7),h.Q6J("ngForOf",r.featuredPostArray),h.xp6(6),h.Q6J("ngForOf",r.latestPostArray))},dependencies:[lo,IA],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]}),n})();function pP(n,e){if(1&n&&(h.TgZ(0,"div",7),h._UZ(1,"app-post-card",8),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}let gP=(()=>{class n{constructor(t,r){this.route=t,this.postService=r,this.postsArray=[],this.category={}}ngOnInit(){this.route.paramMap.subscribe(t=>{this.category=t.get("category"),this.postService.loadCategoryPosts(t.get("id")).subscribe(r=>{this.postsArray=r})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(jf),h.Y36(EA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-single-category"]],decls:9,vars:3,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"text-white","mt-5"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),h._uU(3),h.qZA(),h.TgZ(4,"p",3),h._uU(5),h.qZA()()(),h.TgZ(6,"div",4)(7,"div",5),h.YNc(8,pP,2,1,"div",6),h.qZA()()),2&t&&(h.xp6(3),h.hij(" ",r.category,""),h.xp6(2),h.hij(" All ",r.category," Post in the blog. "),h.xp6(3),h.Q6J("ngForOf",r.postsArray))},dependencies:[lo,IA]}),n})(),iN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),em=(()=>{class n extends iN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const sl=new h.OlP("NgValueAccessor"),vP={provide:sl,useExisting:(0,h.Gpc)(()=>qC),multi:!0},wP=new h.OlP("CompositionEventMode");let qC=(()=>{class n extends iN{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _P(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(wP,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([vP]),h.qOj]}),n})();function $f(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const ys=new h.OlP("NgValidators"),Hf=new h.OlP("NgAsyncValidators"),EP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function cN(n){return $f(n.value)?{required:!0}:null}function dN(n){return $f(n.value)||EP.test(n.value)?null:{email:!0}}function WC(n){return null}function gN(n){return null!=n}function mN(n){return(0,h.QGY)(n)?(0,wn.D)(n):n}function yN(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vN(n,e){return e.map(t=>t(n))}function _N(n){return n.map(e=>function IP(n){return!n.validate}(e)?e:t=>e.validate(t))}function DA(n){return null!=n?function wN(n){if(!n)return null;const e=n.filter(gN);return 0==e.length?null:function(t){return yN(vN(t,e))}}(_N(n)):null}function CA(n){return null!=n?function EN(n){if(!n)return null;const e=n.filter(gN);return 0==e.length?null:function(t){return function mP(...n){const e=(0,la.jO)(n),{args:t,keys:r}=YM(n),o=new Ni.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let I=l,b=l;for(let A=0;A<l;A++){let R=!1;(0,Ug.Xf)(t[A]).subscribe((0,gr.x)(u,H=>{R||(R=!0,b--),m[A]=H},()=>I--,void 0,()=>{(!I||!R)&&(b||u.next(r?JM(r,m):m),u.complete())}))}});return e?o.pipe(QM(e)):o}(vN(t,e).map(mN)).pipe((0,It.U)(yN))}}(_N(n)):null}function IN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bA(n){return n?Array.isArray(n)?n:[n]:[]}function ZC(n,e){return Array.isArray(n)?n.includes(e):n===e}function bN(n,e){const t=bA(e);return bA(n).forEach(o=>{ZC(t,o)||t.push(o)}),t}function TN(n,e){return bA(e).filter(t=>!ZC(n,t))}class SN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=CA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Os extends SN{get formDirective(){return null}get path(){return null}}class Gf extends SN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class AN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let MN=(()=>{class n extends AN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),TA=(()=>{class n extends AN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Os,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const lE="VALID",YC="INVALID",Gv="PENDING",dE="DISABLED";function MA(n){return(QC(n)?n.validators:n)||null}function xA(n,e){return(QC(e)?e.asyncValidators:n)||null}function QC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ON{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lE}get invalid(){return this.status===YC}get pending(){return this.status==Gv}get disabled(){return this.status===dE}get enabled(){return this.status!==dE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TN(e,this._rawAsyncValidators))}hasValidator(e){return ZC(this._rawValidators,e)}hasAsyncValidator(e){return ZC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Gv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lE||this.status===Gv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dE:lE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Gv,this._hasOwnPendingAsyncValidator=!0;const t=mN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?dE:this.errors?YC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gv)?Gv:this._anyControlsHaveStatus(YC)?YC:lE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){QC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function TP(n){return Array.isArray(n)?DA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function SP(n){return Array.isArray(n)?CA(n):n||null}(this._rawAsyncValidators)}}class NA extends ON{constructor(e,t,r){super(MA(t),xA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function RN(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function NN(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const zv=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>JC}),JC="always";function hE(n,e,t=JC){RA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function xP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PN(n,e)})}(n,e),function RP(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function NP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function MP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function tb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function RA(n,e){const t=function DN(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(IN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function CN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(IN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();tb(e._rawValidators,o),tb(e._rawAsyncValidators,o)}function PN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const LP={provide:Os,useExisting:(0,h.Gpc)(()=>pE)},fE=(()=>Promise.resolve())();let pE=(()=>{class n extends Os{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new NA({},DA(t),CA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),hE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fE.then(()=>{const r=this._findContainer(t.path),o=new NA({});(function kN(n,e){RA(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function FN(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ys,10),h.Y36(Hf,10),h.Y36(zv,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([LP]),h.qOj]}),n})();function LN(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function VN(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const UN=class extends ON{constructor(e=null,t,r){super(MA(t),xA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),QC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=VN(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){VN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},BP={provide:Gf,useExisting:(0,h.Gpc)(()=>FA)},$N=(()=>Promise.resolve())();let FA=(()=>{class n extends Gf{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new UN,this._registered=!1,this.name="",this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function kA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===qC?t=u:function kP(n){return Object.getPrototypeOf(n.constructor)===em}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function PA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){$N.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);$N.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function XC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Os,9),h.Y36(ys,10),h.Y36(Hf,10),h.Y36(sl,10),h.Y36(h.sBO,8),h.Y36(zv,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([BP]),h.qOj,h.TTD]}),n})(),LA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),GN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),tm=(()=>{class n{constructor(){this._validator=WC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):WC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const ik={provide:ys,useExisting:(0,h.Gpc)(()=>rb),multi:!0};let rb=(()=>{class n extends tm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>cN}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([ik]),h.qOj]}),n})();const ok={provide:ys,useExisting:(0,h.Gpc)(()=>HA),multi:!0};let HA=(()=>{class n extends tm{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=h.D6c,this.createValidator=t=>dN}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[h._Bn([ok]),h.qOj]}),n})(),lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[GN]}),n})(),hk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zv,useValue:t.callSetDisabledState??JC}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[lk]}),n})(),fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-comment-form"]],decls:18,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],[1,"form-group"],["for","",1,"m-2"],["type","text","placeholder","Enter your name here",1,"form-control","shadow-effect"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"mt-3"],[1,"btn","btn-info","btn-theme"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h4"),h._uU(3,"Leave a Comment"),h.qZA(),h.TgZ(4,"p"),h._uU(5,"You can leave a comment using this comment form"),h.qZA(),h.TgZ(6,"form")(7,"div",2)(8,"label",3),h._uU(9,"Name"),h.qZA(),h._UZ(10,"input",4),h.qZA(),h.TgZ(11,"div",2)(12,"label",3),h._uU(13,"Comment"),h.qZA(),h._UZ(14,"textarea",5),h.qZA(),h.TgZ(15,"div",6)(16,"button",7),h._uU(17,"Add a Comment"),h.qZA()()()()())},dependencies:[LA,TA,pE]}),n})(),pk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-comment-list"]],decls:16,vars:0,consts:[[1,"card","mb-5","mt-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],["href","#",1,"card-link"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),h._uU(3," Comments (742,734) "),h.qZA(),h.TgZ(4,"div",3)(5,"h6",4),h._uU(6,"jhon doe"),h.qZA(),h.TgZ(7,"small",5),h._uU(8,"hello from the other side"),h.qZA(),h.TgZ(9,"div",2),h._uU(10," sdjijksdjjjsj fjjsffsdhf sdjnjfnjsdnf jnsdjfnjsjf jnjndfjsn "),h.qZA(),h.TgZ(11,"a",6),h._uU(12," Reply "),h.qZA(),h.TgZ(13,"a",6),h._uU(14," View Reply "),h.qZA(),h._UZ(15,"hr"),h.qZA()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]}),n})();function gk(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1," Featured "),h.qZA())}function mk(n,e){if(1&n&&(h.TgZ(0,"div",6),h._UZ(1,"img",7),h.TgZ(2,"div",8)(3,"small",9),h._uU(4),h.qZA(),h.YNc(5,gk,2,0,"small",10),h.TgZ(6,"small",11),h._uU(7),h.qZA(),h.TgZ(8,"small",12),h._uU(9),h.ALo(10,"date"),h.qZA(),h.TgZ(11,"h1",13),h._uU(12),h.qZA(),h._UZ(13,"p",14),h.qZA()()),2&n){const t=h.oxw();h.xp6(1),h.s9C("src",t.postData.postImgPath,h.LSH),h.xp6(3),h.hij(" ",t.postData.category.category," "),h.xp6(1),h.Q6J("ngIf",t.postData.isFeatured),h.xp6(2),h.hij(" Views - ",t.postData.views," "),h.xp6(2),h.hij(" LAST UPDATED - ",h.lcZ(10,7,t.postData.createdAt.toMillis())," "),h.xp6(3),h.hij(" ",t.postData.title," "),h.xp6(1),h.Q6J("innerHTML",t.postData.content,h.oJD)}}function yk(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"app-post-card",16),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("postData",t)}}const vk=[{path:"",component:fP},{path:"category/:category/:id",component:gP},{path:"post/:id",component:(()=>{class n{constructor(t,r){this.postService=t,this.route=r}ngOnInit(){this.route.params.subscribe(t=>{this.postService.countViews(t.id),this.postService.loadSinglePost(t.id).subscribe(r=>{this.postData=r,this.loadRelatedPosts(this.postData.category.categoryId)})})}loadRelatedPosts(t){this.postService.loadRelatedPosts(t).subscribe(r=>{this.simmilarPostsArray=r})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(EA),h.Y36(jf))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-single-post"]],decls:8,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-9","mt-5"],["class","card shadow-effect",4,"ngIf"],[1,"col-md-3","mt-5"],[4,"ngFor","ngForOf"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ms-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ms-2"],[1,"bg-light","text-warning","text-center","ms-2"],[1,"mt-3","mb-3"],[3,"innerHTML"],[1,"bg-light","text-success","text-center","ms-2"],[3,"postData"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.YNc(3,mk,14,9,"div",3),h._UZ(4,"app-comment-form")(5,"app-comment-list"),h.qZA(),h.TgZ(6,"div",4),h.YNc(7,yk,2,1,"div",5),h.qZA()()()),2&t&&(h.xp6(3),h.Q6J("ngIf",r.postData),h.xp6(4),h.Q6J("ngForOf",r.simmilarPostsArray))},dependencies:[lo,Fs,fk,pk,IA,pn]}),n})()},{path:"about",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-about-us"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3," About Us "),h.qZA(),h.TgZ(4,"div",3)(5,"p"),h._uU(6,"In the first part of J.R.R. Tolkien's epic masterpiece, The Lord of the Rings, a shy young hobbit named Frodo Baggins inherits a simple gold ring."),h.qZA(),h.TgZ(7,"p"),h._uU(8,"In the first part of J.R.R. Tolkien's epic masterpiece, The Lord of the Rings, a shy young hobbit named Frodo Baggins inherits a simple gold ring."),h.qZA(),h.TgZ(9,"p"),h._uU(10,"In the first part of J.R.R. Tolkien's epic masterpiece, The Lord of the Rings, a shy young hobbit named Frodo Baggins inherits a simple gold ring."),h.qZA(),h.TgZ(11,"div",4)(12,"button",5),h._uU(13," Back to Home"),h.qZA()()()()())}}),n})()},{path:"terms-condition",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-terms-and-condition"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),h._uU(3," Terms & Condition"),h.qZA(),h.TgZ(4,"div",3)(5,"p"),h._uU(6,"In the first part of J.R.R. Tolkien's epic masterpiece, The Lord of the Rings, a shy young hobbit named Frodo Baggins inherits a simple gold ring."),h.qZA(),h.TgZ(7,"p"),h._uU(8,"In the first part of J.R.R. Tolkien's epic masterpiece, The Lord of the Rings, a shy young hobbit named Frodo Baggins inherits a simple gold ring."),h.qZA(),h.TgZ(9,"p"),h._uU(10,"In the first part of J.R.R. Tolkien's epic masterpiece, The Lord of the Rings, a shy young hobbit named Frodo Baggins inherits a simple gold ring."),h.qZA(),h.TgZ(11,"div",4)(12,"button",5),h._uU(13," Back to Home"),h.qZA()()()()())}}),n})()},{path:"contact",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-contact-us"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"contact-us works!"),h.qZA())}}),n})()}];let _k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[nN.forRoot(vk),nN]}),n})(),wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["routerLink","/",1,"site-logo"]],template:function(t,r){1&t&&(h.TgZ(0,"header",0)(1,"div",1)(2,"a",2),h._uU(3,"NOVELS-BLOG"),h.qZA()()())},dependencies:[Hv],styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{font-size:1.5em}"]}),n})(),Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(t,r){1&t&&(h.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),h._uU(5,"NOVELS-BLOG"),h.qZA(),h.TgZ(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),h._uU(10,"Home"),h.qZA()(),h.TgZ(11,"li",5)(12,"a",6),h._uU(13,"About"),h.qZA()(),h.TgZ(14,"li",5)(15,"a",6),h._uU(16,"Terms & Conditions"),h.qZA()(),h.TgZ(17,"li",5)(18,"a",6),h._uU(19,"Contact"),h.qZA()()()(),h.TgZ(20,"p",7),h._uU(21,"Copyright \xa9 2021 Angular Blogsite"),h.qZA()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]}),n})(),Ik=(()=>{class n{constructor(t){this.afs=t}addSubs(t){this.afs.collection("subscribers").add(t).then(()=>{console.log("Subscribed")}).catch(r=>{console.log(r)})}checkSubs(t){return this.afs.collection("subscribers",r=>r.where("email","==",t)).get()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xC))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dk(n,e){1&n&&(h.TgZ(0,"div",7),h._uU(1," Email is already in use "),h.qZA())}function Ck(n,e){1&n&&(h.TgZ(0,"div",8),h._uU(1," Thank you for subscribing "),h.qZA())}function bk(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1," Name is Required"),h.qZA())}function Tk(n,e){if(1&n&&(h.TgZ(0,"div",19),h.YNc(1,bk,2,0,"div",20),h.qZA()),2&n){h.oxw();const t=h.MAs(4);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function Sk(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1," Email is Required"),h.qZA())}function Ak(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1," Email is Invalid"),h.qZA())}function Mk(n,e){if(1&n&&(h.TgZ(0,"div",19),h.YNc(1,Sk,2,0,"div",20),h.YNc(2,Ak,2,0,"div",20),h.qZA()),2&n){h.oxw();const t=h.MAs(8);h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.errors?null:t.errors.email)}}const aR=function(n){return{"is-invalid":n}};function xk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"form",9,10),h.NdJ("ngSubmit",function(){h.CHM(t);const o=h.MAs(1),u=h.oxw();return h.KtG(u.onSubmit(o.value))}),h.TgZ(2,"div",11),h._UZ(3,"input",12,13),h.YNc(5,Tk,2,1,"div",14),h.qZA(),h.TgZ(6,"div",11),h._UZ(7,"input",15,16),h.YNc(9,Mk,3,2,"div",14),h.qZA(),h.TgZ(10,"div",17)(11,"button",18),h._uU(12,"SUBSCRIBE"),h.qZA()()()}if(2&n){const t=h.MAs(1),r=h.MAs(4),o=h.MAs(8);h.xp6(3),h.Q6J("ngClass",h.VKq(5,aR,r.touched&&r.invalid)),h.xp6(2),h.Q6J("ngIf",r.touched&&r.invalid),h.xp6(2),h.Q6J("ngClass",h.VKq(7,aR,o.touched&&o.invalid)),h.xp6(2),h.Q6J("ngIf",o.touched&&o.invalid),h.xp6(2),h.Q6J("disabled",t.invalid)}}let Nk=(()=>{class n{constructor(t){this.subService=t,this.isEmailValid=!0,this.isSubscribed=!1}ngOnInit(){}onSubmit(t){const r={email:t.email,name:t.name};this.subService.checkSubs(t.email).subscribe(o=>{o.empty?(this.subService.addSubs(r),this.isEmailValid=!0,this.isSubscribed=!0):(this.isEmailValid=!1,this.isSubscribed=!1)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ik))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-subscription-form"]],decls:10,vars:3,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["class","form-inline mb-5 mt-5 row",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-info","mt-3"],[1,"form-inline","mb-5","mt-5","row",3,"ngSubmit"],["subForm","ngForm"],[1,"form-group","col-md-5"],["type","text","placeholder","Your Name","name","name","ngModel","","required","",1,"form-control","shadow-effect",3,"ngClass"],["Name","ngModel"],["class","text-danger",4,"ngIf"],["type","email","placeholder","Email Address","name","email","ngModel","","required","","email","",1,"form-control","shadow-effect",3,"ngClass"],["Email","ngModel"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),h._uU(4,"SUBSCRIPTION FORM"),h.qZA(),h.TgZ(5,"p",3),h._uU(6," lorem ipsum dolor sit , amet consctetur adipisicing"),h.qZA(),h.YNc(7,Dk,2,0,"div",4),h.YNc(8,Ck,2,0,"div",5),h.YNc(9,xk,13,9,"form",6),h.qZA()()()),2&t&&(h.xp6(7),h.Q6J("ngIf",!r.isEmailValid),h.xp6(1),h.Q6J("ngIf",r.isSubscribed),h.xp6(1),h.Q6J("ngIf",!r.isSubscribed))},dependencies:[Jr,Fs,LA,qC,MN,TA,rb,HA,FA,pE],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:1140}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}.sub-text[_ngcontent-%COMP%]{width:500px}"]}),n})(),Rk=(()=>{class n{constructor(t){this.afs=t}loadData(){return this.afs.collection("categories").snapshotChanges().pipe((0,It.U)(t=>t.map(r=>{const o=r.payload.doc.data();return{id:r.payload.doc.id,data:o}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xC))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ok=function(n,e){return["/category",n,e]};function Pk(n,e){if(1&n&&(h.TgZ(0,"ul",4)(1,"li",5)(2,"a",6),h._uU(3),h.qZA()()()),2&n){const t=e.$implicit;h.xp6(2),h.Q6J("routerLink",h.WLB(2,Ok,t.data.category,t.id)),h.xp6(1),h.hij(" ",t.data.category," ")}}let kk=(()=>{class n{constructor(t){this.categoryService=t,this.categoryArray=[]}ngOnInit(){this.categoryService.loadData().subscribe(t=>{this.categoryArray=t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rk))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ms-3"],["href","",1,"nav-link",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"div",2),h.YNc(3,Pk,4,5,"ul",3),h.qZA()()()),2&t&&(h.xp6(3),h.Q6J("ngForOf",r.categoryArray))},dependencies:[lo,Hv],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]}),n})(),Fk=(()=>{class n{constructor(){this.title="novels-blog-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(t,r){1&t&&(h._UZ(0,"app-header")(1,"app-category-navbar"),h.TgZ(2,"div",0),h._UZ(3,"router-outlet"),h.qZA(),h.TgZ(4,"div",1)(5,"div",2),h._UZ(6,"app-subscription-form"),h.qZA()(),h._UZ(7,"app-footer"))},dependencies:[hA,wk,Ek,Nk,kk],styles:[".app-body[_ngcontent-%COMP%]{min-height:45vh;margin-top:100px}"]}),n})(),Lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[Fk]}),n.\u0275inj=h.cJS({imports:[wo,_k,cr.hO.initializeApp(ca_firebaseConfig),PR,hk]}),n})();gh().bootstrapModule(Lk).catch(n=>console.error(n))},1135:(at,Ee,O)=>{O.d(Ee,{X:()=>q});var h=O(7579);class q extends h.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const ne=super._subscribe(J);return!ne.closed&&J.next(this._value),ne}getValue(){const{hasError:J,thrownError:ne,_value:de}=this;if(J)throw ne;return this._throwIfClosed(),de}next(J){super.next(this._value=J)}}},9751:(at,Ee,O)=>{O.d(Ee,{y:()=>Pe});var h=O(2961),q=O(727),P=O(8822),J=O(9635),ne=O(2416),de=O(576),pe=O(2806);let Pe=(()=>{class Q{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Ye=new Q;return Ye.source=this,Ye.operator=Ce,Ye}subscribe(Ce,Ye,Me){const ze=function j(Q){return Q&&Q instanceof h.Lv||function V(Q){return Q&&(0,de.m)(Q.next)&&(0,de.m)(Q.error)&&(0,de.m)(Q.complete)}(Q)&&(0,q.Nn)(Q)}(Ce)?Ce:new h.Hp(Ce,Ye,Me);return(0,pe.x)(()=>{const{operator:Oe,source:gt}=this;ze.add(Oe?Oe.call(ze,gt):gt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Ye){Ce.error(Ye)}}forEach(Ce,Ye){return new(Ye=he(Ye))((Me,ze)=>{const Oe=new h.Hp({next:gt=>{try{Ce(gt)}catch(ut){ze(ut),Oe.unsubscribe()}},error:ze,complete:Me});this.subscribe(Oe)})}_subscribe(Ce){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ce)}[P.L](){return this}pipe(...Ce){return(0,J.U)(Ce)(this)}toPromise(Ce){return new(Ce=he(Ce))((Ye,Me)=>{let ze;this.subscribe(Oe=>ze=Oe,Oe=>Me(Oe),()=>Ye(ze))})}}return Q.create=Fe=>new Q(Fe),Q})();function he(Q){var Fe;return null!==(Fe=Q??ne.config.Promise)&&void 0!==Fe?Fe:Promise}},7579:(at,Ee,O)=>{O.d(Ee,{x:()=>pe});var h=O(9751),q=O(727);const J=(0,O(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),de=O(2806);let pe=(()=>{class he extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new Pe(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new J}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Fe,observers:Ce}=this;return Q||Fe?q.Lc:(this.currentObservers=null,Ce.push(j),new q.w0(()=>{this.currentObservers=null,(0,ne.P)(Ce,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Fe,isStopped:Ce}=this;Q?j.error(Fe):Ce&&j.complete()}asObservable(){const j=new h.y;return j.source=this,j}}return he.create=(V,j)=>new Pe(V,j),he})();class Pe extends pe{constructor(V,j){super(),this.destination=V,this.source=j}next(V){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,V)}error(V){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,V)}complete(){var V,j;null===(j=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===j||j.call(V)}_subscribe(V){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(V))&&void 0!==Q?Q:q.Lc}}},2961:(at,Ee,O)=>{O.d(Ee,{Hp:()=>Me,Lv:()=>Q});var h=O(576),q=O(727),P=O(2416),J=O(7849);function ne(){}const de=he("C",void 0,void 0);function he(te,ge,K){return{kind:te,value:ge,error:K}}var V=O(3410),j=O(2806);class Q extends q.w0{constructor(ge){super(),this.isStopped=!1,ge?(this.destination=ge,(0,q.Nn)(ge)&&ge.add(this)):this.destination=ut}static create(ge,K,fe){return new Me(ge,K,fe)}next(ge){this.isStopped?gt(function Pe(te){return he("N",te,void 0)}(ge),this):this._next(ge)}error(ge){this.isStopped?gt(function pe(te){return he("E",void 0,te)}(ge),this):(this.isStopped=!0,this._error(ge))}complete(){this.isStopped?gt(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ge){this.destination.next(ge)}_error(ge){try{this.destination.error(ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Ce(te,ge){return Fe.call(te,ge)}class Ye{constructor(ge){this.partialObserver=ge}next(ge){const{partialObserver:K}=this;if(K.next)try{K.next(ge)}catch(fe){ze(fe)}}error(ge){const{partialObserver:K}=this;if(K.error)try{K.error(ge)}catch(fe){ze(fe)}else ze(ge)}complete(){const{partialObserver:ge}=this;if(ge.complete)try{ge.complete()}catch(K){ze(K)}}}class Me extends Q{constructor(ge,K,fe){let Te;if(super(),(0,h.m)(ge)||!ge)Te={next:ge??void 0,error:K??void 0,complete:fe??void 0};else{let Le;this&&P.config.useDeprecatedNextContext?(Le=Object.create(ge),Le.unsubscribe=()=>this.unsubscribe(),Te={next:ge.next&&Ce(ge.next,Le),error:ge.error&&Ce(ge.error,Le),complete:ge.complete&&Ce(ge.complete,Le)}):Te=ge}this.destination=new Ye(Te)}}function ze(te){P.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(te):(0,J.h)(te)}function gt(te,ge){const{onStoppedNotification:K}=P.config;K&&V.z.setTimeout(()=>K(te,ge))}const ut={closed:!0,next:ne,error:function Oe(te){throw te},complete:ne}},727:(at,Ee,O)=>{O.d(Ee,{Lc:()=>de,w0:()=>ne,Nn:()=>pe});var h=O(576);const P=(0,O(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Fe)=>`${Fe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var J=O(8737);class ne{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ce of j)Ce.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(Ce){V=Ce instanceof P?Ce.errors:[Ce]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Ce of Fe)try{Pe(Ce)}catch(Ye){V=V??[],Ye instanceof P?V=[...V,...Ye.errors]:V.push(Ye)}}if(V)throw new P(V)}}add(V){var j;if(V&&V!==this)if(this.closed)Pe(V);else{if(V instanceof ne){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(V)}}_hasParent(V){const{_parentage:j}=this;return j===V||Array.isArray(j)&&j.includes(V)}_addParent(V){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(V),j):j?[j,V]:V}_removeParent(V){const{_parentage:j}=this;j===V?this._parentage=null:Array.isArray(j)&&(0,J.P)(j,V)}remove(V){const{_finalizers:j}=this;j&&(0,J.P)(j,V),V instanceof ne&&V._removeParent(this)}}ne.EMPTY=(()=>{const he=new ne;return he.closed=!0,he})();const de=ne.EMPTY;function pe(he){return he instanceof ne||he&&"closed"in he&&(0,h.m)(he.remove)&&(0,h.m)(he.add)&&(0,h.m)(he.unsubscribe)}function Pe(he){(0,h.m)(he)?he():he.unsubscribe()}},2416:(at,Ee,O)=>{O.d(Ee,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ee,O)=>{O.d(Ee,{E:()=>q});const q=new(O(9751).y)(ne=>ne.complete())},8996:(at,Ee,O)=>{O.d(Ee,{D:()=>ge});var h=O(8421),q=O(5363),P=O(9468),de=O(9751),Pe=O(2202),he=O(576),V=O(9672);function Q(K,fe){if(!K)throw new Error("Iterable cannot be null");return new de.y(Te=>{(0,V.f)(Te,fe,()=>{const Le=K[Symbol.asyncIterator]();(0,V.f)(Te,fe,()=>{Le.next().then(ie=>{ie.done?Te.complete():Te.next(ie.value)})},0,!0)})})}var Fe=O(3670),Ce=O(8239),Ye=O(1144),Me=O(6495),ze=O(2206),Oe=O(4532),gt=O(3260);function ge(K,fe){return fe?function te(K,fe){if(null!=K){if((0,Fe.c)(K))return function J(K,fe){return(0,h.Xf)(K).pipe((0,P.R)(fe),(0,q.Q)(fe))}(K,fe);if((0,Ye.z)(K))return function pe(K,fe){return new de.y(Te=>{let Le=0;return fe.schedule(function(){Le===K.length?Te.complete():(Te.next(K[Le++]),Te.closed||this.schedule())})})}(K,fe);if((0,Ce.t)(K))return function ne(K,fe){return(0,h.Xf)(K).pipe((0,P.R)(fe),(0,q.Q)(fe))}(K,fe);if((0,ze.D)(K))return Q(K,fe);if((0,Me.T)(K))return function j(K,fe){return new de.y(Te=>{let Le;return(0,V.f)(Te,fe,()=>{Le=K[Pe.h](),(0,V.f)(Te,fe,()=>{let ie,je;try{({value:ie,done:je}=Le.next())}catch(Ht){return void Te.error(Ht)}je?Te.complete():Te.next(ie)},0,!0)}),()=>(0,he.m)(Le?.return)&&Le.return()})}(K,fe);if((0,gt.L)(K))return function ut(K,fe){return Q((0,gt.Q)(K),fe)}(K,fe)}throw(0,Oe.z)(K)}(K,fe):(0,h.Xf)(K)}},8421:(at,Ee,O)=>{O.d(Ee,{Xf:()=>Fe});var h=O(7582),q=O(1144),P=O(8239),J=O(9751),ne=O(3670),de=O(2206),pe=O(4532),Pe=O(6495),he=O(3260),V=O(576),j=O(7849),Q=O(8822);function Fe(te){if(te instanceof J.y)return te;if(null!=te){if((0,ne.c)(te))return function Ce(te){return new J.y(ge=>{const K=te[Q.L]();if((0,V.m)(K.subscribe))return K.subscribe(ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(te);if((0,q.z)(te))return function Ye(te){return new J.y(ge=>{for(let K=0;K<te.length&&!ge.closed;K++)ge.next(te[K]);ge.complete()})}(te);if((0,P.t)(te))return function Me(te){return new J.y(ge=>{te.then(K=>{ge.closed||(ge.next(K),ge.complete())},K=>ge.error(K)).then(null,j.h)})}(te);if((0,de.D)(te))return Oe(te);if((0,Pe.T)(te))return function ze(te){return new J.y(ge=>{for(const K of te)if(ge.next(K),ge.closed)return;ge.complete()})}(te);if((0,he.L)(te))return function gt(te){return Oe((0,he.Q)(te))}(te)}throw(0,pe.z)(te)}function Oe(te){return new J.y(ge=>{(function ut(te,ge){var K,fe,Te,Le;return(0,h.mG)(this,void 0,void 0,function*(){try{for(K=(0,h.KL)(te);!(fe=yield K.next()).done;)if(ge.next(fe.value),ge.closed)return}catch(ie){Te={error:ie}}finally{try{fe&&!fe.done&&(Le=K.return)&&(yield Le.call(K))}finally{if(Te)throw Te.error}}ge.complete()})})(te,ge).catch(K=>ge.error(K))})}},6451:(at,Ee,O)=>{O.d(Ee,{T:()=>de});var h=O(8189),q=O(8421),P=O(515),J=O(7669),ne=O(8996);function de(...pe){const Pe=(0,J.yG)(pe),he=(0,J._6)(pe,1/0),V=pe;return V.length?1===V.length?(0,q.Xf)(V[0]):(0,h.J)(he)((0,ne.D)(V,Pe)):P.E}},9646:(at,Ee,O)=>{O.d(Ee,{of:()=>P});var h=O(7669),q=O(8996);function P(...J){const ne=(0,h.yG)(J);return(0,q.D)(J,ne)}},5403:(at,Ee,O)=>{O.d(Ee,{x:()=>q});var h=O(2961);function q(J,ne,de,pe,Pe){return new P(J,ne,de,pe,Pe)}class P extends h.Lv{constructor(ne,de,pe,Pe,he,V){super(ne),this.onFinalize=he,this.shouldUnsubscribe=V,this._next=de?function(j){try{de(j)}catch(Q){ne.error(Q)}}:super._next,this._error=Pe?function(j){try{Pe(j)}catch(Q){ne.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},1884:(at,Ee,O)=>{O.d(Ee,{x:()=>J});var h=O(4671),q=O(4482),P=O(5403);function J(de,pe=h.y){return de=de??ne,(0,q.e)((Pe,he)=>{let V,j=!0;Pe.subscribe((0,P.x)(he,Q=>{const Fe=pe(Q);(j||!de(V,Fe))&&(j=!1,V=Fe,he.next(Q))}))})}function ne(de,pe){return de===pe}},4004:(at,Ee,O)=>{O.d(Ee,{U:()=>P});var h=O(4482),q=O(5403);function P(J,ne){return(0,h.e)((de,pe)=>{let Pe=0;de.subscribe((0,q.x)(pe,he=>{pe.next(J.call(ne,he,Pe++))}))})}},8189:(at,Ee,O)=>{O.d(Ee,{J:()=>P});var h=O(5577),q=O(4671);function P(J=1/0){return(0,h.z)(q.y,J)}},5577:(at,Ee,O)=>{O.d(Ee,{z:()=>Pe});var h=O(4004),q=O(8421),P=O(4482),J=O(9672),ne=O(5403),pe=O(576);function Pe(he,V,j=1/0){return(0,pe.m)(V)?Pe((Q,Fe)=>(0,h.U)((Ce,Ye)=>V(Q,Ce,Fe,Ye))((0,q.Xf)(he(Q,Fe))),j):("number"==typeof V&&(j=V),(0,P.e)((Q,Fe)=>function de(he,V,j,Q,Fe,Ce,Ye,Me){const ze=[];let Oe=0,gt=0,ut=!1;const te=()=>{ut&&!ze.length&&!Oe&&V.complete()},ge=fe=>Oe<Q?K(fe):ze.push(fe),K=fe=>{Ce&&V.next(fe),Oe++;let Te=!1;(0,q.Xf)(j(fe,gt++)).subscribe((0,ne.x)(V,Le=>{Fe?.(Le),Ce?ge(Le):V.next(Le)},()=>{Te=!0},void 0,()=>{if(Te)try{for(Oe--;ze.length&&Oe<Q;){const Le=ze.shift();Ye?(0,J.f)(V,Ye,()=>K(Le)):K(Le)}te()}catch(Le){V.error(Le)}}))};return he.subscribe((0,ne.x)(V,ge,()=>{ut=!0,te()})),()=>{Me?.()}}(Q,Fe,he,j)))}},5363:(at,Ee,O)=>{O.d(Ee,{Q:()=>J});var h=O(9672),q=O(4482),P=O(5403);function J(ne,de=0){return(0,q.e)((pe,Pe)=>{pe.subscribe((0,P.x)(Pe,he=>(0,h.f)(Pe,ne,()=>Pe.next(he),de),()=>(0,h.f)(Pe,ne,()=>Pe.complete(),de),he=>(0,h.f)(Pe,ne,()=>Pe.error(he),de)))})}},3099:(at,Ee,O)=>{O.d(Ee,{B:()=>ne});var h=O(8421),q=O(7579),P=O(2961),J=O(4482);function ne(pe={}){const{connector:Pe=(()=>new q.x),resetOnError:he=!0,resetOnComplete:V=!0,resetOnRefCountZero:j=!0}=pe;return Q=>{let Fe,Ce,Ye,Me=0,ze=!1,Oe=!1;const gt=()=>{Ce?.unsubscribe(),Ce=void 0},ut=()=>{gt(),Fe=Ye=void 0,ze=Oe=!1},te=()=>{const ge=Fe;ut(),ge?.unsubscribe()};return(0,J.e)((ge,K)=>{Me++,!Oe&&!ze&&gt();const fe=Ye=Ye??Pe();K.add(()=>{Me--,0===Me&&!Oe&&!ze&&(Ce=de(te,j))}),fe.subscribe(K),!Fe&&Me>0&&(Fe=new P.Hp({next:Te=>fe.next(Te),error:Te=>{Oe=!0,gt(),Ce=de(ut,he,Te),fe.error(Te)},complete:()=>{ze=!0,gt(),Ce=de(ut,V),fe.complete()}}),(0,h.Xf)(ge).subscribe(Fe))})(Q)}}function de(pe,Pe,...he){if(!0===Pe)return void pe();if(!1===Pe)return;const V=new P.Hp({next:()=>{V.unsubscribe(),pe()}});return(0,h.Xf)(Pe(...he)).subscribe(V)}},9468:(at,Ee,O)=>{O.d(Ee,{R:()=>q});var h=O(4482);function q(P,J=0){return(0,h.e)((ne,de)=>{de.add(P.schedule(()=>ne.subscribe(de),J))})}},8505:(at,Ee,O)=>{O.d(Ee,{b:()=>ne});var h=O(576),q=O(4482),P=O(5403),J=O(4671);function ne(de,pe,Pe){const he=(0,h.m)(de)||pe||Pe?{next:de,error:pe,complete:Pe}:de;return he?(0,q.e)((V,j)=>{var Q;null===(Q=he.subscribe)||void 0===Q||Q.call(he);let Fe=!0;V.subscribe((0,P.x)(j,Ce=>{var Ye;null===(Ye=he.next)||void 0===Ye||Ye.call(he,Ce),j.next(Ce)},()=>{var Ce;Fe=!1,null===(Ce=he.complete)||void 0===Ce||Ce.call(he),j.complete()},Ce=>{var Ye;Fe=!1,null===(Ye=he.error)||void 0===Ye||Ye.call(he,Ce),j.error(Ce)},()=>{var Ce,Ye;Fe&&(null===(Ce=he.unsubscribe)||void 0===Ce||Ce.call(he)),null===(Ye=he.finalize)||void 0===Ye||Ye.call(he)}))}):J.y}},4408:(at,Ee,O)=>{O.d(Ee,{o:()=>ne});var h=O(727);class q extends h.w0{constructor(pe,Pe){super()}schedule(pe,Pe=0){return this}}const P={setInterval(de,pe,...Pe){const{delegate:he}=P;return he?.setInterval?he.setInterval(de,pe,...Pe):setInterval(de,pe,...Pe)},clearInterval(de){const{delegate:pe}=P;return(pe?.clearInterval||clearInterval)(de)},delegate:void 0};var J=O(8737);class ne extends q{constructor(pe,Pe){super(pe,Pe),this.scheduler=pe,this.work=Pe,this.pending=!1}schedule(pe,Pe=0){var he;if(this.closed)return this;this.state=pe;const V=this.id,j=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(j,V,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(j,this.id,Pe),this}requestAsyncId(pe,Pe,he=0){return P.setInterval(pe.flush.bind(pe,this),he)}recycleAsyncId(pe,Pe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Pe;null!=Pe&&P.clearInterval(Pe)}execute(pe,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(pe,Pe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Pe){let V,he=!1;try{this.work(pe)}catch(j){he=!0,V=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:pe,scheduler:Pe}=this,{actions:he}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(he,this),null!=pe&&(this.id=this.recycleAsyncId(Pe,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ee,O)=>{O.d(Ee,{v:()=>P});var h=O(6063);class q{constructor(ne,de=q.now){this.schedulerActionCtor=ne,this.now=de}schedule(ne,de=0,pe){return new this.schedulerActionCtor(this,ne).schedule(pe,de)}}q.now=h.l.now;class P extends q{constructor(ne,de=q.now){super(ne,de),this.actions=[],this._active=!1}flush(ne){const{actions:de}=this;if(this._active)return void de.push(ne);let pe;this._active=!0;do{if(pe=ne.execute(ne.state,ne.delay))break}while(ne=de.shift());if(this._active=!1,pe){for(;ne=de.shift();)ne.unsubscribe();throw pe}}}},4986:(at,Ee,O)=>{O.d(Ee,{z:()=>P});var h=O(4408);const P=new(O(7565).v)(h.o)},6063:(at,Ee,O)=>{O.d(Ee,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(at,Ee,O)=>{O.d(Ee,{z:()=>h});const h={setTimeout(q,P,...J){const{delegate:ne}=h;return ne?.setTimeout?ne.setTimeout(q,P,...J):setTimeout(q,P,...J)},clearTimeout(q){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(q)},delegate:void 0}},2202:(at,Ee,O)=>{O.d(Ee,{h:()=>q});const q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ee,O)=>{O.d(Ee,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Ee,O)=>{O.d(Ee,{_6:()=>de,jO:()=>J,yG:()=>ne});var h=O(576);function P(pe){return pe[pe.length-1]}function J(pe){return(0,h.m)(P(pe))?pe.pop():void 0}function ne(pe){return function q(pe){return pe&&(0,h.m)(pe.schedule)}(P(pe))?pe.pop():void 0}function de(pe,Pe){return"number"==typeof P(pe)?pe.pop():Pe}},8737:(at,Ee,O)=>{function h(q,P){if(q){const J=q.indexOf(P);0<=J&&q.splice(J,1)}}O.d(Ee,{P:()=>h})},3888:(at,Ee,O)=>{function h(q){const J=q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}O.d(Ee,{d:()=>h})},2806:(at,Ee,O)=>{O.d(Ee,{O:()=>J,x:()=>P});var h=O(2416);let q=null;function P(ne){if(h.config.useDeprecatedSynchronousErrorHandling){const de=!q;if(de&&(q={errorThrown:!1,error:null}),ne(),de){const{errorThrown:pe,error:Pe}=q;if(q=null,pe)throw Pe}}else ne()}function J(ne){h.config.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=ne)}},9672:(at,Ee,O)=>{function h(q,P,J,ne=0,de=!1){const pe=P.schedule(function(){J(),de?q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(q.add(pe),!de)return pe}O.d(Ee,{f:()=>h})},4671:(at,Ee,O)=>{function h(q){return q}O.d(Ee,{y:()=>h})},1144:(at,Ee,O)=>{O.d(Ee,{z:()=>h});const h=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(at,Ee,O)=>{O.d(Ee,{D:()=>q});var h=O(576);function q(P){return Symbol.asyncIterator&&(0,h.m)(P?.[Symbol.asyncIterator])}},576:(at,Ee,O)=>{function h(q){return"function"==typeof q}O.d(Ee,{m:()=>h})},3670:(at,Ee,O)=>{O.d(Ee,{c:()=>P});var h=O(8822),q=O(576);function P(J){return(0,q.m)(J[h.L])}},6495:(at,Ee,O)=>{O.d(Ee,{T:()=>P});var h=O(2202),q=O(576);function P(J){return(0,q.m)(J?.[h.h])}},8239:(at,Ee,O)=>{O.d(Ee,{t:()=>q});var h=O(576);function q(P){return(0,h.m)(P?.then)}},3260:(at,Ee,O)=>{O.d(Ee,{L:()=>J,Q:()=>P});var h=O(7582),q=O(576);function P(ne){return(0,h.FC)(this,arguments,function*(){const pe=ne.getReader();try{for(;;){const{value:Pe,done:he}=yield(0,h.qq)(pe.read());if(he)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Pe)}}finally{pe.releaseLock()}})}function J(ne){return(0,q.m)(ne?.getReader)}},4482:(at,Ee,O)=>{O.d(Ee,{A:()=>q,e:()=>P});var h=O(576);function q(J){return(0,h.m)(J?.lift)}function P(J){return ne=>{if(q(ne))return ne.lift(function(de){try{return J(de,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(at,Ee,O)=>{O.d(Ee,{U:()=>P,z:()=>q});var h=O(4671);function q(...J){return P(J)}function P(J){return 0===J.length?h.y:1===J.length?J[0]:function(de){return J.reduce((pe,Pe)=>Pe(pe),de)}}},7849:(at,Ee,O)=>{O.d(Ee,{h:()=>P});var h=O(2416),q=O(3410);function P(J){q.z.setTimeout(()=>{const{onUnhandledError:ne}=h.config;if(!ne)throw J;ne(J)})}},4532:(at,Ee,O)=>{function h(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>h})},2223:(at,Ee,O)=>{O.d(Ee,{$8M:()=>Vl,$WT:()=>Ls,$Z:()=>hd,AFp:()=>BE,ALo:()=>Dg,AaK:()=>Q,CHM:()=>cc,CRH:()=>lw,D6c:()=>Ww,EJc:()=>pS,EpF:()=>X_,F4k:()=>rg,FYo:()=>I_,FiY:()=>Wi,GfV:()=>zr,Gpc:()=>Ye,HDt:()=>uC,JOm:()=>fs,KtG:()=>Sl,LFG:()=>tn,LSH:()=>c_,Lbi:()=>sd,Lck:()=>q0,MAs:()=>Wc,MMx:()=>Eg,NdJ:()=>bd,Ojb:()=>Ms,OlP:()=>Mt,Oqu:()=>Sd,P3R:()=>Cu,PXZ:()=>Hd,Q6J:()=>Na,QGY:()=>Cd,Qsj:()=>KE,R0b:()=>Di,RDi:()=>IE,Rgc:()=>Af,SBq:()=>Wh,Sil:()=>yS,Suo:()=>Ag,TTD:()=>rc,TgZ:()=>tg,VKq:()=>hv,WLB:()=>tw,X6Q:()=>pM,XFs:()=>qe,Xpm:()=>ho,Xts:()=>Li,Y36:()=>dd,YKP:()=>_g,YNc:()=>kI,Yjl:()=>ul,Yz7:()=>Jt,Z0I:()=>er,ZZ4:()=>jw,_Bn:()=>RD,_UZ:()=>ng,_c5:()=>LS,_uU:()=>h0,aQg:()=>xv,c2e:()=>aC,cJS:()=>Xn,cg1:()=>_f,dDg:()=>Lg,dqk:()=>sn,eFA:()=>hC,eJc:()=>dw,ekj:()=>gf,eoX:()=>Pf,f3M:()=>Zt,g9A:()=>jE,h0i:()=>bf,hGG:()=>VS,hij:()=>Ad,iGM:()=>YD,ifc:()=>_n,ip1:()=>hS,jDz:()=>K0,kL8:()=>D0,lG2:()=>al,lcZ:()=>HD,lqb:()=>Lc,lri:()=>Aw,n5z:()=>fu,oAB:()=>ws,oJD:()=>xE,oxw:()=>sg,q4F:()=>C_,qFp:()=>GS,qLn:()=>En,qOj:()=>Wp,qZA:()=>wy,rWj:()=>Mw,rg0:()=>oh,s9C:()=>by,sBO:()=>RS,s_b:()=>kd,soG:()=>Iw,tb:()=>Vg,tp0:()=>hs,uIk:()=>$_,vHH:()=>te,vpe:()=>Go,wAp:()=>bt,xp6:()=>Qm,z2F:()=>Ff,zSh:()=>LE,zs3:()=>Nu});var h=O(7579),q=O(727),P=O(1135),J=O(9751),ne=O(6451),de=O(9646),pe=O(3099),Pe=O(5577),he=O(1884);function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function j(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function Q(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Q).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ce=V({__forward_ref__:V});function Ye(i){return i.__forward_ref__=Ye,i.toString=function(){return Q(this())},i}function Me(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty(Ce)&&i.__forward_ref__===Ye}function Oe(i){return i&&!!i.\u0275providers}const ut="https://g.co/ng/security#xss";class te extends Error{constructor(s,a){super(function ge(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function K(i){return"string"==typeof i?i:null==i?"":String(i)}function je(i,s){throw new te(-201,!1)}function tt(i,s){null==i&&function ct(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Xn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Yr(i){return oo(i,oi)||oo(i,ks)}function er(i){return null!==Yr(i)}function oo(i,s){return i.hasOwnProperty(s)?i[s]:null}function Va(i){return i&&(i.hasOwnProperty(ai)||i.hasOwnProperty(Ua))?i[ai]:null}const oi=V({\u0275prov:V}),ai=V({\u0275inj:V}),ks=V({ngInjectableDef:V}),Ua=V({ngInjectorDef:V});var qe=(()=>((qe=qe||{})[qe.Default=0]="Default",qe[qe.Host=1]="Host",qe[qe.Self=2]="Self",qe[qe.SkipSelf=4]="SkipSelf",qe[qe.Optional=8]="Optional",qe))();let lt;function hn(i){const s=lt;return lt=i,s}function xn(i,s,a){const c=Yr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&qe.Optional?null:void 0!==s?s:void je(Q(i))}const sn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xr={},jt="__NG_DI_FLAG__",Xi="ngTempTokenPath",ja=/\n/gm,es="__source";let Ir;function vn(i){const s=Ir;return Ir=i,s}function ts(i,s=qe.Default){if(void 0===Ir)throw new te(-203,!1);return null===Ir?xn(i,void 0,s):Ir.get(i,s&qe.Optional?null:void 0,s)}function tn(i,s=qe.Default){return(function mt(){return lt}()||ts)(Me(i),s)}function Zt(i,s=qe.Default){return tn(i,U(s))}function U(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function L(i){const s=[];for(let a=0;a<i.length;a++){const c=Me(i[a]);if(Array.isArray(c)){if(0===c.length)throw new te(900,!1);let d,p=qe.Default;for(let y=0;y<c.length;y++){const w=c[y],D=_e(w);"number"==typeof D?-1===D?d=w.token:p|=D:d=w}s.push(tn(d,p))}else s.push(tn(c))}return s}function z(i,s){return i[jt]=s,i.prototype[jt]=s,i}function _e(i){return i[jt]}function ft(i){return{toString:i}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),_n=(()=>{return(i=_n||(_n={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",_n;var i})();const fn={},Et=[],zt=V({\u0275cmp:V}),Dr=V({\u0275dir:V}),bi=V({\u0275pipe:V}),rs=V({\u0275mod:V}),ci=V({\u0275fac:V}),ce=V({__NG_ELEMENT_ID__:V}),ee=V({__NG_ENV_ID__:V});function xe(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}function ot(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,p)}else{const p=d,y=a[++c];Vt(p)?i.setProperty(s,p,y):i.setAttribute(s,p,y),c++}}return c}function Ct(i){return 3===i||4===i||6===i}function Vt(i){return 64===i.charCodeAt(0)}function Xt(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||ur(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function ur(i,s,a,c,d){let p=0,y=i.length;if(-1===s)y=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,s),p=y+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}const tr="ng-template";function _s(i,s,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const y=i[c++];if(a&&"class"===p&&-1!==xe(y.toLowerCase(),s,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===s)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function co(i){return 4===i.type&&i.value!==tr}function $a(i,s,a){return s===(4!==i.type||a?i.value:tr)}function Zd(i,s,a){let c=4;const d=i.attrs||[],p=function lo(i){for(let s=0;s<i.length;s++)if(Ct(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!$a(i,D,a)||""===D&&1===s.length){if(Jr(c))return!1;y=!0}}else{const S=8&c?D:s[++w];if(8&c&&null!==i.attrs){if(!_s(i.attrs,S,a)){if(Jr(c))return!1;y=!0}continue}const F=Kd(8&c?"class":D,d,co(i),a);if(-1===F){if(Jr(c))return!1;y=!0;continue}if(""!==S){let G;G=F>p?"":d[F+1].toLowerCase();const Z=8&c?G:null;if(Z&&-1!==xe(Z,S,0)||2&c&&S!==G){if(Jr(c))return!1;y=!0}}}}else{if(!y&&!Jr(c)&&!Jr(D))return!1;if(y&&Jr(D))continue;y=!1,c=D|1&c}}return Jr(c)||y}function Jr(i){return 0==(1&i)}function Kd(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let p=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function Yd(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Ti(i,s,a=!1){for(let c=0;c<s.length;c++)if(Zd(i,s[c],a))return!0;return!1}function Fs(i,s){return i?":not("+s.trim()+")":s}function rm(i){let s=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Jr(y)&&(s+=Fs(p,d),d=""),c=y,p=p||!Jr(c);a++}return""!==d&&(s+=Fs(p,d)),s}function ho(i){return ft(()=>{const s=Qu(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||_n.Emulated,styles:i.styles||Et,_:null,schemas:i.schemas||null,tView:null,id:""};cl(a);const c=i.dependencies;return a.directiveDefs=Zo(c,!1),a.pipeDefs=Zo(c,!0),a.id=function Xd(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function Jd(i){return Ut(i)||hr(i)}function im(i){return null!==i}function ws(i){return ft(()=>({type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ha(i,s){if(null==i)return fn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,s&&(s[d]=p)}return a}function al(i){return ft(()=>{const s=Qu(i);return cl(s),s})}function ul(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[zt]||null}function hr(i){return i[Dr]||null}function cn(i){return i[bi]||null}function Ls(i){const s=Ut(i)||hr(i)||cn(i);return null!==s&&s.standalone}function Nr(i,s){const a=i[rs]||null;if(!a&&!0===s)throw new Error(`Type ${Q(i)} does not have '\u0275mod' property.`);return a}function Qu(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ha(i.inputs,s),outputs:Ha(i.outputs)}}function cl(i){i.features?.forEach(s=>s(i))}function Zo(i,s){if(!i)return null;const a=s?cn:Jd;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(im)}const Gn=0,Ke=1,Lt=2,pn=3,li=4,Vs=5,Ur=6,fo=7,Cn=8,Cr=9,Es=10,Pt=11,Xr=12,eh=13,is=14,Ln=15,Ko=16,za=17,Si=18,Yo=19,th=20,di=21,zn=22,ll=23,po=24,$t=25,Ju=1,ss=2,ei=7,Ai=8,go=9,fr=11;function qn(i){return Array.isArray(i)&&"object"==typeof i[Ju]}function hi(i){return Array.isArray(i)&&!0===i[Ju]}function Qo(i){return 0!=(4&i.flags)}function Is(i){return i.componentOffset>-1}function Ds(i){return 1==(1&i.flags)}function br(i){return!!i.template}function Rr(i){return 0!=(512&i[Lt])}function Us(i,s){return i.hasOwnProperty(ci)?i[ci]:null}let Ya=sn.WeakRef??class Xu{constructor(s){this.ref=s}deref(){return this.ref}},lm=0,Br=null,ec=!1;function rr(i){const s=Br;return Br=i,s}class tc{constructor(){this.id=lm++,this.ref=function sh(i){return new Ya(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(s),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=ec;ec=!0;try{for(const[a,c]of this.consumers){const d=c.consumerNode.deref();void 0!==d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{ec=s}}producerAccessed(){if(ec)throw new Error("");if(null===Br)return;let s=Br.producers.get(this.id);void 0===s?(s={consumerNode:Br.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Br.trackingVersion},Br.producers.set(this.id,s),this.consumers.set(Br.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=Br.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Br?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let Xa=null;function oh(i){const s=rr(null);try{return i()}finally{rr(s)}}const yl=()=>{};class ah extends tc{constructor(s,a,c){super(),this.watch=s,this.schedule=a,this.dirty=!1,this.cleanupFn=yl,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=rr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=yl,this.watch(this.registerOnCleanup)}finally{rr(s)}}cleanup(){this.cleanupFn()}}class vl{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function rc(){return eu}function eu(i){return i.type.prototype.ngOnChanges&&(i.setInput=ic),_l}function _l(){const i=sc(this),s=i?.current;if(s){const a=i.previous;if(a===fn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function ic(i,s,a,c){const d=this.declaredInputs[a],p=sc(i)||function hm(i,s){return i[wl]=s}(i,{previous:fn,current:null}),y=p.current||(p.current={}),w=p.previous,D=w[d];y[d]=new vl(D&&D.currentValue,s,w===fn),i[c]=s}rc.ngInherit=!0;const wl="__ngSimpleChanges__";function sc(i){return i[wl]||null}const Hi=function(i,s,a){};function bn(i){for(;Array.isArray(i);)i=i[Gn];return i}function oc(i,s){return bn(s[i])}function $r(i,s){return bn(s[i.index])}function El(i,s){return i.data[s]}function Bs(i,s){return i[s]}function pr(i,s){const a=s[i];return qn(a)?a:a[Gn]}function na(i){return 128==(128&i[Lt])}function js(i,s){return null==s?null:i[s]}function Il(i){i[za]=0}function lh(i){1024&i[Lt]||(i[Lt]|=1024,uc(i,1))}function Dl(i){1024&i[Lt]&&(i[Lt]&=-1025,uc(i,-1))}function uc(i,s){let a=i[pn];if(null===a)return;a[Vs]+=s;let c=a;for(a=a[pn];null!==a&&(1===s&&1===c[Vs]||-1===s&&0===c[Vs]);)a[Vs]+=s,c=a,a=a[pn]}const pt={lFrame:Ml(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function fh(){return pt.bindingsEnabled}function be(){return pt.lFrame.lView}function Kt(){return pt.lFrame.tView}function cc(i){return pt.lFrame.contextLView=i,i[Cn]}function Sl(i){return pt.lFrame.contextLView=null,i}function Nn(){let i=tp();for(;null!==i&&64===i.type;)i=i.parent;return i}function tp(){return pt.lFrame.currentTNode}function bs(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function iu(){return pt.lFrame.isParent}function Or(){const i=pt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Hs(){return pt.lFrame.bindingIndex++}function su(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,wo(s)}function wo(i){pt.lFrame.currentDirectiveIndex=i}function mh(){return pt.lFrame.currentQueryIndex}function hc(i){pt.lFrame.currentQueryIndex=i}function fc(i){const s=i[Ke];return 2===s.type?s.declTNode:1===s.type?i[Ur]:null}function au(i,s,a){if(a&qe.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&qe.Host||(d=fc(p),null===d||(p=p[is],10&d.type))););if(null===d)return!1;s=d,i=p}const c=pt.lFrame=Gi();return c.currentTNode=s,c.lView=i,!0}function aa(i){const s=Gi(),a=i[Ke];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Gi(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Ml(i):s}function Ml(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function yh(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const pc=yh;function xl(){const i=yh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ti(){return pt.lFrame.selectedIndex}function Eo(i){pt.lFrame.selectedIndex=i}function Sn(){const i=pt.lFrame;return El(i.tView,i.selectedIndex)}let Nl=!0;function Rl(){return Nl}function as(i){Nl=i}function lu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=p;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),D&&(i.viewHooks??=[]).push(-a,D),S&&((i.viewHooks??=[]).push(a,S),(i.viewCheckHooks??=[]).push(a,S)),null!=N&&(i.destroyHooks??=[]).push(a,N)}}function Ol(i,s,a){Pl(i,s,3,a)}function ua(i,s,a,c){(3&i[Lt])===a&&Pl(i,s,a,c)}function wh(i,s){let a=i[Lt];(3&a)===s&&(a&=4095,a+=1,i[Lt]=a)}function Pl(i,s,a,c){const p=c??-1,y=s.length-1;let w=0;for(let D=void 0!==c?65535&i[za]:0;D<y;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=c&&w>=c)break}else s[D]<0&&(i[za]+=65536),(w<p||-1==p)&&(gc(i,a,s,D),i[za]=(4294901760&i[za])+D+2),D++}function sp(i,s){Hi(4,i,s);const a=rr(null);try{s.call(i)}finally{rr(a),Hi(5,i,s)}}function gc(i,s,a,c){const d=a[c]<0,p=a[c+1],w=i[d?-a[c]:a[c]];d?i[Lt]>>12<i[za]>>16&&(3&i[Lt])===s&&(i[Lt]+=4096,sp(w,p)):sp(w,p)}const ca=-1;class cr{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function us(i){return i!==ca}function Vn(i){return 32767&i}function gr(i,s){let a=function Hr(i){return i>>16}(i),c=s;for(;a>0;)c=c[is],a--;return c}let da=!0;function It(i){const s=da;return da=i,s}const Do=255,zi=5;let fi=0;const cs={};function le(i,s){const a=Co(i,s);if(-1!==a)return a;const c=s[Ke];c.firstCreatePass&&(i.injectorIndex=s.length,Gs(c.data,i),Gs(s,null),Gs(c.blueprint,null));const d=Ri(i,s),p=i.injectorIndex;if(us(d)){const y=Vn(d),w=gr(d,s),D=w[Ke].data;for(let S=0;S<8;S++)s[p+S]=w[y+S]|D[y+S]}return s[p+8]=d,p}function Gs(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Co(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ri(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Ih(d),null===c)return ca;if(a++,d=d[is],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return ca}function Yt(i,s,a){!function ap(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ce)&&(c=a[ce]),null==c&&(c=a[ce]=fi++);const d=c&Do;s.data[i+(d>>zi)]|=1<<d}(i,s,a)}function qi(i,s,a){if(a&qe.Optional||void 0!==i)return i;je()}function We(i,s,a,c){if(a&qe.Optional&&void 0===c&&(c=null),!(a&(qe.Self|qe.Host))){const d=i[Cr],p=hn(void 0);try{return d?d.get(s,c,a&qe.Optional):xn(s,c,a&qe.Optional)}finally{hn(p)}}return qi(c,0,a)}function du(i,s,a,c=qe.Default,d){if(null!==i){if(2048&s[Lt]&&!(c&qe.Self)){const y=function ls(i,s,a,c,d){let p=i,y=s;for(;null!==p&&null!==y&&2048&y[Lt]&&!(512&y[Lt]);){const w=Tt(p,y,a,c|qe.Self,cs);if(w!==cs)return w;let D=p.parent;if(!D){const S=y[th];if(S){const N=S.get(a,cs,c);if(N!==cs)return N}D=Ih(y),y=y[is]}p=D}return d}(i,s,a,c,cs);if(y!==cs)return y}const p=Tt(i,s,a,c,cs);if(p!==cs)return p}return We(s,a,c,d)}function Tt(i,s,a,c,d){const p=function Fl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ce)?i[ce]:void 0;return"number"==typeof s?s>=0?s&Do:mr:s}(a);if("function"==typeof p){if(!au(s,i,c))return c&qe.Host?qi(d,0,c):We(s,a,c,d);try{const y=p(c);if(null!=y||c&qe.Optional)return y;je()}finally{pc()}}else if("number"==typeof p){let y=null,w=Co(i,s),D=ca,S=c&qe.Host?s[Ln][Ur]:null;for((-1===w||c&qe.SkipSelf)&&(D=-1===w?Ri(i,s):s[w+8],D!==ca&&Ll(c,!1)?(y=s[Ke],w=Vn(D),s=gr(D,s)):w=-1);-1!==w;){const N=s[Ke];if(yc(p,w,N.data)){const F=hu(w,s,a,y,c,S);if(F!==cs)return F}D=s[w+8],D!==ca&&Ll(c,s[Ke].data[w+8]===S)&&yc(p,w,s)?(y=N,w=Vn(D),s=gr(D,s)):w=-1}}return d}function hu(i,s,a,c,d,p){const y=s[Ke],w=y.data[i+8],N=bo(w,y,a,null==c?Is(w)&&da:c!=y&&0!=(3&w.type),d&qe.Host&&p===w);return null!==N?Ss(s,y,N,w):cs}function bo(i,s,a,c,d){const p=i.providerIndexes,y=s.data,w=1048575&p,D=i.directiveStart,N=p>>20,G=d?w+N:i.directiveEnd;for(let Z=c?w:w+N;Z<G;Z++){const ve=y[Z];if(Z<D&&a===ve||Z>=D&&ve.type===a)return Z}if(d){const Z=y[D];if(Z&&br(Z)&&Z.type===a)return D}return null}function Ss(i,s,a,c){let d=i[a];const p=s.data;if(function op(i){return i instanceof cr}(d)){const y=d;y.resolving&&function Te(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new te(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():K(i)}(p[a]));const w=It(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?hn(y.injectImpl):null;au(i,c,qe.Default);try{d=i[a]=y.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function _h(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(c){const y=eu(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),p&&((a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p))}(a,p[a],s)}finally{null!==D&&hn(D),It(w),y.resolving=!1,pc()}}return d}function yc(i,s,a){return!!(a[s+(i>>zi)]&1<<i)}function Ll(i,s){return!(i&qe.Self||i&qe.Host&&s)}class ha{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return du(this._tNode,this._lView,s,U(c),a)}}function mr(){return new ha(Nn(),be())}function fu(i){return ft(()=>{const s=i.prototype.constructor,a=s[ci]||ir(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[ci]||ir(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function ir(i){return ze(i)?()=>{const s=ir(Me(i));return s&&s()}:Us(i)}function Ih(i){const s=i[Ke],a=s.type;return 2===a?s.declTNode:1===a?i[Ur]:null}function Vl(i){return function mc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(Ct(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(Nn(),i)}const To="__parameters__";function Oi(i,s,a){return ft(()=>{const c=function As(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return w.annotation=y,w;function w(D,S,N){const F=D.hasOwnProperty(To)?D[To]:Object.defineProperty(D,To,{value:[]})[To];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function qs(i,s){i.forEach(a=>Array.isArray(a)?qs(a,s):s(a))}function Pi(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function $l(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function E(i,s,a){let c=M(i,s);return c>=0?i[1|c]=a:(c=~c,function Ec(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function C(i,s){const a=M(i,s);if(a>=0)return i[1|a]}function M(i,s){return function $(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),y=i[p<<a];if(s===y)return p<<a;y>s?d=p:c=p+1}return~(d<<a)}(i,s,1)}const Wi=z(Oi("Optional"),8),hs=z(Oi("SkipSelf"),4);function vu(i){return 128==(128&i.flags)}var fs=(()=>((fs=fs||{})[fs.Important=1]="Important",fs[fs.DashCase=2]="DashCase",fs))();const Kl=new Map;let gp=0;const Ql="__ngContext__";function Tr(i,s){qn(s)?(i[Ql]=s[Yo],function Mo(i){Kl.set(i[Yo],i)}(s)):i[Ql]=s}let wp;function Ks(i,s){return wp(i,s)}function mi(i){const s=i[pn];return hi(s)?s[pn]:s}function Tn(i){return Eu(i[Xr])}function xc(i){return Eu(i[li])}function Eu(i){for(;null!==i&&!hi(i);)i=i[li];return i}function Qn(i,s,a,c,d){if(null!=c){let p,y=!1;hi(c)?p=c:qn(c)&&(y=!0,c=c[Gn]);const w=bn(c);0===i&&null!==a?null==d?B(s,a,w):x(s,a,w,d||null,!0):1===i&&null!==a?x(s,a,w,d||null,!0):2===i?function An(i,s,a){const c=Xe(i,s);c&&function Se(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=p&&function wE(i,s,a,c,d){const p=a[ei];p!==bn(a)&&Qn(s,i,c,p,d);for(let w=fr;w<a.length;w++){const D=a[w];nd(D[Ke],D,i,s,c,p)}}(s,i,p,a,d)}}function ps(i,s,a){return i.createElement(s,a)}function Ip(i,s){const a=i[go],c=a.indexOf(s);Dl(s),a.splice(c,1)}function _a(i,s){if(i.length<=fr)return;const a=fr+s,c=i[a];if(c){const d=c[Ko];null!==d&&d!==i&&Ip(d,c),s>0&&(i[a-1][li]=c[li]);const p=$l(i,fr+s);!function ed(i,s){nd(i,s,s[Pt],2,null,null),s[Gn]=null,s[Ur]=null}(c[Ke],c);const y=p[Si];null!==y&&y.detachView(p[Ke]),c[pn]=null,c[li]=null,c[Lt]&=-129}return c}function Nm(i,s){if(!(256&s[Lt])){const a=s[Pt];s[ll]?.destroy(),s[po]?.destroy(),a.destroyNode&&nd(i,s,a,3,null,null),function va(i){let s=i[Xr];if(!s)return v(i[Ke],i);for(;s;){let a=null;if(qn(s))a=s[Xr];else{const c=s[fr];c&&(a=c)}if(!a){for(;s&&!s[li]&&s!==i;)qn(s)&&v(s[Ke],s),s=s[pn];null===s&&(s=i),qn(s)&&v(s[Ke],s),a=s&&s[li]}s=a}}(s)}}function v(i,s){if(!(256&s[Lt])){s[Lt]&=-129,s[Lt]|=256,function g(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof cr)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=d[p[y]],D=p[y+1];Hi(4,w,D);try{D.call(w)}finally{Hi(5,w,D)}}else{Hi(4,d,p);try{p.call(d)}finally{Hi(5,d,p)}}}}}(i,s),function f(i,s){const a=i.cleanup,c=s[fo];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?c[y]():c[-y].unsubscribe(),p+=2}else a[p].call(c[a[p+1]]);null!==c&&(s[fo]=null);const d=s[di];if(null!==d){s[di]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(i,s),1===s[Ke].type&&s[Pt].destroy();const a=s[Ko];if(null!==a&&hi(s[pn])){a!==s[pn]&&Ip(a,s);const c=s[Si];null!==c&&c.detachView(i)}!function bm(i){Kl.delete(i[Yo])}(s)}}function _(i,s,a){return function T(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Gn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===_n.None||p===_n.Emulated)return null}return $r(c,a)}}(i,s.parent,a)}function x(i,s,a,c,d){i.insertBefore(s,a,c,d)}function B(i,s,a){i.appendChild(s,a)}function Y(i,s,a,c,d){null!==c?x(i,s,a,c,d):B(i,s,a)}function Xe(i,s){return i.parentNode(s)}let Iu,bp,Lh,Om,No=function yi(i,s,a){return 40&i.type?$r(i,a):null};function Pc(i,s,a,c){const d=_(i,c,s),p=s[Pt],w=function Un(i,s,a){return No(i,s,a)}(c.parent||s[Ur],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)Y(p,d,a[D],w,!1);else Y(p,d,a,w,!1);void 0!==Iu&&Iu(p,c,s,a,d)}function Ys(i,s){if(null!==s){const a=s.type;if(3&a)return $r(s,i);if(4&a)return kh(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Ys(i,c);{const d=i[s.index];return hi(d)?kh(-1,d):bn(d)}}if(32&a)return Ks(s,i)()||bn(i[s.index]);{const c=wa(i,s);return null!==c?Array.isArray(c)?c[0]:Ys(mi(i[Ln]),c):Ys(i,s.next)}}return null}function wa(i,s){return null!==s?i[Ln][Ur].projection[s.projection]:null}function kh(i,s){const a=fr+i+1;if(a<s.length){const c=s[a],d=c[Ke].firstChild;if(null!==d)return Ys(c,d)}return s[ei]}function Fh(i,s,a,c,d,p,y){for(;null!=a;){const w=c[a.index],D=a.type;if(y&&0===s&&(w&&Tr(bn(w),c),a.flags|=2),32!=(32&a.flags))if(8&D)Fh(i,s,a.child,c,d,p,!1),Qn(s,i,d,w,p);else if(32&D){const S=Ks(a,c);let N;for(;N=S();)Qn(s,i,d,N,p);Qn(s,i,d,w,p)}else 16&D?Cp(i,s,c,a,d,p):Qn(s,i,d,w,p);a=y?a.projectionNext:a.next}}function nd(i,s,a,c,d,p){Fh(a,c,i.firstChild,s,d,p,!1)}function Cp(i,s,a,c,d,p){const y=a[Ln],D=y[Ur].projection[c.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Qn(s,i,d,D[S],p);else{let S=D;const N=y[pn];vu(c)&&(S.flags|=128),Fh(i,s,S,N,d,p,!0)}}function Kv(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Ro(i,s,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&ot(i,s,c),null!==d&&Kv(i,s,d),null!==p&&function Rm(i,s,a){i.setAttribute(s,"style",a)}(i,s,p)}function rd(i){return function Yv(){if(void 0===bp&&(bp=null,sn.trustedTypes))try{bp=sn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return bp}()?.createHTML(i)||i}function IE(i){Lh=i}function kc(){if(void 0!==Lh)return Lh;if(typeof document<"u")return document;throw new te(210,!1)}function Pm(){if(void 0===Om&&(Om=null,sn.trustedTypes))try{Om=sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Om}function Vh(i){return Pm()?.createHTML(i)||i}function e_(i){return Pm()?.createScriptURL(i)||i}class km{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function gs(i){return i instanceof km?i.changingThisBreaksApplicationSecurity:i}function Uh(i,s){const a=function TE(i){return i instanceof km&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${ut})`)}return a===s}class Bh{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(rd(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch{return null}}}class ub{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const a=this.inertDocument.createElement("template");return a.innerHTML=rd(s),a}}const i_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mn(i){return(i=String(i)).match(i_)?i:"unsafe:"+i}function Du(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function id(...i){const s={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(s[c]=!0);return s}const Po=Du("area,br,col,hr,img,wbr"),s_=Du("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Lm=Du("rp,rt"),ko=id(Po,id(s_,Du("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),id(Lm,Du("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),id(Lm,s_)),ms=Du("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ap=id(ms,Du("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Du("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Mp=Du("script,style,template");class Vm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!ko.hasOwnProperty(a))return this.sanitizedSomething=!0,!Mp.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=s.attributes;for(let d=0;d<c.length;d++){const p=c.item(d),y=p.name,w=y.toLowerCase();if(!Ap.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let D=p.value;ms[w]&&(D=mn(D)),this.buf.push(" ",y,'="',ME(D),'"')}return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();ko.hasOwnProperty(a)&&!Po.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(ME(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const AE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jh=/([^\#-~ |!])/g;function ME(i){return i.replace(/&/g,"&amp;").replace(AE,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(jh,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Um;function u_(i){return"content"in i&&function lb(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Ar=(()=>((Ar=Ar||{})[Ar.NONE=0]="NONE",Ar[Ar.HTML=1]="HTML",Ar[Ar.STYLE=2]="STYLE",Ar[Ar.SCRIPT=3]="SCRIPT",Ar[Ar.URL=4]="URL",Ar[Ar.RESOURCE_URL=5]="RESOURCE_URL",Ar))();function xE(i){const s=Ne();return s?Vh(s.sanitize(Ar.HTML,i)||""):Uh(i,"HTML")?Vh(gs(i)):function a_(i,s){let a=null;try{Um=Um||function r_(i){const s=new ub(i);return function Oo(){try{return!!(new window.DOMParser).parseFromString(rd(""),"text/html")}catch{return!1}}()?new Bh(s):s}(i);let c=s?String(s):"";a=Um.getInertBodyElement(c);let d=5,p=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=p,p=a.innerHTML,a=Um.getInertBodyElement(c)}while(c!==p);return rd((new Vm).sanitizeChildren(u_(a)||a))}finally{if(a){const c=u_(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(kc(),K(i))}function c_(i){const s=Ne();return s?s.sanitize(Ar.URL,i)||"":Uh(i,"URL")?gs(i):mn(K(i))}function NE(i){const s=Ne();if(s)return e_(s.sanitize(Ar.RESOURCE_URL,i)||"");if(Uh(i,"ResourceURL"))return e_(gs(i));throw new te(904,!1)}function Cu(i,s,a){return function Hh(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?NE:c_}(s,a)(i)}function Ne(){const i=be();return i&&i[Es].sanitizer}class Mt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Li=new Mt("ENVIRONMENT_INITIALIZER"),jm=new Mt("INJECTOR",-1),it=new Mt("INJECTOR_DEF_TYPES");class dt{get(s,a=xr){if(a===xr){const c=new Error(`NullInjectorError: No provider for ${Q(s)}!`);throw c.name="NullInjectorError",c}return a}}function Je(...i){return{\u0275providers:oe(0,i),\u0275fromNgModule:!0}}function oe(i,...s){const a=[],c=new Set;let d;return qs(s,p=>{const y=p;Mr(y,a,[],c)&&(d||=[],d.push(y))}),void 0!==d&&De(d,a),a}function De(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];l_(d,p=>{s.push(p)})}}function Mr(i,s,a,c){if(!(i=Me(i)))return!1;let d=null,p=Va(i);const y=!p&&Ut(i);if(p||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(p=Va(D),!p)return!1;d=D}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of D)Mr(S,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let S;c.add(d);try{qs(p.imports,N=>{Mr(N,s,a,c)&&(S||=[],S.push(N))})}finally{}void 0!==S&&De(S,s)}if(!w){const S=Us(d)||(()=>new d);s.push({provide:d,useFactory:S,deps:Et},{provide:it,useValue:d,multi:!0},{provide:Li,useValue:()=>tn(d),multi:!0})}const D=p.providers;null==D||w||l_(D,N=>{s.push(N)})}}return d!==i&&void 0!==i.providers}function l_(i,s){for(let a of i)Oe(a)&&(a=a.\u0275providers),Array.isArray(a)?l_(a,s):s(a)}const hb=V({provide:String,useValue:V});function d_(i){return null!==i&&"object"==typeof i&&hb in i}function Fc(i){return"function"==typeof i}const LE=new Mt("Set Injector scope."),$m={},VE={};let kt;function bu(){return void 0===kt&&(kt=new dt),kt}class Lc{}class Bn extends Lc{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tu(s,y=>this.processProvider(y)),this.records.set(jm,On(void 0,this)),d.has("environment")&&this.records.set(Lc,On(void 0,this));const p=this.records.get(LE);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(it.multi,Et,qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=vn(this),c=hn(void 0);try{return s()}finally{vn(a),hn(c)}}get(s,a=xr,c=qe.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(ee))return s[ee](this);c=U(c);const d=vn(this),p=hn(void 0);try{if(!(c&qe.SkipSelf)){let w=this.records.get(s);if(void 0===w){const D=function h_(i){return"function"==typeof i||"object"==typeof i&&i instanceof Mt}(s)&&Yr(s);w=D&&this.injectableDefInScope(D)?On(ht(s),$m):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&qe.Self?bu():this.parent).get(s,a=c&qe.Optional&&a===xr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Xi]=y[Xi]||[]).unshift(Q(s)),d)throw y;return function se(i,s,a,c){const d=i[Xi];throw s[es]&&d.unshift(s[es]),i.message=function nt(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Q(s);if(Array.isArray(s))d=s.map(Q).join(" -> ");else if("object"==typeof s){let p=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):Q(w)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ja,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Xi]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{hn(p),vn(d)}}resolveInjectorInitializers(){const s=vn(this),a=hn(void 0);try{const c=this.get(Li.multi,Et,qe.Self);for(const d of c)d()}finally{vn(s),hn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(Q(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(s){let a=Fc(s=Me(s))?s:Me(s&&s.provide);const c=function on(i){return d_(i)?On(void 0,i.useValue):On(UE(i),$m)}(s);if(Fc(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=On(void 0,$m,!0),d.factory=()=>L(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===$m&&(a.value=VE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Hm(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Me(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ht(i){const s=Yr(i),a=null!==s?s.factory:Us(i);if(null!==a)return a;if(i instanceof Mt)throw new te(204,!1);if(i instanceof Function)return function xp(i){const s=i.length;if(s>0)throw function Ws(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new te(204,!1);const a=function ao(i){return i&&(i[oi]||i[ks])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new te(204,!1)}function UE(i,s,a){let c;if(Fc(i)){const d=Me(i);return Us(d)||ht(d)}if(d_(i))c=()=>Me(i.useValue);else if(function FE(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...L(i.deps||[]));else if(function kE(i){return!(!i||!i.useExisting)}(i))c=()=>tn(Me(i.useExisting));else{const d=Me(i&&(i.useClass||i.provide));if(!function Qe(i){return!!i.deps}(i))return Us(d)||ht(d);c=()=>new d(...L(i.deps))}return c}function On(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Tu(i,s){for(const a of i)Array.isArray(a)?Tu(a,s):a&&Oe(a)?Tu(a.\u0275providers,s):s(a)}const BE=new Mt("AppId",{providedIn:"root",factory:()=>Gm}),Gm="ng",jE=new Mt("Platform Initializer"),sd=new Mt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ms=new Mt("CSP nonce",{providedIn:"root",factory:()=>kc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let zh=(i,s)=>null;function HE(i,s){return zh(i,s)}class _b{}class WE{}class Eb{resolveComponentFactory(s){throw function wb(i){const s=Error(`No component factory found for ${Q(i)}.`);return s.ngComponent=i,s}(s)}}let Zm=(()=>{class i{}return i.NULL=new Eb,i})();function Ib(){return qh(Nn(),be())}function qh(i,s){return new Wh($r(i,s))}let Wh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ib,i})();function Db(i){return i instanceof Wh?i.nativeElement:i}class I_{}let KE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Cb(){const i=be(),a=pr(Nn().index,i);return(qn(a)?a:i)[Pt]}(),i})(),D_=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class zr{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const C_=new zr("16.0.4"),Ia={};function Zh(i){for(;i;){i[Lt]|=64;const s=mi(i);if(Rr(i)&&!s)return i;i=s}return null}function qr(i){return i.ngOriginalError}class En{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&qr(s);for(;a&&qr(a);)a=qr(a);return a||null}}const Yi=new Mt("",{providedIn:"root",factory:()=>!1});function Xs(i){return i instanceof Function?i():i}class Mu extends tc{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){Zh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,a,c){const d=rr(this);this.trackingVersion++;try{s(a,c)}finally{rr(d)}}destroy(){this.trackingVersion++}}let Op=null;function ld(){return Op??=new Mu,Op}function Ym(i,s){return i[s]??ld()}function Pp(i,s){const a=ld();a.hasReadASignal&&(i[s]=Op,a.lView=i,Op=new Mu)}const Nt={};function Qm(i){Yh(Kt(),be(),ti()+i,!1)}function Yh(i,s,a,c){if(!c)if(3==(3&s[Lt])){const p=i.preOrderCheckHooks;null!==p&&Ol(s,p,a)}else{const p=i.preOrderHooks;null!==p&&ua(s,p,0,a)}Eo(a)}function jn(i,s=null,a=null,c){const d=xu(i,s,a,c);return d.resolveInjectorInitializers(),d}function xu(i,s=null,a=null,c,d=new Set){const p=[a||Et,Je(i)];return c=c||("object"==typeof i?void 0:Q(i)),new Bn(p,s||bu(),c||null,d)}let Nu=(()=>{class i{static create(a,c){if(Array.isArray(a))return jn({name:""},c,a,"");{const d=a.name??"";return jn({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=xr,i.NULL=new dt,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>tn(jm)}),i.__NG_ELEMENT_ID__=-1,i})();function dd(i,s=qe.Default){const a=be();return null===a?tn(i,s):du(Nn(),a,Me(i),s)}function hd(){throw new Error("invalid")}function Lp(i,s,a,c,d,p,y,w,D,S,N){const F=s.blueprint.slice();return F[Gn]=d,F[Lt]=140|c,(null!==S||i&&2048&i[Lt])&&(F[Lt]|=2048),Il(F),F[pn]=F[is]=i,F[Cn]=a,F[Es]=y||i&&i[Es],F[Pt]=w||i&&i[Pt],F[Cr]=D||i&&i[Cr]||null,F[Ur]=p,F[Yo]=function Nh(){return gp++}(),F[zn]=N,F[th]=S,F[Ln]=2==s.type?i[Ln]:F,F}function qt(i,s,a,c,d){let p=i.data[s];if(null===p)p=function yn(i,s,a,c,d){const p=tp(),y=iu(),D=i.data[s]=function Pb(i,s,a,c,d,p){let y=s?s.injectorIndex:-1,w=0;return function ia(){return null!==pt.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(i,s,a,c,d),function gh(){return pt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const y=function xi(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return bs(p,!0),p}function Ca(i,s,a,c){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Jm(i,s,a,c,d){const p=Ym(s,ll),y=ti(),w=2&c;try{if(Eo(-1),w&&s.length>$t&&Yh(i,s,$t,!1),Hi(w?2:0,d),w)p.runInContext(a,c,d);else{const S=rr(null);try{a(c,d)}finally{rr(S)}}}finally{w&&null===s[ll]&&Pp(s,ll),Eo(y),Hi(w?3:1,d)}}function Vp(i,s,a){if(Qo(s)){const c=rr(null);try{const p=s.directiveEnd;for(let y=s.directiveStart;y<p;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{rr(c)}}}function Xm(i,s,a){fh()&&(function uI(i,s,a,c){const d=a.directiveStart,p=a.directiveEnd;Is(a)&&function cI(i,s,a){const c=$r(s,i),y=wi(i,Lp(i,A_(a),null,a.onPush?64:16,c,s,null,i[Es].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=y}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||le(a,s),Tr(c,s);const y=a.initialInputs;for(let w=d;w<p;w++){const D=i.data[w],S=Ss(s,i,w,a);Tr(S,s),null!==y&&lI(0,w-d,S,D,0,y),br(D)&&(pr(a.index,s)[Cn]=Ss(s,i,w,a))}}(i,s,a,$r(a,s)),64==(64&a.flags)&&iy(i,s,a))}function Up(i,s,a=$r){const c=s.localNames;if(null!==c){let d=s.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function A_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ey(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function ey(i,s,a,c,d,p,y,w,D,S,N){const F=$t+c,G=F+d,Z=function tI(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Nt);return a}(F,G),ve="function"==typeof S?S():S;return Z[Ke]={type:i,blueprint:Z,template:a,queries:null,viewQuery:w,declTNode:s,data:Z.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:ve,incompleteFirstPass:!1,ssrId:N}}let nI=i=>null;function sI(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?oI(a,s,d,p):c.hasOwnProperty(d)&&oI(a,s,c[d],p)}return a}function oI(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function _i(i,s,a,c,d,p,y,w){const D=$r(s,a);let N,S=s.inputs;!w&&null!=S&&(N=S[c])?(k_(i,a,N,c,d),Is(s)&&function ty(i,s){const a=pr(s,i);16&a[Lt]||(a[Lt]|=64)}(a,s.index)):3&s.type&&(c=function fd(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,p.setProperty(D,c,d))}function ry(i,s,a,c){if(fh()){const d=null===c?null:{"":-1},p=function x_(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(Ti(s,y.selectors,!1))if(c||(c=[]),br(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),Ru(i,s,w.length)}else c.unshift(y),Ru(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&ba(i,s,a,y,d,w),d&&function Qi(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new te(-301,!1);c.push(s[d],p)}}}(a,c,d)}a.mergedAttrs=Xt(a.mergedAttrs,a.attrs)}function ba(i,s,a,c,d,p){for(let S=0;S<c.length;S++)Yt(le(a,s),i,c[S].type);!function oy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const N=c[S];N.providersResolver&&N.providersResolver(N)}let y=!1,w=!1,D=Ca(i,s,c.length,null);for(let S=0;S<c.length;S++){const N=c[S];a.mergedAttrs=Xt(a.mergedAttrs,N.hostAttrs),Bp(i,a,s,D,N),N_(D,N,d),null!==N.contentQueries&&(a.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=64);const F=N.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),D++}!function M_(i,s,a){const d=s.directiveEnd,p=i.data,y=s.attrs,w=[];let D=null,S=null;for(let N=s.directiveStart;N<d;N++){const F=p[N],G=a?a.get(F):null,ve=G?G.outputs:null;D=sI(F.inputs,N,D,G?G.inputs:null),S=sI(F.outputs,N,S,ve);const Re=null===D||null===y||co(s)?null:Fb(D,N,y);w.push(Re)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=D,s.outputs=S}(i,a,p)}function iy(i,s,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,y=function dc(){return pt.lFrame.currentDirectiveIndex}();try{Eo(p);for(let w=c;w<d;w++){const D=i.data[w],S=s[w];wo(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&sy(D,S)}}finally{Eo(-1),wo(y)}}function sy(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Ru(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function N_(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;br(s)&&(a[""]=i)}}function Bp(i,s,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Us(d.type)),y=new cr(p,br(d),dd);i.blueprint[c]=y,a[c]=y,function aI(i,s,a,c,d){const p=d.hostBindings;if(p){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function Qh(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,p)}}(i,s,c,Ca(i,a,d.hostVars,Nt),d)}function eo(i,s,a,c,d,p){const y=$r(i,s);!function pd(i,s,a,c,d,p,y){if(null==p)i.removeAttribute(s,d,a);else{const w=null==y?K(p):y(p,c||"",d);i.setAttribute(s,d,w,a)}}(s[Pt],y,p,i.value,a,c,d)}function lI(i,s,a,c,d,p){const y=p[s];if(null!==y)for(let w=0;w<y.length;)R_(c,a,y[w++],y[w++],y[w++])}function R_(i,s,a,c,d){const p=rr(null);try{null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{rr(p)}}function Fb(i,s,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const y=i[p];for(let w=0;w<y.length;w+=2)if(y[w]===s){c.push(p,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Ta(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function dI(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const y=i.data[p];hc(a[c]),y.contentQueries(2,s[p],p)}}}function wi(i,s){return i[Xr]?i[eh][li]=s:i[Xr]=s,i[eh]=s,s}function ay(i,s,a){hc(0);const c=rr(null);try{s(i,a)}finally{rr(c)}}function O_(i){return i[fo]||(i[fo]=[])}function Uo(i){return i.cleanup||(i.cleanup=[])}function Jh(i,s){const a=i[Cr],c=a?a.get(En,null):null;c&&c.handleError(s)}function k_(i,s,a,c,d){for(let p=0;p<a.length;){const y=a[p++],w=a[p++];R_(i.data[y],s[y],c,w,d)}}function Gt(i,s){const a=pr(s,i),c=a[Ke];!function Lb(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[Gn];null!==d&&null===a[zn]&&(a[zn]=HE(d,a[Cr])),jp(c,a,a[Cn])}function jp(i,s,a){aa(s);try{const c=i.viewQuery;null!==c&&ay(1,c,a);const d=i.template;null!==d&&Jm(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&dI(i,s),i.staticViewQueries&&ay(2,i.viewQuery,a);const p=i.components;null!==p&&function hI(i,s){for(let a=0;a<s.length;a++)Gt(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Lt]&=-5,xl()}}let gI=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const p=typeof Zone>"u"?null:Zone.current,y=new ah(a,S=>{this.all.has(S)&&this.queue.set(S,p)},d);let w;this.all.add(y),y.notify();const D=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>new i}),i})();function $p(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?p=w:1==p?d=Fe(d,w):2==p&&(c=Fe(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Sa(i,s,a,c,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(bn(p)),hi(p)){for(let w=fr;w<p.length;w++){const D=p[w],S=D[Ke].firstChild;null!==S&&Sa(D[Ke],D,S,c)}p[ei]!==p[Gn]&&c.push(p[ei])}const y=a.type;if(8&y)Sa(i,s,a.child,c);else if(32&y){const w=Ks(a,s);let D;for(;D=w();)c.push(D)}else if(16&y){const w=wa(s,a);if(Array.isArray(w))c.push(...w);else{const D=mi(s[Ln]);Sa(D[Ke],D,w,c,!0)}}a=d?a.projectionNext:a.next}return c}function Aa(i,s,a,c=!0){const d=s[Es].rendererFactory;d.begin&&d.begin();try{Hp(i,s,i.template,a)}catch(y){throw c&&Jh(s,y),y}finally{d.end&&d.end(),s[Es].effectManager?.flush()}}function Hp(i,s,a,c){const d=s[Lt];if(256!=(256&d)){s[Es].effectManager?.flush(),aa(s);try{Il(s),function lc(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Jm(i,s,a,2,c);const y=3==(3&d);if(y){const S=i.preOrderCheckHooks;null!==S&&Ol(s,S,null)}else{const S=i.preOrderHooks;null!==S&&ua(s,S,0,null),wh(s,0)}if(function mI(i){for(let s=Tn(i);null!==s;s=xc(s)){if(!s[ss])continue;const a=s[go];for(let c=0;c<a.length;c++){lh(a[c])}}}(s),function Xh(i){for(let s=Tn(i);null!==s;s=xc(s))for(let a=fr;a<s.length;a++){const c=s[a],d=c[Ke];na(c)&&Hp(d,c,d.template,c[Cn])}}(s),null!==i.contentQueries&&dI(i,s),y){const S=i.contentCheckHooks;null!==S&&Ol(s,S)}else{const S=i.contentHooks;null!==S&&ua(s,S,1),wh(s,1)}!function xb(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=Ym(s,po);try{for(let d=0;d<a.length;d++){const p=a[d];if(p<0)Eo(~p);else{const y=p,w=a[++d],D=a[++d];su(w,y),c.runInContext(D,2,s[y])}}}finally{null===s[po]&&Pp(s,po),Eo(-1)}}(i,s);const w=i.components;null!==w&&function Bb(i,s){for(let a=0;a<s.length;a++)yI(i,s[a])}(s,w);const D=i.viewQuery;if(null!==D&&ay(2,D,c),y){const S=i.viewCheckHooks;null!==S&&Ol(s,S)}else{const S=i.viewHooks;null!==S&&ua(s,S,2),wh(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Lt]&=-73,Dl(s)}finally{xl()}}}function yI(i,s){const a=pr(s,i);if(na(a)){const c=a[Ke];80&a[Lt]?Hp(c,a,c.template,a[Cn]):a[Vs]>0&&md(a)}}function md(i){for(let c=Tn(i);null!==c;c=xc(c))for(let d=fr;d<c.length;d++){const p=c[d];if(na(p))if(1024&p[Lt]){const y=p[Ke];Hp(y,p,y.template,p[Cn])}else p[Vs]>0&&md(p)}const a=i[Ke].components;if(null!==a)for(let c=0;c<a.length;c++){const d=pr(a[c],i);na(d)&&d[Vs]>0&&md(d)}}class Gp{get rootNodes(){const s=this._lView,a=s[Ke];return Sa(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cn]}set context(s){this._lView[Cn]=s}get destroyed(){return 256==(256&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[pn];if(hi(s)){const a=s[Ai],c=a?a.indexOf(this):-1;c>-1&&(_a(s,c),$l(a,c))}this._attachedToViewContainer=!1}Nm(this._lView[Ke],this._lView)}onDestroy(s){!function Cl(i,s){if(256==(256&i[Lt]))throw new te(911,!1);null===i[di]&&(i[di]=[]),i[di].push(s)}(this._lView,s)}markForCheck(){Zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-129}reattach(){this._lView[Lt]|=128}detectChanges(){Aa(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rc(i,s){nd(i,s,s[Pt],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=s}}class or extends Gp{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Aa(s[Ke],s,s[Cn],!1)}checkNoChanges(){}get context(){return null}}class zp extends Zm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new Pu(a,this.ngModule)}}function qp(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class jb{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=U(c);const d=this.injector.get(s,Ia,c);return d!==Ia||a===Ia?d:this.parentInjector.get(s,a,c)}}class Pu extends WE{get inputs(){return qp(this.componentDef.inputs)}get outputs(){return qp(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function zf(i){return i.map(rm).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let p=(d=d||this.ngModule)instanceof Lc?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new jb(s,p):s,w=y.get(I_,null);if(null===w)throw new te(407,!1);const N={rendererFactory:w,sanitizer:y.get(D_,null),effectManager:y.get(gI,null)},F=w.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",Z=c?function Nb(i,s,a,c){const p=c.get(Yi,!1)||a===_n.ShadowDom,y=i.selectRootElement(s,p);return function Rb(i){nI(i)}(y),y}(F,c,this.componentDef.encapsulation,y):ps(F,G,function vI(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(G)),ve=this.componentDef.onPush?576:528,Re=ey(0,null,null,1,0,null,null,null,null,null,null),Ze=Lp(null,Re,null,ve,null,null,N,F,y,null,null);let yt,Ie;aa(Ze);try{const xt=this.componentDef;let en,In=null;xt.findHostDirectiveDefs?(en=[],In=new Map,xt.findHostDirectiveDefs(xt,en,In),en.push(xt)):en=[xt];const so=function ef(i,s){const a=i[Ke],c=$t;return i[c]=s,qt(a,c,2,"#host",null)}(Ze,Z),AC=function ku(i,s,a,c,d,p,y){const w=d[Ke];!function _I(i,s,a,c){for(const d of i)s.mergedAttrs=Xt(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&($p(s,s.mergedAttrs,!0),null!==a&&Ro(c,a,s))}(c,i,s,y);let D=null;null!==s&&(D=HE(s,d[Cr]));const S=p.rendererFactory.createRenderer(s,a),N=Lp(d,A_(a),null,a.onPush?64:16,d[i.index],i,p,S,null,null,D);return w.firstCreatePass&&Ru(w,i,c.length-1),wi(d,N),d[i.index]=N}(so,Z,xt,en,Ze,N,F);Ie=El(Re,$t),Z&&function EI(i,s,a,c){if(c)ot(i,a,["ng-version",C_.full]);else{const{attrs:d,classes:p}=function Yu(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++c]):8===d&&a.push(p);else{if(!Jr(d))break;d=p}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&ot(i,a,d),p&&p.length>0&&Kv(i,a,p.join(" "))}}(F,xt,Z,c),void 0!==a&&function tf(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(Ie,this.ngContentSelectors,a),yt=function wI(i,s,a,c,d,p){const y=Nn(),w=d[Ke],D=$r(y,d);ba(w,d,y,a,null,c);for(let N=0;N<a.length;N++)Tr(Ss(d,w,y.directiveStart+N,y),d);iy(w,d,y),D&&Tr(D,d);const S=Ss(d,w,y.directiveStart+y.componentOffset,y);if(i[Cn]=d[Cn]=S,null!==p)for(const N of p)N(S,s);return Vp(w,y,i),S}(AC,xt,en,In,Ze,[L_]),jp(Re,Ze,null)}finally{xl()}return new $b(this.componentType,yt,qh(Ie,Ze),Ze,Ie)}}class $b extends _b{constructor(s,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new or(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const p=this._rootLView;k_(p[Ke],p,d,s,a),this.previousInputValues.set(s,a),Zh(pr(this._tNode.index,p))}}get injector(){return new ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function L_(){const i=Nn();lu(be()[Ke],i)}function Wp(i){let s=function cy(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(br(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new te(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=U_(i.inputs),y.declaredInputs=U_(i.declaredInputs),y.outputs=U_(i.outputs);const w=d.hostBindings;w&&an(i,w);const D=d.viewQuery,S=d.contentQueries;if(D&&Gb(i,D),S&&Vr(i,S),j(i.inputs,d.inputs),j(i.declaredInputs,d.declaredInputs),j(i.outputs,d.outputs),br(d)&&d.data.animation){const N=i.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(i),w===Wp&&(a=!1)}}s=Object.getPrototypeOf(s)}!function V_(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=Xt(d.hostAttrs,a=Xt(a,d.hostAttrs))}}(c)}function U_(i){return i===fn?{}:i===Et?[]:i}function Gb(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function Vr(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{s(c,d,p),a(c,d,p)}:s}function an(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function Bc(i){return!!py(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function py(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Bo(i,s,a){return i[s]=a}function Ei(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function $_(i,s,a,c){const d=be();return Ei(d,Hs(),s)&&(Kt(),eo(Sn(),d,i,s,a,c)),$_}function $c(i,s,a,c){return Ei(i,Hs(),a)?s+K(a)+c:Nt}function kI(i,s,a,c,d,p,y,w){const D=be(),S=Kt(),N=i+$t,F=S.firstCreatePass?function Dd(i,s,a,c,d,p,y,w,D){const S=s.consts,N=qt(s,i,4,y||null,js(S,w));ry(s,a,N,js(S,D)),lu(s,N);const F=N.tView=ey(2,N,c,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S,null);return null!==s.queries&&(s.queries.template(s,N),F.queries=s.queries.embeddedTView(N)),N}(N,S,D,s,a,c,d,p,y):S.data[N];bs(F,!1);const G=Y_(S,D,F,i);Rl()&&Pc(S,D,G,F),Tr(G,D),wi(D,D[N]=Ta(G,D,G,F)),Ds(F)&&Xm(S,D,F),null!=y&&Up(D,F,w)}let Y_=function FI(i,s,a,c){return as(!0),s[Pt].createComment("")};function Wc(i){return Bs(function qv(){return pt.lFrame.contextLView}(),$t+i)}function Na(i,s,a){const c=be();return Ei(c,Hs(),s)&&_i(Kt(),Sn(),c,i,s,c[Pt],a,!1),Na}function _y(i,s,a,c,d){const y=d?"class":"style";k_(i,a,s.inputs[y],y,c)}function tg(i,s,a,c){const d=be(),p=Kt(),y=$t+i,w=d[Pt],D=p.firstCreatePass?function Xb(i,s,a,c,d,p){const y=s.consts,D=qt(s,i,2,c,js(y,d));return ry(s,a,D,js(y,p)),null!==D.attrs&&$p(D,D.attrs,!1),null!==D.mergedAttrs&&$p(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,p,d,s,a,c):p.data[y],S=Ey(p,d,D,w,s,i);d[y]=S;const N=Ds(D);return bs(D,!0),Ro(w,S,D),32!=(32&D.flags)&&Rl()&&Pc(p,d,S,D),0===function bl(){return pt.lFrame.elementDepthCount}()&&Tr(S,d),function ep(){pt.lFrame.elementDepthCount++}(),N&&(Xm(p,d,D),Vp(p,D,d)),null!==c&&Up(d,D),tg}function wy(){let i=Nn();iu()?function oa(){pt.lFrame.isParent=!1}():(i=i.parent,bs(i,!1));const s=i;(function nu(i){return pt.skipHydrationRootTNode===i})(s)&&function ph(){pt.skipHydrationRootTNode=null}(),function hh(){pt.lFrame.elementDepthCount--}();const a=Kt();return a.firstCreatePass&&(lu(a,i),Qo(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Kn(i){return 0!=(8&i.flags)}(s)&&_y(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Io(i){return 0!=(16&i.flags)}(s)&&_y(a,s,be(),s.stylesWithoutHost,!1),wy}function ng(i,s,a,c){return tg(i,s,a,c),wy(),ng}let Ey=(i,s,a,c,d,p)=>(as(!0),ps(c,d,function ip(){return pt.lFrame.currentNamespace}()));function X_(){return be()}function Cd(i){return!!i&&"function"==typeof i.then}function rg(i){return!!i&&"function"==typeof i.subscribe}function bd(i,s,a,c){const d=be(),p=Kt(),y=Nn();return function Ii(i,s,a,c,d,p,y){const w=Ds(c),S=i.firstCreatePass&&Uo(i),N=s[Cn],F=O_(s);let G=!0;if(3&c.type||y){const Re=$r(c,s),Ze=y?y(Re):Re,yt=F.length,Ie=y?en=>y(bn(en[c.index])):c.index;let xt=null;if(!y&&w&&(xt=function UI(i,s,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===c){const w=s[fo],D=d[p+2];return w.length>D?w[D]:null}"string"==typeof y&&(p+=2)}return null}(i,s,d,c.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=p,xt.__ngLastListenerFn__=p,G=!1;else{p=ig(c,s,N,p,!1);const en=a.listen(Ze,d,p);F.push(p,en),S&&S.push(d,Ie,yt,yt+1)}}else p=ig(c,s,N,p,!1);const Z=c.outputs;let ve;if(G&&null!==Z&&(ve=Z[d])){const Re=ve.length;if(Re)for(let Ze=0;Ze<Re;Ze+=2){const In=s[ve[Ze]][ve[Ze+1]].subscribe(p),so=F.length;F.push(p,In),S&&S.push(d,c.index,so,-(so+1))}}}(p,d,d[Pt],y,i,s,c),bd}function t0(i,s,a,c){try{return Hi(6,s,a),!1!==a(c)}catch(d){return Jh(i,d),!1}finally{Hi(7,s,a)}}function ig(i,s,a,c,d){return function p(y){if(y===Function)return c;Zh(i.componentOffset>-1?pr(i.index,s):s);let D=t0(s,a,c,y),S=p.__ngNextListenerFn__;for(;S;)D=t0(s,a,S,y)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function sg(i=1){return function uu(i){return(pt.lFrame.contextLView=function np(i,s){for(;i>0;)s=s[is],i--;return s}(i,pt.lFrame.contextLView))[Cn]}(i)}function by(i,s,a){return Fu(i,"",s,"",a),by}function Fu(i,s,a,c,d){const p=be(),y=$c(p,s,a,c);return y!==Nt&&_i(Kt(),Sn(),p,i,y,p[Pt],d,!1),Fu}function og(i,s){return i<<17|s<<2}function Kc(i){return i>>17&32767}function o0(i){return 2|i}function Yc(i){return(131068&i)>>2}function a0(i,s){return-131069&i|s<<2}function Vu(i){return 1|i}function u0(i,s,a,c,d){const p=i[a+1],y=null===s;let w=c?Kc(p):Yc(p),D=!1;for(;0!==w&&(!1===D||y);){const N=i[w+1];rT(i[w],s)&&(D=!0,i[w+1]=c?Vu(N):o0(N)),w=c?Kc(N):Yc(N)}D&&(i[a+1]=c?o0(p):Vu(p))}function rT(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&M(i,s)>=0}function gf(i,s){return function ro(i,s,a,c){const d=be(),p=Kt(),y=function gn(i){const s=pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function XI(i,s,a,c){const d=i.data;if(null===d[a+1]){const p=d[ti()],y=function Oy(i,s){return s>=i.expandoStartIndex}(i,a);(function Py(i,s){return 0!=(i.flags&(s?8:16))})(p,c)&&null===s&&!y&&(s=!1),s=function eD(i,s,a,c){const d=function ou(i){const s=pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Oa(a=Qc(null,i,s,a,c),s.attrs,c),p=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=Qc(d,i,s,a,c),null===p){let D=function oT(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Yc(c))return i[Kc(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=Qc(null,i,s,D[1],c),D=Oa(D,s.attrs,c),function tD(i,s,a,c){i[Kc(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else p=function aT(i,s,a){let c;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)c=Oa(c,i[p].hostAttrs,a);return Oa(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,c),function qI(i,s,a,c,d,p){let y=p?s.classBindings:s.styleBindings,w=Kc(y),D=Yc(y);i[c]=a;let N,S=!1;if(Array.isArray(a)?(N=a[1],(null===N||M(a,N)>0)&&(S=!0)):N=a,d)if(0!==D){const G=Kc(i[w+1]);i[c+1]=og(G,w),0!==G&&(i[G+1]=a0(i[G+1],c)),i[w+1]=function GI(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=og(w,0),0!==w&&(i[w+1]=a0(i[w+1],c)),w=c;else i[c+1]=og(D,0),0===w?w=c:i[D+1]=a0(i[D+1],c),D=c;S&&(i[c+1]=o0(i[c+1])),u0(i,N,c,!0),u0(i,N,c,!1),function nT(i,s,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&M(p,s)>=0&&(a[c+1]=Vu(a[c+1]))}(s,N,i,c,p),y=og(w,D),p?s.classBindings=y:s.styleBindings=y}(d,p,s,a,y,c)}}(p,i,y,c),s!==Nt&&Ei(d,y,s)&&function d0(i,s,a,c,d,p,y,w){if(!(3&s.type))return;const D=i.data,S=D[w+1],N=function zI(i){return 1==(1&i)}(S)?iD(D,s,a,d,Yc(S),y):void 0;mf(N)||(mf(p)||function Ty(i){return 2==(2&i)}(S)&&(p=iD(D,null,a,d,w,y)),function EE(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:fs.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=fs.Important),i.setStyle(a,c,d,p))}}(c,y,oc(ti(),a),d,p))}(p,p.data[ti()],d,d[Pt],i,d[y+1]=function uT(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Q(gs(i)))),i}(s,a),c,y)}(i,s,null,!0),gf}function Qc(i,s,a,c,d){let p=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(p=s[w],c=Oa(c,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function Oa(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const y=s[p];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),E(i,y,!!a||s[++p]))}return void 0===i?null:i}function iD(i,s,a,c,d,p){const y=null===s;let w;for(;d>0;){const D=i[d],S=Array.isArray(D),N=S?D[1]:D,F=null===N;let G=a[d+1];G===Nt&&(G=F?Et:void 0);let Z=F?C(G,c):N===c?G:void 0;if(S&&!mf(Z)&&(Z=C(D,c)),mf(Z)&&(w=Z,y))return w;const ve=i[d+1];d=y?Kc(ve):Yc(ve)}if(null!==s){let D=p?s.residualClasses:s.residualStyles;null!=D&&(w=C(D,c))}return w}function mf(i){return void 0!==i}function h0(i,s=""){const a=be(),c=Kt(),d=i+$t,p=c.firstCreatePass?qt(c,d,1,s,null):c.data[d],y=f0(c,a,p,s,i);a[d]=y,Rl()&&Pc(c,a,y,p),bs(p,!1)}let f0=(i,s,a,c,d)=>(as(!0),function Nc(i,s){return i.createText(s)}(s[Pt],c));function Sd(i){return Ad("",i,""),Sd}function Ad(i,s,a){const c=be(),d=$c(c,i,s,a);return d!==Nt&&function Ou(i,s,a){const c=oc(s,i);!function Xl(i,s,a){i.setValue(s,a)}(i[Pt],c,a)}(c,ti(),d),Ad}const Bu=void 0;var I0=["en",[["a","p"],["AM","PM"],Bu],[["AM","PM"],Bu,Bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bu,"{1} 'at' {0}",Bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vT(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let vf={};function _f(i){const s=function _T(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=xd(s);if(a)return a;const c=s.split("-")[0];if(a=xd(c),a)return a;if("en"===c)return I0;throw new te(701,!1)}function D0(i){return _f(i)[bt.PluralCase]}function xd(i){return i in vf||(vf[i]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[i]),vf[i]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const wf="en-US";let gD=wf;function H0(i,s,a,c,d){if(i=Me(i),Array.isArray(i))for(let p=0;p<i.length;p++)H0(i[p],s,a,c,d);else{const p=Kt(),y=be();let w=Fc(i)?i:Me(i.provide),D=UE(i);const S=Nn(),N=1048575&S.providerIndexes,F=S.directiveStart,G=S.providerIndexes>>20;if(Fc(i)||!i.multi){const Z=new cr(D,d,dd),ve=Xc(w,s,d?N:N+G,F);-1===ve?(Yt(le(S,y),p,w),vg(p,i,s.length),s.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Z),y.push(Z)):(a[ve]=Z,y[ve]=Z)}else{const Z=Xc(w,s,N+G,F),ve=Xc(w,s,N,N+G),Ze=ve>=0&&a[ve];if(d&&!Ze||!d&&!(Z>=0&&a[Z])){Yt(le(S,y),p,w);const yt=function FT(i,s,a,c,d){const p=new cr(i,a,dd);return p.multi=[],p.index=s,p.componentProviders=0,G0(p,d,c&&!a),p}(d?uv:ND,a.length,d,c,D);!d&&Ze&&(a[ve].providerFactory=yt),vg(p,i,s.length,0),s.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(yt),y.push(yt)}else vg(p,i,Z>-1?Z:ve,G0(a[d?ve:Z],D,!d&&c));!d&&c&&Ze&&a[ve].componentProviders++}}}function vg(i,s,a,c){const d=Fc(s),p=function fb(i){return!!i.useClass}(s);if(d||p){const D=(p?Me(s.useClass):s).prototype.ngOnDestroy;if(D){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const N=S.indexOf(a);-1===N?S.push(a,[c,D]):S[N+1].push(c,D)}else S.push(a,D)}}}function G0(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Xc(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function ND(i,s,a,c){return z0(this.multi,[])}function uv(i,s,a,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ss(a,a[Ke],this.providerFactory.index,c);p=w.slice(0,y),z0(d,p);for(let D=y;D<w.length;D++)p.push(w[D])}else p=[],z0(d,p);return p}function z0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function RD(i,s=[]){return a=>{a.providersResolver=(c,d)=>function yg(i,s,a){const c=Kt();if(c.firstCreatePass){const d=br(i);H0(a,c.data,c.blueprint,d,!0),H0(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class bf{}class _g{}function q0(i,s){return new wg(i,s??null,[])}class wg extends bf{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zp(this);const d=Nr(s);this._bootstrapComponents=Xs(d.bootstrap),this._r3Injector=xu(s,a,[{provide:bf,useValue:this},{provide:Zm,useValue:this.componentFactoryResolver},...c],Q(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class cv extends _g{constructor(s){super(),this.moduleType=s}create(s){return new wg(this.moduleType,s,[])}}class lv extends bf{constructor(s){super(),this.componentFactoryResolver=new zp(this),this.instance=null;const a=new Bn([...s.providers,{provide:bf,useValue:this},{provide:Zm,useValue:this.componentFactoryResolver}],s.parent||bu(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Eg(i,s,a=null){return new lv({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let Z0=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=oe(0,a.type),d=c.length>0?Eg([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Jt({token:i,providedIn:"environment",factory:()=>new i(tn(Lc))}),i})();function K0(i){i.getStandaloneInjector=s=>s.get(Z0).getOrCreateStandaloneInjector(i)}function hv(i,s,a,c){return Hn(be(),Or(),i,s,a,c)}function tw(i,s,a,c,d){return function ii(i,s,a,c,d,p,y){const w=s+a;return function jc(i,s,a,c){const d=Ei(i,s,a);return Ei(i,s+1,c)||d}(i,w,d,p)?Bo(i,w+2,y?c.call(y,d,p):c(d,p)):Sf(i,w+2)}(be(),Or(),i,s,a,c,d)}function Sf(i,s){const a=i[s];return a===Nt?void 0:a}function Hn(i,s,a,c,d,p){const y=s+a;return Ei(i,y,d)?Bo(i,y+1,p?c.call(p,d):c(d)):Sf(i,y+1)}function Dg(i,s){const a=Kt();let c;const d=i+$t;a.firstCreatePass?(c=function jD(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks??=[]).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=Us(c.type)),y=hn(dd);try{const w=It(!1),D=p();return It(w),function eg(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,be(),d,D),D}finally{hn(y)}}function HD(i,s,a){const c=i+$t,d=be(),p=Bs(d,c);return function pv(i,s){return i[Ke].data[s].pure}(d,c)?Hn(d,Or(),s,p.transform,a,p):p.transform(a)}function dr(i){return s=>{setTimeout(i,void 0,s)}}const Go=class nM extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,p=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),p=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(p=dr(p),d&&(d=dr(d)),y&&(y=dr(y)));const w=super.subscribe({next:d,error:p,complete:y});return s instanceof q.w0&&s.add(w),w}};function zT(){return this._results[Symbol.iterator]()}class iw{get changes(){return this._changes||(this._changes=new Go)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=iw.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=zT)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function lr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function wc(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=s[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Af=(()=>{class i{}return i.__NG_ELEMENT_ID__=ZT,i})();const qT=Af,WT=class extends qT{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a,null)}createEmbeddedViewImpl(s,a,c){const d=this._declarationTContainer.tView,p=Lp(this._declarationLView,d,s,16,null,d.declTNode,null,null,null,a||null,c||null);p[Ko]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[Si];return null!==w&&(p[Si]=w.createEmbeddedView(d)),jp(d,p,s),new Gp(p)}};function ZT(){return gv(Nn(),be())}function gv(i,s){return 4&i.type?new WT(s,i,qh(i,s)):null}let kd=(()=>{class i{}return i.__NG_ELEMENT_ID__=XT,i})();function XT(){return GD(Nn(),be())}const eS=kd,sw=class extends eS{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return qh(this._hostTNode,this._hostLView)}get injector(){return new ha(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ri(this._hostTNode,this._hostLView);if(us(s)){const a=gr(s,this._hostLView),c=Vn(s);return new ha(a[Ke].data[c+8],a)}return new ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ow(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(s,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const w=s.createEmbeddedViewImpl(a||{},p,null);return this.insertImpl(w,d,false),w}createComponent(s,a,c,d,p){const y=s&&!function So(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const Re=a||{};w=Re.index,c=Re.injector,d=Re.projectableNodes,p=Re.environmentInjector||Re.ngModuleRef}const D=y?s:new Pu(Ut(s)),S=c||this.parentInjector;if(!p&&null==D.ngModule){const Ze=(y?S:this.parentInjector).get(Lc,null);Ze&&(p=Ze)}Ut(D.componentType??{});const Z=D.create(S,d,null,p);return this.insertImpl(Z.hostView,w,false),Z}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView,p=d[Ke];if(function ch(i){return hi(i[pn])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const S=d[pn],N=new sw(S,S[Ur],S[pn]);N.detach(N.indexOf(s))}}const y=this._adjustIndex(a),w=this._lContainer;if(function Ph(i,s,a,c){const d=fr+c,p=a.length;c>0&&(a[d-1][li]=s),c<p-fr?(s[li]=a[d],Pi(a,fr+c,s)):(a.push(s),s[li]=null),s[pn]=a;const y=s[Ko];null!==y&&a!==y&&function xm(i,s){const a=i[go];s[Ln]!==s[pn][pn][Ln]&&(i[ss]=!0),null===a?i[go]=[s]:a.push(s)}(y,s);const w=s[Si];null!==w&&w.insertView(i),s[Lt]|=128}(p,d,w,y),!c){const D=kh(y,w),S=d[Pt],N=Xe(S,w[ei]);null!==N&&function Mm(i,s,a,c,d,p){c[Gn]=d,c[Ur]=s,nd(i,c,a,1,d,p)}(p,w[Ur],S,d,N,D)}return s.attachToViewContainerRef(),Pi(Mf(w),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ow(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=_a(this._lContainer,a);c&&($l(Mf(this._lContainer),a),Nm(c[Ke],c))}detach(s){const a=this._adjustIndex(s,-1),c=_a(this._lContainer,a);return c&&null!=$l(Mf(this._lContainer),a)?new Gp(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function ow(i){return i[Ai]}function Mf(i){return i[Ai]||(i[Ai]=[])}function GD(i,s){let a;const c=s[i.index];return hi(c)?a=c:(a=Ta(c,s,null,i),s[i.index]=a,wi(s,a)),bg(a,s,i,c),new sw(a,i,s)}let bg=function xf(i,s,a,c){if(i[ei])return;let d;d=8&a.type?bn(c):function Fd(i,s){const a=i[Pt],c=a.createComment(""),d=$r(s,i);return x(a,Xe(a,d),c,function rt(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[ei]=d};class uw{constructor(s){this.queryList=s,this.matches=null}clone(){return new uw(this.queryList)}setDirty(){this.queryList.setDirty()}}class cw{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new cw(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==_v(s,a).matches&&this.queries[a].setDirty()}}class qD{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Tg{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Tg(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Sg{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Sg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(s,a,WD(a,p)),this.matchTNodeWithReadOption(s,a,bo(a,s,p,!1,!1))}else c===Af?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,bo(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Wh||d===kd||d===Af&&4&a.type)this.addMatch(a.index,-2);else{const p=bo(a,s,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function WD(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function ZD(i,s,a,c){return-1===a?function Ld(i,s){return 11&i.type?qh(i,s):4&i.type?gv(i,s):null}(s,i):-2===a?function KD(i,s,a){return a===Wh?qh(s,i):a===Af?gv(s,i):a===kd?GD(s,i):void 0}(i,s,c):Ss(i,i[Ke],a,s)}function yv(i,s,a,c){const d=s[Si].queries[c];if(null===d.matches){const p=i.data,y=a.matches,w=[];for(let D=0;D<y.length;D+=2){const S=y[D];w.push(S<0?null:ZD(s,p[S],y[D+1],a.metadata.read))}d.matches=w}return d.matches}function Vd(i,s,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const y=yv(i,s,d,a);for(let w=0;w<p.length;w+=2){const D=p[w];if(D>0)c.push(y[w/2]);else{const S=p[w+1],N=s[-D];for(let F=fr;F<N.length;F++){const G=N[F];G[Ko]===G[pn]&&Vd(G[Ke],G,S,c)}if(null!==N[go]){const F=N[go];for(let G=0;G<F.length;G++){const Z=F[G];Vd(Z[Ke],Z,S,c)}}}}}return c}function YD(i){const s=be(),a=Kt(),c=mh();hc(c+1);const d=_v(a,c);if(i.dirty&&function fm(i){return 4==(4&i[Lt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Vd(a,s,c,[]):yv(a,s,d,c);i.reset(p,Db),i.notifyOnChanges()}return!0}return!1}function Ag(i,s,a,c){const d=Kt();if(d.firstCreatePass){const p=Nn();(function xg(i,s,a){null===i.queries&&(i.queries=new Tg),i.queries.track(new Sg(s,a))})(d,new qD(s,a,c),p.index),function JD(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function QD(i,s,a){const c=new iw(4==(4&a));(function iI(i,s,a,c){const d=O_(s);d.push(a),i.firstCreatePass&&Uo(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[Si]&&(s[Si]=new cw),s[Si].queries.push(new uw(c))}(d,be(),a)}function lw(){return function Mg(i,s){return i[Si].queries[s].queryList}(be(),mh())}function _v(i,s){return i.queries.getByIndex(s)}function dw(i){return!!Nr(i)}const hS=new Mt("Application Initializer");let Ew=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Zt(hS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const p=d();if(Cd(p))a.push(p);else if(rg(p)){const y=new Promise((w,D)=>{p.subscribe({complete:w,error:D})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),aC=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Iw=new Mt("LocaleId",{providedIn:"root",factory:()=>Zt(Iw,qe.Optional|qe.SkipSelf)||function fS(){return typeof $localize<"u"&&$localize.locale||wf}()}),pS=new Mt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let uC=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new P.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class mS{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let yS=(()=>{class i{compileModuleSync(a){return new cv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Xs(Nr(a).declarations).reduce((y,w)=>{const D=Ut(w);return D&&y.push(new Pu(D)),y},[]);return new mS(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const DS=(()=>Promise.resolve(0))();function Fg(i){typeof Zone>"u"?DS.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}function Dw(...i){}class Di{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Go(!1),this.onMicrotaskEmpty=new Go(!1),this.onStable=new Go(!1),this.onError=new Go(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function cC(){let i=sn.requestAnimationFrame,s=sn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Tv(i){const s=()=>{!function lC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(sn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,bw(i),i.isCheckStableRunning=!0,Cw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),bw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,y,w)=>{try{return Tw(i),a.invokeTask(d,p,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Sw(i)}},onInvoke:(a,c,d,p,y,w,D)=>{try{return Tw(i),a.invoke(d,p,y,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),Sw(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,bw(i),Cw(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Di.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(Di.isInAngularZone())throw new te(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,s,CS,Dw,Dw);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const CS={};function Cw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function bw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Tw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Sw(i){i._nesting--,Cw(i)}class Bd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Go,this.onMicrotaskEmpty=new Go,this.onStable=new Go,this.onError=new Go}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const xs=new Mt("",{providedIn:"root",factory:Bi});function Bi(){const i=Zt(Di);let s=!0;const a=new J.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new J.y(d=>{let p;i.runOutsideAngular(()=>{p=i.onStable.subscribe(()=>{Di.assertNotInAngularZone(),Fg(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Di.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(a,c.pipe((0,pe.B)()))}const Aw=new Mt(""),Mw=new Mt("");let xw,Lg=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xw||(function Ji(i){xw=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Di.assertNotInAngularZone(),Fg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fg(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(tn(Di),tn(Pf),tn(Mw))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),Pf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return xw?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Fa=null;const jd=new Mt("AllowMultipleToken"),zu=new Mt("PlatformDestroyListeners"),Vg=new Mt("appBootstrapListener");class Hd{constructor(s,a){this.name=s,this.token=a}}function hC(i,s,a=[]){const c=`Platform: ${s}`,d=new Mt(c);return(p=[])=>{let y=Nw();if(!y||y.injector.get(jd,!1)){const w=[...a,...p,{provide:d,useValue:!0}];i?i(w):function TS(i){if(Fa&&!Fa.get(jd,!1))throw new te(400,!1);(function dC(){!function nc(i){Xa=i}(()=>{throw new te(600,!1)})})(),Fa=i;const s=i.get(Bg);(function Ug(i){i.get(jE,null)?.forEach(a=>a())})(i)}(function fC(i=[],s){return Nu.create({name:s,providers:[{provide:LE,useValue:"platform"},{provide:zu,useValue:new Set([()=>Fa=null])},...i]})}(w,c))}return function SS(i){const s=Nw();if(!s)throw new te(401,!1);return s}()}}function Nw(){return Fa?.get(Bg)??null}let Bg=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function kf(i="zone.js",s){return"noop"===i?new Bd:"zone.js"===i?new Di(s):i}(c?.ngZone,function qu(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function W0(i,s,a){return new wg(i,s,a)}(a.moduleType,this.injector,function $g(i){return[{provide:Di,useFactory:i},{provide:Li,multi:!0,useFactory:()=>{const s=Zt(Ow,{optional:!0});return()=>s.initialize()}},{provide:Lf,useFactory:pC},{provide:xs,useFactory:Bi}]}(()=>d)),y=p.injector.get(En,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:D=>{y.handleError(D)}});p.onDestroy(()=>{Gd(this._modules,p),w.unsubscribe()})}),function jg(i,s,a){try{const c=a();return Cd(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const w=p.injector.get(Ew);return w.runInitializers(),w.donePromise.then(()=>(function qy(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(gD=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Iw,wf)||wf),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,c=[]){const d=Rw({},c);return function $d(i,s,a){const c=new cv(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Ff);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new te(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(zu,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(tn(Nu))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Rw(i,s){return Array.isArray(s)?s.reduce(Rw,i):{...i,...s}}let Ff=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Zt(Lf),this.zoneIsStable=Zt(xs),this.componentTypes=[],this.components=[],this.isStable=Zt(uC).hasPendingTasks.pipe((0,Pe.z)(a=>a?(0,de.of)(!1):this.zoneIsStable),(0,he.x)(),(0,pe.B)()),this._injector=Zt(Lc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof WE;if(!this._injector.get(Ew).done)throw!d&&Ls(a),new te(405,!1);let y;y=d?a:this._injector.get(Zm).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function bS(i){return i.isBoundToModule}(y)?void 0:this._injector.get(bf),S=y.create(Nu.NULL,[],c||y.selector,w),N=S.location.nativeElement,F=S.injector.get(Aw,null);return F?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),Gd(this.components,S),F?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Gd(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Vg,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Gd(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new te(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Gd(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const Lf=new Mt("",{providedIn:"root",factory:()=>Zt(En).handleError.bind(void 0)});function pC(){const i=Zt(Di),s=Zt(En);return a=>i.runOutsideAngular(()=>s.handleError(a))}let Ow=(()=>{class i{constructor(){this.zone=Zt(Di),this.applicationRef=Zt(Ff)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pM(){return!1}let RS=(()=>{class i{}return i.__NG_ELEMENT_ID__=OS,i})();function OS(i){return function mM(i,s,a){if(Is(i)&&!a){const c=pr(i.index,s);return new Gp(c,c)}return 47&i.type?new Gp(s[Ln],s):null}(Nn(),be(),16==(16&i))}class _C{constructor(){}supports(s){return Bc(s)}create(s){return new Av(s)}}const Ci=(i,s)=>s;class Av{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Ci}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<qg(c,d,p)?a:c,w=qg(y,d,p),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const S=w-d,N=D-d;if(S!=N){for(let G=0;G<S;G++){const Z=G<p.length?p[G]:p[G]=0,ve=Z+G;N<=ve&&ve<S&&(p[G]=Z+1)}p[y.previousIndex]=N-S}}w!==D&&s(y,w,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Bc(s))throw new te(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],y=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,w),c=!0),a=a._next}else d=0,function fy(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new Vw(a,c),p,d),s}_verifyReinsertion(s,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new zg),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zg),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Vw{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uw{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class zg{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Uw,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qg(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class Mv{constructor(){}supports(s){return s instanceof Map||py(s)}create(){return new kS}}class kS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||py(s)))throw new te(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new FS(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class FS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bw(){return new jw([new _C])}let jw=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Bw()),deps:[[i,new hs,new Wi]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new te(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Bw}),i})();function Uf(){return new xv([new Mv])}let xv=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Uf()),deps:[[i,new hs,new Wi]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new te(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Uf}),i})();const LS=hC(null,"core",[]);let VS=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(tn(Ff))},i.\u0275mod=ws({type:i}),i.\u0275inj=Xn({}),i})();function Ww(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function GS(i){const s=Ut(i);if(!s)return null;const a=new Pu(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone}}}},3942:(at,Ee,O)=>{O.d(Ee,{Z:()=>Ye});var h=O(2090),q=O(4859),P=O(6881),J=O(1877);class ne{constructor(ze,Oe){this._delegate=ze,this.firebase=Oe,(0,P._addComponent)(ze,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ze,Oe=P._DEFAULT_ENTRY_NAME){var gt;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(ze);return!ut.isInitialized()&&"EXPLICIT"===(null===(gt=ut.getComponent())||void 0===gt?void 0:gt.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:Oe})}_removeServiceInstance(ze,Oe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Oe)}_addComponent(ze){(0,P._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,P._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function he(){const Me=function Pe(Me){const ze={},Oe={__esModule:!0,initializeApp:function te(Te,Le={}){const ie=P.initializeApp(Te,Le);if((0,h.r3)(ze,ie.name))return ze[ie.name];const je=new Me(ie,Oe);return ze[ie.name]=je,je},app:ut,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function K(Te){const Le=Te.name,ie=Le.replace("-compat","");if(P._registerComponent(Te)&&"PUBLIC"===Te.type){const je=(Ht=ut())=>{if("function"!=typeof Ht[ie])throw pe.create("invalid-app-argument",{appName:Le});return Ht[ie]()};void 0!==Te.serviceProps&&(0,h.ZB)(je,Te.serviceProps),Oe[ie]=je,Me.prototype[ie]=function(...Ht){return this._getService.bind(this,Le).apply(this,Te.multipleInstances?Ht:[])}}return"PUBLIC"===Te.type?Oe[ie]:null},removeApp:function gt(Te){delete ze[Te]},useAsService:function fe(Te,Le){return"serverAuth"===Le?null:Le},modularAPIs:P}};function ut(Te){if(!(0,h.r3)(ze,Te=Te||P._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Te});return ze[Te]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function ge(){return Object.keys(ze).map(Te=>ze[Te])}}),ut.App=Me,Oe}(ne);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ze(Oe){(0,h.ZB)(Me,Oe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Me}(),j=new J.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=V;!function Ce(Me){(0,P.registerVersion)("@firebase/app-compat","0.2.12",Me)}()},6881:(at,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>uo,_DEFAULT_ENTRY_NAME:()=>qe,_addComponent:()=>xn,_addOrOverwriteComponent:()=>Qr,_apps:()=>mt,_clearComponents:()=>un,_components:()=>hn,_getProvider:()=>Er,_registerComponent:()=>sn,_removeServiceInstance:()=>Ba,deleteApp:()=>Ir,getApp:()=>ui,getApps:()=>es,initializeApp:()=>ja,onLog:()=>ts,registerVersion:()=>vn,setLogLevel:()=>tn});var h=O(5861),q=O(4859),P=O(1877),J=O(2090);const ne=(ce,ee)=>ee.some(xe=>ce instanceof xe);let de,pe;const V=new WeakMap,j=new WeakMap,Q=new WeakMap,Fe=new WeakMap,Ce=new WeakMap;let ze={get(ce,ee,xe){if(ce instanceof IDBTransaction){if("done"===ee)return j.get(ce);if("objectStoreNames"===ee)return ce.objectStoreNames||Q.get(ce);if("store"===ee)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return te(ce[ee])},set:(ce,ee,xe)=>(ce[ee]=xe,!0),has:(ce,ee)=>ce instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in ce};function ut(ce){return"function"==typeof ce?function gt(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...ee){return ce.apply(ge(this),ee),te(V.get(this))}:function(...ee){return te(ce.apply(ge(this),ee))}:function(ee,...xe){const ot=ce.call(ge(this),ee,...xe);return Q.set(ot,ee.sort?ee.sort():[ee]),te(ot)}}(ce):(ce instanceof IDBTransaction&&function Me(ce){if(j.has(ce))return;const ee=new Promise((xe,ot)=>{const Ct=()=>{ce.removeEventListener("complete",Vt),ce.removeEventListener("error",Xt),ce.removeEventListener("abort",Xt)},Vt=()=>{xe(),Ct()},Xt=()=>{ot(ce.error||new DOMException("AbortError","AbortError")),Ct()};ce.addEventListener("complete",Vt),ce.addEventListener("error",Xt),ce.addEventListener("abort",Xt)});j.set(ce,ee)}(ce),ne(ce,function Pe(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,ze):ce)}function te(ce){if(ce instanceof IDBRequest)return function Ye(ce){const ee=new Promise((xe,ot)=>{const Ct=()=>{ce.removeEventListener("success",Vt),ce.removeEventListener("error",Xt)},Vt=()=>{xe(te(ce.result)),Ct()},Xt=()=>{ot(ce.error),Ct()};ce.addEventListener("success",Vt),ce.addEventListener("error",Xt)});return ee.then(xe=>{xe instanceof IDBCursor&&V.set(xe,ce)}).catch(()=>{}),Ce.set(ee,ce),ee}(ce);if(Fe.has(ce))return Fe.get(ce);const ee=ut(ce);return ee!==ce&&(Fe.set(ce,ee),Ce.set(ee,ce)),ee}const ge=ce=>Ce.get(ce),Te=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],ie=new Map;function je(ce,ee){if(!(ce instanceof IDBDatabase)||ee in ce||"string"!=typeof ee)return;if(ie.get(ee))return ie.get(ee);const xe=ee.replace(/FromIndex$/,""),ot=ee!==xe,Ct=Le.includes(xe);if(!(xe in(ot?IDBIndex:IDBObjectStore).prototype)||!Ct&&!Te.includes(xe))return;const Vt=function(){var Xt=(0,h.Z)(function*(ur,...tr){const _s=this.transaction(ur,Ct?"readwrite":"readonly");let co=_s.store;return ot&&(co=co.index(tr.shift())),(yield Promise.all([co[xe](...tr),Ct&&_s.done]))[0]});return function(tr){return Xt.apply(this,arguments)}}();return ie.set(ee,Vt),Vt}!function Oe(ce){ze=ce(ze)}(ce=>({...ce,get:(ee,xe,ot)=>je(ee,xe)||ce.get(ee,xe,ot),has:(ee,xe)=>!!je(ee,xe)||ce.has(ee,xe)}));class Ht{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function wr(ce){const ee=ce.getComponent();return"VERSION"===ee?.type}(xe)){const ot=xe.getImmediate();return`${ot.library}/${ot.version}`}return null}).filter(xe=>xe).join(" ")}}const Kr="@firebase/app",ae=new P.Yd("@firebase/app"),qe="[DEFAULT]",lt={[Kr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mt=new Map,hn=new Map;function xn(ce,ee){try{ce.container.addComponent(ee)}catch(xe){ae.debug(`Component ${ee.name} failed to register with FirebaseApp ${ce.name}`,xe)}}function Qr(ce,ee){ce.container.addOrOverwriteComponent(ee)}function sn(ce){const ee=ce.name;if(hn.has(ee))return ae.debug(`There were multiple attempts to register component ${ee}.`),!1;hn.set(ee,ce);for(const xe of mt.values())xn(xe,ce);return!0}function Er(ce,ee){const xe=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),ce.container.getProvider(ee)}function Ba(ce,ee,xe=qe){Er(ce,ee).clearInstance(xe)}function un(){hn.clear()}const jt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xi{constructor(ee,xe,ot){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=ot,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const uo="9.22.2";function ja(ce,ee={}){let xe=ce;"object"!=typeof ee&&(ee={name:ee});const ot=Object.assign({name:qe,automaticDataCollectionEnabled:!1},ee),Ct=ot.name;if("string"!=typeof Ct||!Ct)throw jt.create("bad-app-name",{appName:String(Ct)});if(xe||(xe=(0,J.aH)()),!xe)throw jt.create("no-options");const Vt=mt.get(Ct);if(Vt){if((0,J.vZ)(xe,Vt.options)&&(0,J.vZ)(ot,Vt.config))return Vt;throw jt.create("duplicate-app",{appName:Ct})}const Xt=new q.H0(Ct);for(const tr of hn.values())Xt.addComponent(tr);const ur=new Xi(xe,ot,Xt);return mt.set(Ct,ur),ur}function ui(ce=qe){const ee=mt.get(ce);if(!ee&&ce===qe&&(0,J.aH)())return ja();if(!ee)throw jt.create("no-app",{appName:ce});return ee}function es(){return Array.from(mt.values())}function Ir(ce){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(ce){const ee=ce.name;mt.has(ee)&&(mt.delete(ee),yield Promise.all(ce.container.getProviders().map(xe=>xe.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function vn(ce,ee,xe){var ot;let Ct=null!==(ot=lt[ce])&&void 0!==ot?ot:ce;xe&&(Ct+=`-${xe}`);const Vt=Ct.match(/\s|\//),Xt=ee.match(/\s|\//);if(Vt||Xt){const ur=[`Unable to register library "${Ct}" with version "${ee}":`];return Vt&&ur.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Vt&&Xt&&ur.push("and"),Xt&&ur.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void ae.warn(ur.join(" "))}sn(new q.wA(`${Ct}-version`,()=>({library:Ct,version:ee}),"VERSION"))}function ts(ce,ee){if(null!==ce&&"function"!=typeof ce)throw jt.create("invalid-log-argument");(0,P.Am)(ce,ee)}function tn(ce){(0,P.Ub)(ce)}const ns="firebase-heartbeat-database",Zt=1,U="firebase-heartbeat-store";let L=null;function z(){return L||(L=function K(ce,ee,{blocked:xe,upgrade:ot,blocking:Ct,terminated:Vt}={}){const Xt=indexedDB.open(ce,ee),ur=te(Xt);return ot&&Xt.addEventListener("upgradeneeded",tr=>{ot(te(Xt.result),tr.oldVersion,tr.newVersion,te(Xt.transaction),tr)}),xe&&Xt.addEventListener("blocked",tr=>xe(tr.oldVersion,tr.newVersion,tr)),ur.then(tr=>{Vt&&tr.addEventListener("close",()=>Vt()),Ct&&tr.addEventListener("versionchange",_s=>Ct(_s.oldVersion,_s.newVersion,_s))}).catch(()=>{}),ur}(ns,Zt,{upgrade:(ce,ee)=>{0===ee&&ce.createObjectStore(U)}}).catch(ce=>{throw jt.create("idb-open",{originalErrorMessage:ce.message})})),L}function se(){return(se=(0,h.Z)(function*(ce){try{return yield(yield z()).transaction(U).objectStore(U).get(Rt(ce))}catch(ee){if(ee instanceof J.ZR)ae.warn(ee.message);else{const xe=jt.create("idb-get",{originalErrorMessage:ee?.message});ae.warn(xe.message)}}})).apply(this,arguments)}function nt(ce,ee){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(ce,ee){try{const ot=(yield z()).transaction(U,"readwrite");yield ot.objectStore(U).put(ee,Rt(ce)),yield ot.done}catch(xe){if(xe instanceof J.ZR)ae.warn(xe.message);else{const ot=jt.create("idb-set",{originalErrorMessage:xe?.message});ae.warn(ot.message)}}})).apply(this,arguments)}function Rt(ce){return`${ce.name}!${ce.options.appId}`}class Et{constructor(ee){this.container=ee,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new bi(xe),this._heartbeatsCachePromise=this._storage.read().then(ot=>(this._heartbeatsCache=ot,ot))}triggerHeartbeat(){var ee=this;return(0,h.Z)(function*(){const ot=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=zt();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!ee._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Ct))return ee._heartbeatsCache.heartbeats.push({date:Ct,agent:ot}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Vt=>{const Xt=new Date(Vt.date).valueOf();return Date.now()-Xt<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,h.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const xe=zt(),{heartbeatsToSend:ot,unsentEntries:Ct}=function Dr(ce,ee=1024){const xe=[];let ot=ce.slice();for(const Ct of ce){const Vt=xe.find(Xt=>Xt.agent===Ct.agent);if(Vt){if(Vt.dates.push(Ct.date),rs(xe)>ee){Vt.dates.pop();break}}else if(xe.push({agent:Ct.agent,dates:[Ct.date]}),rs(xe)>ee){xe.pop();break}ot=ot.slice(1)}return{heartbeatsToSend:xe,unsentEntries:ot}}(ee._heartbeatsCache.heartbeats),Vt=(0,J.L)(JSON.stringify({version:2,heartbeats:ot}));return ee._heartbeatsCache.lastSentHeartbeatDate=xe,Ct.length>0?(ee._heartbeatsCache.heartbeats=Ct,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Vt})()}}function zt(){return(new Date).toISOString().substring(0,10)}class bi{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,h.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function _e(ce){return se.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var xe=this;return(0,h.Z)(function*(){var ot;if(yield xe._canUseIndexedDBPromise){const Vt=yield xe.read();return nt(xe.app,{lastSentHeartbeatDate:null!==(ot=ee.lastSentHeartbeatDate)&&void 0!==ot?ot:Vt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var xe=this;return(0,h.Z)(function*(){var ot;if(yield xe._canUseIndexedDBPromise){const Vt=yield xe.read();return nt(xe.app,{lastSentHeartbeatDate:null!==(ot=ee.lastSentHeartbeatDate)&&void 0!==ot?ot:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...ee.heartbeats]})}})()}}function rs(ce){return(0,J.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function ci(ce){sn(new q.wA("platform-logger",ee=>new Ht(ee),"PRIVATE")),sn(new q.wA("heartbeat",ee=>new Et(ee),"PRIVATE")),vn(Kr,"0.9.12",ce),vn(Kr,"0.9.12","esm2017"),vn("fire-js","")}("")},4859:(at,Ee,O)=>{O.d(Ee,{H0:()=>Pe,wA:()=>P});var h=O(5861),q=O(2090);class P{constructor(V,j,Q){this.name=V,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const J="[DEFAULT]";class ne{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const Q=new q.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:j});Fe&&Q.resolve(Fe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const Q=this.normalizeInstanceIdentifier(V?.identifier),Fe=null!==(j=V?.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ce){if(Fe)return null;throw Ce}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function pe(he){return"EAGER"===he.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[j,Q]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(j);try{const Ce=this.getOrInitializeService({instanceIdentifier:Fe});Q.resolve(Ce)}catch{}}}}clearInstance(V=J){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,h.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=J){return this.instances.has(V)}getOptions(V=J){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,Q=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Ce,Ye]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ce)&&Ye.resolve(Fe);return Fe}onInit(V,j){var Q;const Fe=this.normalizeInstanceIdentifier(j),Ce=null!==(Q=this.onInitCallbacks.get(Fe))&&void 0!==Q?Q:new Set;Ce.add(V),this.onInitCallbacks.set(Fe,Ce);const Ye=this.instances.get(Fe);return Ye&&V(Ye,Fe),()=>{Ce.delete(V)}}invokeOnInitCallbacks(V,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Fe of Q)try{Fe(V,j)}catch{}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let Q=this.instances.get(V);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=V,he===J?void 0:he),options:j}),this.instances.set(V,Q),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(Q,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,Q)}catch{}var he;return Q||null}normalizeInstanceIdentifier(V=J){return this.component?this.component.multipleInstances?V:J:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new ne(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ee,O)=>{O.d(Ee,{Am:()=>he,Ub:()=>Pe,Yd:()=>pe,in:()=>q});const h=[];var q=(()=>((q=q||{})[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",q))();const P={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},J=q.INFO,ne={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},de=(V,j,...Q)=>{if(j<V.logLevel)return;const Fe=(new Date).toISOString(),Ce=ne[j];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ce](`[${Fe}]  ${V.name}:`,...Q)};class pe{constructor(j){this.name=j,this._logLevel=J,this._logHandler=de,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in q))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...j),this._logHandler(this,q.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...j),this._logHandler(this,q.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,q.INFO,...j),this._logHandler(this,q.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,q.WARN,...j),this._logHandler(this,q.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...j),this._logHandler(this,q.ERROR,...j)}}function Pe(V){h.forEach(j=>{j.setLogLevel(V)})}function he(V,j){for(const Q of h){let Fe=null;j&&j.level&&(Fe=P[j.level]),Q.userLogHandler=null===V?null:(Ce,Ye,...Me)=>{const ze=Me.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Ye>=(Fe??Ce.logLevel)&&V({level:q[Ye].toLowerCase(),message:ze,args:Me,type:Ce.name})}}}},259:(at,Ee,O)=>{O.d(Ee,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=O(6881);(0,h.registerVersion)("firebase","9.22.2","app")},9260:(at,Ee,O)=>{O.d(Ee,{Z:()=>h.Z});var h=O(3942);h.Z.registerVersion("firebase","9.22.2","app-compat")},2644:(at,Ee,O)=>{O.r(Ee);var h=O(5861),q=O(3942),P=O(2090),J=O(6881),ne=O(7582),de=O(1877),pe=O(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ye=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Me=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gt=new de.Yd("@firebase/auth");function te(v,...f){gt.logLevel<=de.in.ERROR&&gt.error(`Auth (${J.SDK_VERSION}): ${v}`,...f)}function ge(v,...f){throw Le(v,...f)}function K(v,...f){return Le(v,...f)}function fe(v,f,g){const _=Object.assign(Object.assign({},Me()),{[f]:g});return new P.LL("auth","Firebase",_).create(f,{appName:v.name})}function Te(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&ge(v,"argument-error"),fe(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(v,...f){if("string"!=typeof v){const g=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=v.name),v._errorFactory.create(g,..._)}return ze.create(v,...f)}function ie(v,f,...g){if(!v)throw Le(f,...g)}function je(v){const f="INTERNAL ASSERTION FAILED: "+v;throw te(f),new Error(f)}function Ht(v,f){v||je(f)}function wr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Kr(){return"http:"===Ps()||"https:"===Ps()}function Ps(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class we{constructor(f,g){this.shortDelay=f,this.longDelay=g,Ht(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kr()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(v,f){Ht(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class He{static initialize(f,g,_){this.fetchImpl=f,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wt=new we(3e4,6e4);function et(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Bt(v,f,g,_){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(v,f,g,_,T={}){return ct(v,T,(0,h.Z)(function*(){let x={},B={};_&&("GET"===f?B=_:x={body:JSON.stringify(_)});const Y=(0,P.xO)(Object.assign({key:v.config.apiKey},B)).slice(1),Se=yield v._getAdditionalHeaders();return Se["Content-Type"]="application/json",v.languageCode&&(Se["X-Firebase-Locale"]=v.languageCode),He.fetch()(Jt(v,v.config.apiHost,g,Y),Object.assign({method:f,headers:Se,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ct(v,f,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(v,f,g){v._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ve),f);try{const T=new si(v),x=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw Xn(v,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const Y=x.ok?B.errorMessage:B.error.message,[Se,$e]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw Xn(v,"credential-already-in-use",B);if("EMAIL_EXISTS"===Se)throw Xn(v,"email-already-in-use",B);if("USER_DISABLED"===Se)throw Xn(v,"user-disabled",B);const Xe=_[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw fe(v,Xe,$e);ge(v,Xe)}}catch(T){if(T instanceof P.ZR)throw T;ge(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function nn(v,f,g,_){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,h.Z)(function*(v,f,g,_,T={}){const x=yield Bt(v,f,g,_,T);return"mfaPendingCredential"in x&&ge(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Jt(v,f,g,_){const T=`${f}${g}?${_}`;return v.config.emulator?Ae(v.config,T):`${v.config.apiScheme}://${T}`}class si{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(K(this.auth,"network-request-failed")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(v,f,g){const _={appName:v.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const T=K(v,f,_);return T.customData._tokenResponse=g,T}function er(){return(er=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function oi(){return(oi=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ai(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function qe(){return(qe=(0,h.Z)(function*(v,f=!1){const g=(0,P.m9)(v),_=yield g.getIdToken(f),T=mt(_);ie(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,B=x?.sign_in_provider;return{claims:T,token:_,authTime:ai(lt(T.auth_time)),issuedAtTime:ai(lt(T.iat)),expirationTime:ai(lt(T.exp)),signInProvider:B||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function lt(v){return 1e3*Number(v)}function mt(v){const[f,g,_]=v.split(".");if(void 0===f||void 0===g||void 0===_)return te("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(g);return T?JSON.parse(T):(te("Failed to decode base64 JWT payload"),null)}catch(T){return te("Caught error parsing JWT payload as JSON",T?.toString()),null}}function xn(v,f){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(_){throw _ instanceof P.ZR&&function sn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(_)&&v.auth.currentUser===v&&(yield v.auth.signOut()),_}})).apply(this,arguments)}class Er{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class Ba{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ai(this.lastLoginAt),this.creationTime=ai(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function un(v){return xr.apply(this,arguments)}function xr(){return xr=(0,h.Z)(function*(v){var f;const g=v.auth,_=yield v.getIdToken(),T=yield xn(v,function Va(v,f){return oi.apply(this,arguments)}(g,{idToken:_}));ie(T?.users.length,g,"internal-error");const x=T.users[0];v._notifyReloadListener(x);const B=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?function ja(v){return v.map(f=>{var{providerId:g}=f,_=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(x.providerUserInfo):[],Y=function uo(v,f){return[...v.filter(_=>!f.some(T=>T.providerId===_.providerId)),...f]}(v.providerData,B),Xe=!!v.isAnonymous&&!(v.email&&x.passwordHash||Y?.length),rt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Y,metadata:new Ba(x.createdAt,x.lastLoginAt),isAnonymous:Xe};Object.assign(v,rt)}),xr.apply(this,arguments)}function Xi(){return(Xi=(0,h.Z)(function*(v){const f=(0,P.m9)(v);yield un(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(v,f){const g=yield ct(v,{},(0,h.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=v.config,B=Jt(v,T,"/v1/token",`key=${x}`),Y=yield v._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(B,{method:"POST",headers:Y,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ir{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ie(f.idToken,"internal-error"),ie(typeof f.idToken<"u","internal-error"),ie(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function hn(v){const f=mt(v);return ie(f,"internal-error"),ie(typeof f.exp<"u","internal-error"),ie(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var _=this;return(0,h.Z)(function*(){return ie(!_.accessToken||_.refreshToken,f,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var _=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:B}=yield function ui(v,f){return es.apply(this,arguments)}(f,g);_.updateTokensAndExpiration(T,x,Number(B))})()}updateTokensAndExpiration(f,g,_){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,g){const{refreshToken:_,accessToken:T,expirationTime:x}=g,B=new Ir;return _&&(ie("string"==typeof _,"internal-error",{appName:f}),B.refreshToken=_),T&&(ie("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),x&&(ie("number"==typeof x,"internal-error",{appName:f}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ir,this.toJSON())}_performRefresh(){return je("not implemented")}}function ar(v,f){ie("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class vn{constructor(f){var{uid:g,auth:_,stsTokenManager:T}=f,x=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Ba(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const _=yield xn(g,g.stsTokenManager.getToken(g.auth,f));return ie(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(f){return function Ua(v){return qe.apply(this,arguments)}(this,f)}reload(){return function jt(v){return Xi.apply(this,arguments)}(this)}_assign(f){this!==f&&(ie(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new vn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var _=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield un(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield xn(f,function Yr(v,f){return er.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var _,T,x,B,Y,Se,$e,Xe;const rt=null!==(_=g.displayName)&&void 0!==_?_:void 0,Un=null!==(T=g.email)&&void 0!==T?T:void 0,yi=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,No=null!==(B=g.photoURL)&&void 0!==B?B:void 0,Iu=null!==(Y=g.tenantId)&&void 0!==Y?Y:void 0,Oc=null!==(Se=g._redirectEventId)&&void 0!==Se?Se:void 0,Pc=null!==($e=g.createdAt)&&void 0!==$e?$e:void 0,Ys=null!==(Xe=g.lastLoginAt)&&void 0!==Xe?Xe:void 0,{uid:wa,emailVerified:kh,isAnonymous:An,providerData:td,stsTokenManager:Fh}=g;ie(wa&&Fh,f,"internal-error");const nd=Ir.fromJSON(this.name,Fh);ie("string"==typeof wa,f,"internal-error"),ar(rt,f.name),ar(Un,f.name),ie("boolean"==typeof kh,f,"internal-error"),ie("boolean"==typeof An,f,"internal-error"),ar(yi,f.name),ar(No,f.name),ar(Iu,f.name),ar(Oc,f.name),ar(Pc,f.name),ar(Ys,f.name);const Dp=new vn({uid:wa,auth:f,email:Un,emailVerified:kh,displayName:rt,isAnonymous:An,photoURL:No,phoneNumber:yi,tenantId:Iu,stsTokenManager:nd,createdAt:Pc,lastLoginAt:Ys});return td&&Array.isArray(td)&&(Dp.providerData=td.map(Cp=>Object.assign({},Cp))),Oc&&(Dp._redirectEventId=Oc),Dp}static _fromIdTokenResponse(f,g,_=!1){return(0,h.Z)(function*(){const T=new Ir;T.updateFromServerResponse(g);const x=new vn({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:_});return yield un(x),x})()}}const ts=new Map;function tn(v){Ht(v instanceof Function,"Expected a class definition");let f=ts.get(v);return f?(Ht(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,ts.set(v,f),f)}const Zt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,_){var T=this;return(0,h.Z)(function*(){T.storage[g]=_})()}_get(g){var _=this;return(0,h.Z)(function*(){const T=_.storage[g];return void 0===T?null:T})()}_remove(g){var _=this;return(0,h.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return v.type="NONE",v})();function U(v,f,g){return`firebase:${v}:${f}:${g}`}class L{constructor(f,g,_){this.persistence=f,this.auth=g,this.userKey=_;const{config:T,name:x}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,x),this.fullPersistenceKey=U("persistence",T.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?vn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,_="authUser"){return(0,h.Z)(function*(){if(!g.length)return new L(tn(Zt),f,_);const T=(yield Promise.all(g.map(function(){var $e=(0,h.Z)(function*(Xe){if(yield Xe._isAvailable())return Xe});return function(Xe){return $e.apply(this,arguments)}}()))).filter($e=>$e);let x=T[0]||tn(Zt);const B=U(_,f.config.apiKey,f.name);let Y=null;for(const $e of g)try{const Xe=yield $e._get(B);if(Xe){const rt=vn._fromJSON(f,Xe);$e!==x&&(Y=rt),x=$e;break}}catch{}const Se=T.filter($e=>$e._shouldAllowMigration);return x._shouldAllowMigration&&Se.length?(x=Se[0],Y&&(yield x._set(B,Y.toJSON())),yield Promise.all(g.map(function(){var $e=(0,h.Z)(function*(Xe){if(Xe!==x)try{yield Xe._remove(B)}catch{}});return function(Xe){return $e.apply(this,arguments)}}())),new L(x,f,_)):new L(x,f,_)})()}}function z(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ft(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(_e(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(_n(f))return"Blackberry";if(fn(f))return"Webos";if(se(f))return"Safari";if((f.includes("chrome/")||nt(f))&&!f.includes("edge/"))return"Chrome";if(Rt(f))return"Android";{const _=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function _e(v=(0,P.z$)()){return/firefox\//i.test(v)}function se(v=(0,P.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function nt(v=(0,P.z$)()){return/crios\//i.test(v)}function ft(v=(0,P.z$)()){return/iemobile/i.test(v)}function Rt(v=(0,P.z$)()){return/android/i.test(v)}function _n(v=(0,P.z$)()){return/blackberry/i.test(v)}function fn(v=(0,P.z$)()){return/webos/i.test(v)}function Et(v=(0,P.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function rs(v=(0,P.z$)()){return Et(v)||Rt(v)||fn(v)||_n(v)||/windows phone/i.test(v)||ft(v)}function ce(v,f=[]){let g;switch(v){case"Browser":g=z((0,P.z$)());break;case"Worker":g=`${z((0,P.z$)())}-${v}`;break;default:g=v}const _=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${J.SDK_VERSION}/${_}`}function xe(){return(xe=(0,h.Z)(function*(v){return(yield Bt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ot(v,f){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(v,f){return Bt(v,"GET","/v2/recaptchaConfig",et(v,f))})).apply(this,arguments)}function Vt(v){return void 0!==v&&void 0!==v.getResponse}function Xt(v){return void 0!==v&&void 0!==v.enterprise}class ur{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function _s(v){return new Promise((f,g)=>{const _=document.createElement("script");_.setAttribute("src",v),_.onload=f,_.onerror=T=>{const x=K("internal-error");x.customData=T,g(x)},_.type="text/javascript",_.charset="UTF-8",function tr(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(_)})}function co(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Kd{constructor(f){this.type="recaptcha-enterprise",this.auth=nr(f)}verify(f="verify",g=!1){var _=this;return(0,h.Z)(function*(){function x(){return x=(0,h.Z)(function*(Y){if(!g){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Se=(0,h.Z)(function*($e,Xe){ot(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rt=>{if(void 0!==rt.recaptchaKey){const Un=new ur(rt);return null==Y.tenantId?Y._agentRecaptchaConfig=Un:Y._tenantRecaptchaConfigs[Y.tenantId]=Un,$e(Un.siteKey)}Xe(new Error("recaptcha Enterprise site key undefined"))}).catch(rt=>{Xe(rt)})});return function($e,Xe){return Se.apply(this,arguments)}}())}),x.apply(this,arguments)}function B(Y,Se,$e){const Xe=window.grecaptcha;Xt(Xe)?Xe.enterprise.ready(()=>{Xe.enterprise.execute(Y,{action:f}).then(rt=>{Se(rt)}).catch(()=>{Se("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Se)=>{(function T(Y){return x.apply(this,arguments)})(_.auth).then($e=>{if(!g&&Xt(window.grecaptcha))B($e,Y,Se);else{if(typeof window>"u")return void Se(new Error("RecaptchaVerifier is only supported in browser"));_s("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{B($e,Y,Se)}).catch(Xe=>{Se(Xe)})}}).catch($e=>{Se($e)})})})()}}function Ti(v,f,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(v,f,g,_=!1){const T=new Kd(v);let x;try{x=yield T.verify(g)}catch{x=yield T.verify(g,!0)}const B=Object.assign({},f);return Object.assign(B,_?{captchaResp:x}:{captchaResponse:x}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class lo{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const _=x=>new Promise((B,Y)=>{try{B(f(x))}catch(Se){Y(Se)}});_.onAbort=g,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const _=[];try{for(const T of g.queue)yield T(f),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const x of _)try{x()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Yd{constructor(f,g,_,T){this.app=f,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fs(this),this.idTokenSubscription=new Fs(this),this.beforeStateQueue=new lo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,g){var _=this;return g&&(this._popupRedirectResolver=tn(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,x;if(!_._deleted&&(_.persistenceManager=yield L.create(_,f),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(x=_.currentUser)||void 0===x?void 0:x.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var _;const T=yield g.assertedPersistence.getCurrentUser();let x=T,B=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Y=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Se=x?._redirectEventId,$e=yield g.tryRedirectSignIn(f);(!Y||Y===Se)&&$e?.user&&(x=$e.user,B=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(x)}catch(Y){x=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Y))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return ie(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield un(f)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function me(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const _=f?(0,P.m9)(f):null;return _&&ie(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(f,g=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&ie(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(tn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.Z)(function*(){const g=yield ot(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new ur(g);null==f.tenantId?f._agentRecaptchaConfig=_:f._tenantRecaptchaConfigs[f.tenantId]=_,_.emailPasswordEnabled&&new Kd(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,_){return this.registerStateListener(this.authStateSubscription,f,g,_)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,_){return this.registerStateListener(this.idTokenSubscription,f,g,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var _=this;return(0,h.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const _=f&&tn(f)||g._popupRedirectResolver;ie(_,g,"argument-error"),g.redirectPersistenceManager=yield L.create(g,[tn(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var _,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,_,T){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof g?f.addObserver(g,_,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const x=yield f._getAppCheckToken();return x&&(_["X-Firebase-AppCheck"]=x),_})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var g;const _=yield null===(g=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return _?.error&&function ut(v,...f){gt.logLevel<=de.in.WARN&&gt.warn(`Auth (${J.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function nr(v){return(0,P.m9)(v)}class Fs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ho(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Jd(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class ws{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return je("not implemented")}_getIdTokenResponse(f){return je("not implemented")}_linkToIdToken(f,g){return je("not implemented")}_getReauthenticationResolver(f){return je("not implemented")}}function qf(v,f){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:resetPassword",et(v,f))})).apply(this,arguments)}function al(v,f){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:update",et(v,f))})).apply(this,arguments)}function cn(v,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithPassword",et(v,f))})).apply(this,arguments)}function Nr(v,f){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:sendOobCode",et(v,f))})).apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,f){return Nr(v,f)})).apply(this,arguments)}function Ga(v,f){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,h.Z)(function*(v,f){return Nr(v,f)})).apply(this,arguments)}function Gn(v,f){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(v,f){return Nr(v,f)})).apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(v,f){return Nr(v,f)})).apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithEmailLink",et(v,f))})).apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithEmailLink",et(v,f))})).apply(this,arguments)}class Cn extends ws{constructor(f,g,_,T=null){super("password",_),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new Cn(f,g,"password")}static _fromEmailAndCode(f,g,_=null){return new Cn(f,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){var _;switch(g.signInMethod){case"password":const T={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const x=yield Ti(f,T,"signInWithPassword");return cn(f,x)}return cn(f,T).catch(function(){var x=(0,h.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield Ti(f,T,"signInWithPassword");return cn(f,Y)}return Promise.reject(B)});return function(B){return x.apply(this,arguments)}}());case"emailLink":return function li(v,f){return Vs.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:ge(f,"internal-error")}})()}_linkToIdToken(f,g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return al(f,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ur(v,f){return fo.apply(this,arguments)}(f,{idToken:g,email:_._email,oobCode:_._password});default:ge(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Cr(v,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithIdp",et(v,f))})).apply(this,arguments)}class Xr extends ws{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Xr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):ge("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T}=g,x=(0,ne._T)(g,["providerId","signInMethod"]);if(!_||!T)return null;const B=new Xr(_,T);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(f){return Cr(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,Cr(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Cr(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function is(){return(is=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:sendVerificationCode",et(v,f))})).apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithPhoneNumber",et(v,f))})).apply(this,arguments)}function Si(){return(Si=(0,h.Z)(function*(v,f){const g=yield nn(v,"POST","/v1/accounts:signInWithPhoneNumber",et(v,f));if(g.temporaryProof)throw Xn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Yo={USER_NOT_FOUND:"user-not-found"};function di(){return(di=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithPhoneNumber",et(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Yo)})).apply(this,arguments)}class zn extends ws{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new zn({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new zn({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ln(v,f){return Ko.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function za(v,f){return Si.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function th(v,f){return di.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:_,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:_,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:_,phoneNumber:T,temporaryProof:x}=f;return _||g||T||x?new zn({verificationId:g,verificationCode:_,phoneNumber:T,temporaryProof:x}):null}}class $t{constructor(f){var g,_,T,x,B,Y;const Se=(0,P.zd)((0,P.pd)(f)),$e=null!==(g=Se.apiKey)&&void 0!==g?g:null,Xe=null!==(_=Se.oobCode)&&void 0!==_?_:null,rt=function ll(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Se.mode)&&void 0!==T?T:null);ie($e&&Xe&&rt,"argument-error"),this.apiKey=$e,this.operation=rt,this.code=Xe,this.continueUrl=null!==(x=Se.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=Se.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Y=Se.tenantId)&&void 0!==Y?Y:null}static parseLink(f){const g=function po(v){const f=(0,P.zd)((0,P.pd)(v)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(v)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||g||f||v}(f);try{return new $t(g)}catch{return null}}}let Ju=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,_){return Cn._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const T=$t.parseLink(_);return ie(T,"argument-error"),Cn._fromEmailAndCode(g,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ei extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ai extends ei{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ie("providerId"in g&&"signInMethod"in g,"argument-error"),Xr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ie(f.idToken||f.accessToken,"argument-error"),Xr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ai.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ai.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:x,nonce:B,providerId:Y}=f;if(!_&&!T&&!g&&!x||!Y)return null;try{return new Ai(Y)._credential({idToken:g,accessToken:_,nonce:B,pendingToken:x})}catch{return null}}}let go=(()=>{class v extends ei{constructor(){super("facebook.com")}static credential(g){return Xr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),mo=(()=>{class v extends ei{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Xr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:T}=g;if(!_&&!T)return null;try{return v.credential(_,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),fr=(()=>{class v extends ei{constructor(){super("github.com")}static credential(g){return Xr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class qn extends ws{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Cr(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,Cr(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Cr(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T,pendingToken:x}=g;return _&&T&&x&&_===T?new qn(_,x):null}static _create(f,g){return new qn(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qo extends ss{constructor(f){ie(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Qo.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Qo.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=qn.fromJSON(f);return ie(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:_}=f;if(!g||!_)return null;try{return qn._create(_,g)}catch{return null}}}let Is=(()=>{class v extends ei{constructor(){super("twitter.com")}static credential(g,_){return Xr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=g;if(!_||!T)return null;try{return v.credential(_,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ds(v,f){return br.apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signUp",et(v,f))})).apply(this,arguments)}class Rr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,_,T=!1){return(0,h.Z)(function*(){const x=yield vn._fromIdTokenResponse(f,_,T),B=yo(_);return new Rr({user:x,providerId:B,_tokenResponse:_,operationType:g})})()}static _forOperation(f,g,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const T=yo(_);return new Rr({user:f,providerId:T,_tokenResponse:_,operationType:g})})()}}function yo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function dl(){return(dl=(0,h.Z)(function*(v){var f;const g=nr(v);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Rr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield Ds(g,{returnSecureToken:!0}),T=yield Rr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class qa extends P.ZR{constructor(f,g,_,T){var x;super(g.code,g.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,qa.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,g,_,T){return new qa(f,g,_,T)}}function Wf(v,f,g,_){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?qa._fromErrorAndOperation(v,x,f,_):x})}function Zf(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function os(){return os=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v);yield Wa(!0,g,f);const{providerUserInfo:_}=yield function oo(v,f){return ao.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Zf(_||[]);return g.providerData=g.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),os.apply(this,arguments)}function hl(v,f){return fl.apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(v,f,g=!1){const _=yield xn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Rr._forOperation(v,"link",_)})).apply(this,arguments)}function Wa(v,f,g){return nh.apply(this,arguments)}function nh(){return(nh=(0,h.Z)(function*(v,f,g){yield un(f);const T=!1===v?"provider-already-linked":"no-such-provider";ie(Zf(f.providerData).has(g)===v,f.auth,T)})).apply(this,arguments)}function Kf(v,f){return pl.apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(v,f,g=!1){const{auth:_}=v,T="reauthenticate";try{const x=yield xn(v,Wf(_,T,f,v),g);ie(x.idToken,_,"internal-error");const B=mt(x.idToken);ie(B,_,"internal-error");const{sub:Y}=B;return ie(v.uid===Y,_,"user-mismatch"),Rr._forOperation(v,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&ge(_,"user-mismatch"),x}})).apply(this,arguments)}function rh(v,f){return ih.apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(v,f,g=!1){const _="signIn",T=yield Wf(v,_,f),x=yield Rr._fromIdTokenResponse(v,_,T);return g||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Za(v,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(v,f){return rh(nr(v),f)})).apply(this,arguments)}function um(v,f){return gl.apply(this,arguments)}function gl(){return(gl=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v);return yield Wa(!1,g,f.providerId),hl(g,f)})).apply(this,arguments)}function Wn(v,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(v,f){return Kf((0,P.m9)(v),f)})).apply(this,arguments)}function cm(){return(cm=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:signInWithCustomToken",et(v,f))})).apply(this,arguments)}function $i(){return $i=(0,h.Z)(function*(v,f){const g=nr(v),_=yield function Yf(v,f){return cm.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),T=yield Rr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(T.user),T}),$i.apply(this,arguments)}class Xu{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Ya._fromServerResponse(f,g):"totpInfo"in g?sh._fromServerResponse(f,g):ge(f,"internal-error")}}class Ya extends Xu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Ya(g)}}class sh extends Xu{constructor(f){super("totp",f)}static _fromServerResponse(f,g){return new sh(g)}}function Qa(v,f,g){var _;ie((null===(_=g.url)||void 0===_?void 0:_.length)>0,v,"invalid-continue-uri"),ie(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ie(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ie(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Br(){return Br=(0,h.Z)(function*(v,f,g){var _;const T=nr(v),x={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const B=yield Ti(T,x,"getOobCode",!0);g&&Qa(T,B,g),yield Ga(T,B)}else g&&Qa(T,x,g),yield Ga(T,x).catch(function(){var B=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Se=yield Ti(T,x,"getOobCode",!0);g&&Qa(T,Se,g),yield Ga(T,Se)}});return function(Y){return B.apply(this,arguments)}}())}),Br.apply(this,arguments)}function rr(){return(rr=(0,h.Z)(function*(v,f,g){yield qf((0,P.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Mi(){return Mi=(0,h.Z)(function*(v,f){yield function Ut(v,f){return hr.apply(this,arguments)}((0,P.m9)(v),{oobCode:f})}),Mi.apply(this,arguments)}function Ja(v,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v),_=yield qf(g,{oobCode:f}),T=_.requestType;switch(ie(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(_.mfaInfo,g,"internal-error");default:ie(_.email,g,"internal-error")}let x=null;return _.mfaInfo&&(x=Xu._fromServerResponse(nr(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(v,f){const{data:g}=yield Ja((0,P.m9)(v),f);return g.email})).apply(this,arguments)}function Xa(){return Xa=(0,h.Z)(function*(v,f,g){var _;const T=nr(v),x={returnSecureToken:!0,email:f,password:g,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const $e=yield Ti(T,x,"signUpPassword");B=Ds(T,$e)}else B=Ds(T,x).catch(function(){var $e=(0,h.Z)(function*(Xe){if("auth/missing-recaptcha-token"===Xe.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const rt=yield Ti(T,x,"signUpPassword");return Ds(T,rt)}return Promise.reject(Xe)});return function(Xe){return $e.apply(this,arguments)}}());const Y=yield B.catch($e=>Promise.reject($e)),Se=yield Rr._fromIdTokenResponse(T,"signIn",Y);return yield T._updateCurrentUser(Se.user),Se}),Xa.apply(this,arguments)}function vo(){return vo=(0,h.Z)(function*(v,f,g){var _;const T=nr(v),x={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function B(Y,Se){ie(Se.handleCodeInApp,T,"argument-error"),Se&&Qa(T,Y,Se)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Y=yield Ti(T,x,"getOobCode",!0);B(Y,g),yield Gn(T,Y)}else B(x,g),yield Gn(T,x).catch(function(){var Y=(0,h.Z)(function*(Se){if("auth/missing-recaptcha-token"!==Se.code)return Promise.reject(Se);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Ti(T,x,"getOobCode",!0);B($e,g),yield Gn(T,$e)}});return function(Se){return Y.apply(this,arguments)}}())}),vo.apply(this,arguments)}function Jf(){return(Jf=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v),T=Ju.credentialWithLink(f,g||wr());return ie(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Za(_,T)})).apply(this,arguments)}function yl(){return(yl=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:createAuthUri",et(v,f))})).apply(this,arguments)}function vl(){return vl=(0,h.Z)(function*(v,f){const _={identifier:f,continueUri:Kr()?wr():"http://localhost"},{signinMethods:T}=yield function oh(v,f){return yl.apply(this,arguments)}((0,P.m9)(v),_);return T||[]}),vl.apply(this,arguments)}function eu(){return eu=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Qa(g.auth,T,f);const{email:x}=yield function cl(v,f){return Zo.apply(this,arguments)}(g.auth,T);x!==v.email&&(yield v.reload())}),eu.apply(this,arguments)}function ic(){return ic=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&Qa(_.auth,x,g);const{email:B}=yield function Lt(v,f){return pn.apply(this,arguments)}(_.auth,x);B!==v.email&&(yield v.reload())}),ic.apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(v,f){return Bt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ta(){return ta=(0,h.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const _=(0,P.m9)(v),x={idToken:yield _.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},B=yield xn(_,function wl(v,f){return sc.apply(this,arguments)}(_.auth,x));_.displayName=B.displayName||null,_.photoURL=B.photoUrl||null;const Y=_.providerData.find(({providerId:Se})=>"password"===Se);Y&&(Y.displayName=_.displayName,Y.photoURL=_.photoURL),yield _._updateTokensIfNecessary(B)}),ta.apply(this,arguments)}function uh(v,f,g){return tu.apply(this,arguments)}function tu(){return(tu=(0,h.Z)(function*(v,f,g){const{auth:_}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(x.email=f),g&&(x.password=g);const B=yield xn(v,al(_,x));yield v._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class _o{constructor(f,g,_={}){this.isNewUser=f,this.providerId=g,this.profile=_}}class oc extends _o{constructor(f,g,_,T){super(f,g,_),this.username=T}}class $r extends _o{constructor(f,g){super(f,"facebook.com",g)}}class ac extends oc{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class El extends _o{constructor(f,g){super(f,"google.com",g)}}class Bs extends oc{constructor(f,g,_){super(f,"twitter.com",g,_)}}function pr(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function bn(v){var f,g;if(!v)return null;const{providerId:_}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!_&&v?.idToken){const B=null===(g=null===(f=mt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new _o(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!_)return null;switch(_){case"facebook.com":return new $r(x,T);case"github.com":return new ac(x,T);case"google.com":return new El(x,T);case"twitter.com":return new Bs(x,T,v.screenName||null);case"custom":case"anonymous":return new _o(x,null);default:return new _o(x,_,T)}}(g)}class pt{constructor(f,g,_){this.type=f,this.credential=g,this.auth=_}static _fromIdtoken(f,g){return new pt("enroll",f,g)}static _fromMfaPendingCredential(f){return new pt("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,_;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return pt._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return pt._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $s{constructor(f,g,_){this.session=f,this.hints=g,this.signInResolver=_}static _fromError(f,g){const _=nr(f),T=g.customData._serverResponse,x=(T.mfaInfo||[]).map(Y=>Xu._fromServerResponse(_,Y));ie(T.mfaPendingCredential,_,"internal-error");const B=pt._fromMfaPendingCredential(T.mfaPendingCredential);return new $s(B,x,function(){var Y=(0,h.Z)(function*(Se){const $e=yield Se._process(_,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Xe=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(g.operationType){case"signIn":const rt=yield Rr._fromIdTokenResponse(_,g.operationType,Xe);return yield _._updateCurrentUser(rt.user),rt;case"reauthenticate":return ie(g.user,_,"internal-error"),Rr._forOperation(g.user,g.operationType,Xe);default:ge(_,"internal-error")}});return function(Se){return Y.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}class nu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>Xu._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new nu(f)}getSession(){var f=this;return(0,h.Z)(function*(){return pt._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var _=this;return(0,h.Z)(function*(){const T=f,x=yield _.getSession(),B=yield xn(_.user,T._process(_.user.auth,x,g));return yield _.user._updateTokensIfNecessary(B),_.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,T=yield g.user.getIdToken();try{const x=yield xn(g.user,function ia(v,f){return Bt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",et(v,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:B})=>B!==_),yield g.user._updateTokensIfNecessary(x),yield g.user.reload()}catch(x){throw x}})()}}const ru=new WeakMap,sa="__sak";class ph{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nn=(()=>{class v extends ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function be(){const v=(0,P.z$)();return se(v)||Et(v)}()&&function ci(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=rs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),x=this.localCache[_];T!==x&&g(_,x,T)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((Y,Se,$e)=>{this.notifyListeners(Y,$e)});const T=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(T);if(g.newValue!==Y)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!_)return}const x=()=>{const Y=this.storage.getItem(T);!_&&this.localCache[T]===Y||this.notifyListeners(T,Y)},B=this.storage.getItem(T);!function bi(){return(0,P.w1)()&&10===document.documentMode}()||B===g.newValue||g.newValue===g.oldValue?x():setTimeout(x,10)}notifyListeners(g,_){this.localCache[g]=_;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var T=()=>super._set,x=this;return(0,h.Z)(function*(){yield T().call(x,g,_),x.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,T=this;return(0,h.Z)(function*(){const x=yield _().call(T,g);return T.localCache[g]=JSON.stringify(x),x})()}_remove(g){var _=()=>super._remove,T=this;return(0,h.Z)(function*(){yield _().call(T,g),delete T.localCache[g]})()}}return v.type="LOCAL",v})(),xi=(()=>{class v extends ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return v.type="SESSION",v})();let iu=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(x=>x.isListeningto(g));if(_)return _;const T=new v(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,h.Z)(function*(){const T=g,{eventId:x,eventType:B,data:Y}=T.data,Se=_.handlersMap[B];if(!Se?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const $e=Array.from(Se).map(function(){var rt=(0,h.Z)(function*(Un){return Un(T.origin,Y)});return function(Un){return rt.apply(this,arguments)}}()),Xe=yield function bs(v){return Promise.all(v.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return f.apply(this,arguments)}}()))}($e);T.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:Xe})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function oa(v="",f=10){let g="";for(let _=0;_<f;_++)g+=Math.floor(10*Math.random());return v+g}class qv{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,_=50){var T=this;return(0,h.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,Y;return new Promise((Se,$e)=>{const Xe=oa("",20);x.port1.start();const rt=setTimeout(()=>{$e(new Error("unsupported_event"))},_);Y={messageChannel:x,onMessage(Un){const yi=Un;if(yi.data.eventId===Xe)switch(yi.data.status){case"ack":clearTimeout(rt),B=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Se(yi.data.response);break;default:clearTimeout(rt),clearTimeout(B),$e(new Error("invalid_response"))}}},T.handlers.add(Y),x.port1.addEventListener("message",Y.onMessage),T.target.postMessage({eventType:f,eventId:Xe,data:g},[x.port2])}).finally(()=>{Y&&T.removeMessageHandler(Y)})})()}}function Zn(){return window}function Or(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function lc(){return(lc=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gh="firebaseLocalStorageDb",su="firebaseLocalStorage",dc="fbase_key";class wo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ou(v,f){return v.transaction([su],f?"readwrite":"readonly").objectStore(su)}function hc(){const v=indexedDB.open(gh,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const _=v.result;try{_.createObjectStore(su,{keyPath:dc})}catch(T){g(T)}}),v.addEventListener("success",(0,h.Z)(function*(){const _=v.result;_.objectStoreNames.contains(su)?f(_):(_.close(),yield function mh(){const v=indexedDB.deleteDatabase(gh);return new wo(v).toPromise()}(),f(yield hc()))}))})}function fc(v,f,g){return au.apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(v,f,g){const _=ou(v,!0).put({[dc]:f,value:g});return new wo(_).toPromise()})).apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(v,f){const g=ou(v,!1).get(f),_=yield new wo(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Ml(v,f){const g=ou(v,!0).delete(f);return new wo(g).toPromise()}const uu=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield hc()),g.db})()}_withRetries(g){var _=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const x=yield _._openDb();return yield g(x)}catch(x){if(T++>3)throw x;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Or()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=iu._getInstance(function gn(){return Or()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(T,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(T,x){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var _,T;if(g.activeServiceWorker=yield function Ts(){return lc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new qv(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);x&&null!==(_=x[0])&&void 0!==_&&_.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Hs(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield hc();return yield fc(g,sa,"1"),yield Ml(g,sa),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(x=>fc(x,g,_)),T.localCache[g]=_,T.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,h.Z)(function*(){const T=yield _._withRetries(x=>function aa(v,f){return Gi.apply(this,arguments)}(x,g));return _.localCache[g]=T,T})()}_remove(g){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(T=>Ml(T,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const _=yield g._withRetries(B=>{const Y=ou(B,!1).getAll();return new wo(Y).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:B,value:Y}of _)x.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(Y)&&(g.notifyListeners(B,Y),T.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!x.has(B)&&(g.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(g,_){this.localCache[g]=_;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),cu=1e12;class rp{constructor(f){this.auth=f,this.counter=cu,this._widgets=new Map}render(f,g){const _=this.counter;return this._widgets.set(_,new vh(f,this.auth.name,g||{})),this.counter++,_}reset(f){var g;const _=f||cu;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(f){var g;return(null===(g=this._widgets.get(f||cu))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var _;return null===(_=g._widgets.get(f||cu))||void 0===_||_.execute(),""})()}}class vh{constructor(f,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ie(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ip(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<v;_++)f.push(g.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nl=co("rcb"),Rl=new we(3e4,6e4);class _h{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Zn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return ie(function lu(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),f,"argument-error"),this.shouldResolveImmediately(g)&&Vt(Zn().grecaptcha)?Promise.resolve(Zn().grecaptcha):new Promise((_,T)=>{const x=Zn().setTimeout(()=>{T(K(f,"network-request-failed"))},Rl.get());Zn()[Nl]=()=>{Zn().clearTimeout(x),delete Zn()[Nl];const Y=Zn().grecaptcha;if(!Y||!Vt(Y))return void T(K(f,"internal-error"));const Se=Y.render;Y.render=($e,Xe)=>{const rt=Se($e,Xe);return this.counter++,rt},this.hostLanguage=g,_(Y)},_s(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Nl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),T(K(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Zn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ol{load(f){return(0,h.Z)(function*(){return new rp(f)})()}clearedOneInstance(){}}const ua="recaptcha",wh={theme:"light",type:"image"};class Pl{constructor(f,g=Object.assign({},wh),_){this.parameters=g,this.type=ua,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(_),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ie(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ol:new _h,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(g)||new Promise(x=>{const B=Y=>{Y&&(f.tokenChangeListeners.delete(B),x(Y))};f.tokenChangeListeners.add(B),f.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof f)f(g);else if("string"==typeof f){const _=Zn()[f];"function"==typeof _&&_(g)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){ie(Kr()&&!Or(),f.auth,"internal-error"),yield function sp(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ee(v){return xe.apply(this,arguments)}(f.auth);ie(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gc{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=zn._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function cr(){return(cr=(0,h.Z)(function*(v,f,g){const _=nr(v),T=yield Kn(_,f,(0,P.m9)(g));return new gc(T,x=>Za(_,x))})).apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);yield Wa(!1,_,"phone");const T=yield Kn(_.auth,f,(0,P.m9)(g));return new gc(T,x=>um(_,x))})).apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v),T=yield Kn(_.auth,f,(0,P.m9)(g));return new gc(T,x=>Wn(_,x))})).apply(this,arguments)}function Kn(v,f,g){return Io.apply(this,arguments)}function Io(){return Io=(0,h.Z)(function*(v,f,g){var _;const T=yield g.verify();try{let x;if(ie("string"==typeof T,v,"argument-error"),ie(g.type===ua,v,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const B=x.session;if("phoneNumber"in x)return ie("enroll"===B.type,v,"internal-error"),(yield function bl(v,f){return Bt(v,"POST","/v2/accounts/mfaEnrollment:start",et(v,f))}(v,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ie("signin"===B.type,v,"internal-error");const Y=(null===(_=x.multiFactorHint)||void 0===_?void 0:_.uid)||x.multiFactorUid;return ie(Y,v,"missing-multi-factor-info"),(yield function np(v,f){return Bt(v,"POST","/v2/accounts/mfaSignIn:start",et(v,f))}(v,{mfaPendingCredential:B.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function eh(v,f){return is.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:T});return B}}finally{g._reset()}}),Io.apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(v,f){yield hl((0,P.m9)(v),f)})).apply(this,arguments)}let us=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=nr(g)}verifyPhoneNumber(g,_){return Kn(this.auth,g,(0,P.m9)(_))}static credential(g,_){return zn._fromVerification(g,_)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:T}=g;return _&&T?zn._fromTokenResponse(_,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Vn(v,f){return f?tn(f):(ie(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Hr extends ws{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Cr(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Cr(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Cr(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function gr(v){return rh(v.auth,new Hr(v),v.bypassAuthState)}function da(v){const{auth:f,user:g}=v;return ie(g,f,"internal-error"),Kf(g,new Hr(v),v.bypassAuthState)}function It(v){return kl.apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(v){const{auth:f,user:g}=v;return ie(g,f,"internal-error"),hl(g,new Hr(v),v.bypassAuthState)})).apply(this,arguments)}class Do{constructor(f,g,_,T,x=!1){this.auth=f,this.resolver=_,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(_,T){f.pendingPromise={resolve:_,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(_,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:x,tenantId:B,error:Y,type:Se}=f;if(Y)return void g.reject(Y);const $e={auth:g.auth,requestUri:_,sessionId:T,tenantId:B||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Se)($e))}catch(Xe){g.reject(Xe)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return gr;case"linkViaPopup":case"linkViaRedirect":return It;case"reauthViaPopup":case"reauthViaRedirect":return da;default:ge(this.auth,"internal-error")}}resolve(f){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zi=new we(2e3,1e4);function cs(){return(cs=(0,h.Z)(function*(v,f,g){const _=nr(v);Te(v,f,ss);const T=Vn(_,g);return new Ri(_,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function le(){return(le=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss);const T=Vn(_.auth,g);return new Ri(_.auth,"reauthViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss);const T=Vn(_.auth,g);return new Ri(_.auth,"linkViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}let Ri=(()=>{class v extends Do{constructor(g,_,T,x,B){super(g,_,x,B),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const _=yield g.execute();return ie(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,h.Z)(function*(){Ht(1===g.filter.length,"Popup operations only handle one event");const _=oa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(K(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(K(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(K(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,zi.get())};g()}}return v.currentPopupAction=null,v})();const Yt="pendingRedirect",mc=new Map;class qi extends Do{constructor(f,g,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let _=mc.get(g.auth._key());if(!_){try{const x=(yield function We(v,f){return du.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;_=()=>Promise.resolve(x)}catch(T){_=()=>Promise.reject(T)}mc.set(g.auth._key(),_)}return g.bypassAuthState||mc.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(_,f);if("unknown"!==f.type){if(f.eventId){const T=yield _.auth._redirectUserForId(f.eventId);if(T)return _.user=T,g().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function du(){return(du=(0,h.Z)(function*(v,f){const g=yc(f),_=Fl(v);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(g));return yield _._remove(g),T})).apply(this,arguments)}function Tt(v,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(v,f){return Fl(v)._set(yc(f),"true")})).apply(this,arguments)}function Ss(v,f){mc.set(v._key(),f)}function Fl(v){return tn(v._redirectPersistence)}function yc(v){return U(Yt,v.config.apiKey,v.name)}function Ll(v,f,g){return function ha(v,f,g){return mr.apply(this,arguments)}(v,f,g)}function mr(){return(mr=(0,h.Z)(function*(v,f,g){const _=nr(v);Te(v,f,ss),yield _._initializationPromise;const T=Vn(_,g);return yield Tt(T,_),T._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function fu(v,f,g){return function ir(v,f,g){return ls.apply(this,arguments)}(v,f,g)}function ls(){return(ls=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss),yield _.auth._initializationPromise;const T=Vn(_.auth,g);yield Tt(T,_.auth);const x=yield Oi(_);return T._openRedirect(_.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function Ih(v,f,g){return function Vl(v,f,g){return ds.apply(this,arguments)}(v,f,g)}function ds(){return(ds=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss),yield _.auth._initializationPromise;const T=Vn(_.auth,g);yield Wa(!1,_,f.providerId),yield Tt(T,_.auth);const x=yield Oi(_);return T._openRedirect(_.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(v,f){return yield nr(v)._initializationPromise,pu(v,f,!1)})).apply(this,arguments)}function pu(v,f){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(v,f,g=!1){const _=nr(v),T=Vn(_,f),B=yield new qi(_,T,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield _._persistUserIfCurrent(B.user),yield _._setRedirectUser(null,f)),B})).apply(this,arguments)}function Oi(v){return pi.apply(this,arguments)}function pi(){return(pi=(0,h.Z)(function*(v){const f=oa(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Ul{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(g=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function jl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zs(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var _;if(f.error&&!zs(f)){const T=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(K(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const _=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bl(f))}saveEventToCache(f){this.cachedEventUids.add(Bl(f)),this.lastProcessedEventTime=Date.now()}}function Bl(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function zs({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function Dh(v){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,h.Z)(function*(v,f={}){return Bt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const vc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,up=/^https?/;function dn(){return(dn=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Dh(v);for(const g of f)try{if(_c(g))return}catch{}ge(v,"unauthorized-domain")})).apply(this,arguments)}function _c(v){const f=wr(),{protocol:g,hostname:_}=new URL(f);if(v.startsWith("chrome-extension://")){const B=new URL(v);return""===B.hostname&&""===_?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===_}if(!up.test(g))return!1;if(vc.test(v))return _===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const So=new we(3e4,6e4);function wc(){const v=Zn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let qs=null;const $l=new we(5e3,15e3),Ws="__/auth/iframe",Th="emulator/auth/iframe",gm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ec=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cp(v){const f=v.config;ie(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?Ae(f,Th):`https://${v.config.authDomain}/${Ws}`,_={apiKey:f.apiKey,appName:v.name,v:J.SDK_VERSION},T=Ec.get(v.config.apiHost);T&&(_.eid=T);const x=v._getFrameworks();return x.length&&(_.fw=x.join(",")),`${g}?${(0,P.xO)(_).slice(1)}`}function C(){return C=(0,h.Z)(function*(v){const f=yield function Pi(v){return qs=qs||function lr(v){return new Promise((f,g)=>{var _,T,x;function B(){wc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{wc(),g(K(v,"network-request-failed"))},timeout:So.get()})}if(null!==(T=null===(_=Zn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(x=Zn().gapi)||void 0===x||!x.load){const Y=co("iframefcb");return Zn()[Y]=()=>{gapi.load?B():g(K(v,"network-request-failed"))},_s(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Se=>g(Se))}B()}}).catch(f=>{throw qs=null,f})}(v),qs}(v),g=Zn().gapi;return ie(g,v,"internal-error"),f.open({where:document.body,url:cp(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gm,dontclear:!0},_=>new Promise(function(){var T=(0,h.Z)(function*(x,B){yield _.restyle({setHideOnLeave:!1});const Y=K(v,"network-request-failed"),Se=Zn().setTimeout(()=>{B(Y)},$l.get());function $e(){Zn().clearTimeout(Se),x(_)}_.ping($e).then($e,()=>{B(Y)})});return function(x,B){return T.apply(this,arguments)}}()))}),C.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ge{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const St="__/auth/handler",At="emulator/auth/handler",kr=encodeURIComponent("fac");function sr(v,f,g,_,T,x){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(v,f,g,_,T,x){ie(v.config.authDomain,v,"auth-domain-config-required"),ie(v.config.apiKey,v,"invalid-api-key");const B={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:_,v:J.SDK_VERSION,eventId:T};if(f instanceof ss){f.setDefaultLanguage(v.languageCode),B.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Xe,rt]of Object.entries(x||{}))B[Xe]=rt}if(f instanceof ei){const Xe=f.getScopes().filter(rt=>""!==rt);Xe.length>0&&(B.scopes=Xe.join(","))}v.tenantId&&(B.tid=v.tenantId);const Y=B;for(const Xe of Object.keys(Y))void 0===Y[Xe]&&delete Y[Xe];const Se=yield v._getAppCheckToken(),$e=Se?`#${kr}=${encodeURIComponent(Se)}`:"";return`${function Ic({config:v}){return v.emulator?Ae(v,At):`https://${v.authDomain}/${St}`}(v)}?${(0,P.xO)(Y).slice(1)}${$e}`})).apply(this,arguments)}const hs="webStorageSupport",ki=class gi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xi,this._completeRedirectFn=pu,this._overrideRedirectResult=Ss}_openPopup(f,g,_,T){var x=this;return(0,h.Z)(function*(){var B;Ht(null===(B=x.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Y=yield sr(f,g,_,wr(),T);return function Be(v,f,g,_=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-_)/2,0).toString();let Y="";const Se=Object.assign(Object.assign({},M),{width:_.toString(),height:T.toString(),top:x,left:B}),$e=(0,P.z$)().toLowerCase();g&&(Y=nt($e)?"_blank":g),_e($e)&&(f=f||"http://localhost",Se.scrollbars="yes");const Xe=Object.entries(Se).reduce((Un,[yi,No])=>`${Un}${yi}=${No},`,"");if(function Dr(v=(0,P.z$)()){var f;return Et(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}($e)&&"_self"!==Y)return function st(v,f){const g=document.createElement("a");g.href=v,g.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(f||"",Y),new Ge(null);const rt=window.open(f||"",Y,Xe);ie(rt,v,"popup-blocked");try{rt.focus()}catch{}return new Ge(rt)}(f,Y,oa())})()}_openRedirect(f,g,_,T){var x=this;return(0,h.Z)(function*(){return yield x._originValidation(f),function Al(v){Zn().location.href=v}(yield sr(f,g,_,wr(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:x}=this.eventManagers[g];return T?Promise.resolve(T):(Ht(x,"If manager is not set, promise should be"),x)}const _=this.initAndGetManager(f);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const _=yield function E(v){return C.apply(this,arguments)}(f),T=new Ul(f);return _.register("authEvent",x=>(ie(x?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=_,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(hs,{type:hs},T=>{var x;const B=null===(x=T?.[0])||void 0===x?void 0:x[hs];void 0!==B&&g(!!B),ge(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function bh(v){return dn.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return rs()||se()||Et()}};class fa{constructor(f){this.factorId=f}_process(f,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,_);case"signin":return this._finalizeSignIn(f,g.credential);default:return je("unexpected MultiFactorSessionType")}}}class Yn extends fa{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Yn(f)}_finalizeEnroll(f,g,_){return function ep(v,f){return Bt(v,"POST","/v2/accounts/mfaEnrollment:finalize",et(v,f))}(f,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ti(v,f){return Bt(v,"POST","/v2/accounts/mfaSignIn:finalize",et(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fr=(()=>{class v{constructor(){}static assertion(g){return Yn._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var mm="@firebase/auth";class vm{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zs(){return window}(0,P.Pz)("authIdTokenMaxAge"),function mE(v){(0,J._registerComponent)(new pe.wA("auth",(f,{options:g})=>{const _=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),x=f.getProvider("app-check-internal"),{apiKey:B,authDomain:Y}=_.options;ie(B&&!B.includes(":"),"invalid-api-key",{appName:_.name});const Se={apiKey:B,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ce(v)},$e=new Yd(_,T,x,Se);return function zf(v,f){const g=f?.persistence||[],_=(Array.isArray(g)?g:[g]).map(tn);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(_,f?.popupRedirectResolver)}($e,g),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,_)=>{f.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new pe.wA("auth-internal",f=>{const g=nr(f.getProvider("auth").getImmediate());return new vm(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(mm,"0.23.2",function Wv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,J.registerVersion)(mm,"0.23.2","esm2017")}("Browser");function Wl(){return Wl=(0,h.Z)(function*(v,f,g){var _;const{BuildInfo:T}=Zs();Ht(f.sessionId,"AuthEvent did not contain a session ID");const x=yield function fp(v){return Em.apply(this,arguments)}(f.sessionId),B={};return Et()?B.ibi=T.packageName:Rt()?B.apn=T.packageName:ge(v,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=x,sr(v,g,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,B)}),Wl.apply(this,arguments)}function yu(){return(yu=(0,h.Z)(function*(v){const{BuildInfo:f}=Zs(),g={};Et()?g.iosBundleId=f.packageName:Rt()?g.androidPackageName=f.packageName:ge(v,"operation-not-supported-in-this-environment"),yield Dh(v,g)})).apply(this,arguments)}function dp(){return(dp=(0,h.Z)(function*(v,f,g){const{cordova:_}=Zs();let T=()=>{};try{yield new Promise((x,B)=>{let Y=null;function Se(){var rt;x();const Un=null===(rt=_.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof Un&&Un(),"function"==typeof g?.close&&g.close()}function $e(){Y||(Y=window.setTimeout(()=>{B(K(v,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===document?.visibilityState&&$e()}f.addPassiveListener(Se),document.addEventListener("resume",$e,!1),Rt()&&document.addEventListener("visibilitychange",Xe,!1),T=()=>{f.removePassiveListener(Se),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",Xe,!1),Y&&window.clearTimeout(Y)}})}finally{T()}})).apply(this,arguments)}function Em(){return(Em=(0,h.Z)(function*(v){const f=function Zl(v){if(Ht(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let _=0;_<v.length;_++)g[_]=v.charCodeAt(_);return g}(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class _E extends Ul{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function ga(v){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,h.Z)(function*(v){const f=yield Lr()._get(Ao(v));return f&&(yield Lr()._remove(Ao(v))),f})).apply(this,arguments)}function pp(){const v=[];for(let g=0;g<20;g++){const _=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return v.join("")}function Lr(){return tn(Nn)}function Ao(v){return U("authEvent",v.config.apiKey,v.name)}function ma(v){if(!v?.includes("?"))return{};const[f,...g]=v.split("?");return(0,P.zd)(g.join("?"))}const Cm=class Dm{constructor(){this._redirectPersistence=xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pu,this._overrideRedirectResult=Ss}_initialize(f){var g=this;return(0,h.Z)(function*(){const _=f._key();let T=g.eventManagers.get(_);return T||(T=new _E(f),g.eventManagers.set(_,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){ge(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,_,T){var x=this;return(0,h.Z)(function*(){!function hp(v){var f,g,_,T,x,B,Y,Se,$e,Xe;const rt=Zs();ie("function"==typeof(null===(f=rt?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(typeof(null===(g=rt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie("function"==typeof(null===(x=null===(T=null===(_=rt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(Se=null===(Y=null===(B=rt?.cordova)||void 0===B?void 0:B.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Se?void 0:Se.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(Xe=null===($e=rt?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===Xe?void 0:Xe.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield x._initialize(f);yield B.initialized(),B.resetRedirect(),function bo(){mc.clear()}(),yield x._originValidation(f);const Y=function Dc(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:pp(),postBody:null,tenantId:v.tenantId,error:K(v,"no-auth-event")}}(f,_,T);yield function Im(v,f){return Lr()._set(Ao(v),f)}(f,Y);const Se=yield function _m(v,f,g){return Wl.apply(this,arguments)}(f,Y,g),$e=yield function wm(v){const{cordova:f}=Zs();return new Promise(g=>{f.plugins.browsertab.isAvailable(_=>{let T=null;_?f.plugins.browsertab.openUrl(v):T=f.InAppBrowser.open(v,function zt(v=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(T)})})}(Se);return function Mh(v,f,g){return dp.apply(this,arguments)}(f,B,$e)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function yE(v){return yu.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:_,handleOpenURL:T,BuildInfo:x}=Zs(),B=setTimeout((0,h.Z)(function*(){yield ga(f),g.onEvent(Sc())}),500),Y=function(){var Xe=(0,h.Z)(function*(rt){clearTimeout(B);const Un=yield ga(f);let yi=null;Un&&rt?.url&&(yi=function bc(v,f){var g,_;const T=function vu(v){const f=ma(v),g=f.link?decodeURIComponent(f.link):void 0,_=ma(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ma(T).link||T||_||g||v}(f);if(T.includes("/__/auth/callback")){const x=ma(T),B=x.firebaseError?function Tc(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Y=null===(_=null===(g=B?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Se=Y?K(Y):null;return Se?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Se,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(Un,rt.url)),g.onEvent(yi||Sc())});return function(Un){return Xe.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Y);const Se=T,$e=`${x.packageName.toLowerCase()}://`;Zs().handleOpenURL=function(){var Xe=(0,h.Z)(function*(rt){if(rt.toLowerCase().startsWith($e)&&Y({url:rt}),"function"==typeof Se)try{Se(rt)}catch(Un){console.error(Un)}});return function(rt){return Xe.apply(this,arguments)}}()}};function Sc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:K("no-auth-event")}}function Mo(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function bm(v=(0,P.z$)()){return!("file:"!==Mo()&&"ionic:"!==Mo()&&"capacitor:"!==Mo()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ql(){try{const v=self.localStorage,f=oa();if(v)return v.setItem(f,"1"),v.removeItem(f),!function vp(v=(0,P.z$)()){return function Gr(){return(0,P.w1)()&&11===document?.documentMode}()||function Yl(v=(0,P.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,P.hl)()}catch{return Tr()&&(0,P.hl)()}return!1}function Tr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _u(){return(function mp(){return"http:"===Mo()||"https:"===Mo()}()||(0,P.ru)()||bm())&&!function yp(){return(0,P.b$)()||(0,P.UG)()}()&&Ql()&&!Tr()}function wu(){return bm()&&typeof document<"u"}function Ac(){return(Ac=(0,h.Z)(function*(){return!!wu()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Sr={LOCAL:"local",NONE:"none",SESSION:"session"},ya=ie,Tm="persistence";function Rh(v){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,h.Z)(function*(v){yield v._initializationPromise;const f=Ks(),g=U(Tm,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function Ks(){var v;try{return(null===(v=function Mc(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const xo=ie;class mi{constructor(){this.browserResolver=tn(ki),this.cordovaResolver=tn(Cm),this.underlyingResolver=null,this._redirectPersistence=xi,this._completeRedirectFn=pu,this._overrideRedirectResult=Ss}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,_,T){var x=this;return(0,h.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,g,_,T)})()}_openRedirect(f,g,_,T){var x=this;return(0,h.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,g,_,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return wu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function _p(){return Ac.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Jl(v){return v.unwrap()}function Tn(v){return Eu(v)}function Eu(v){const{_tokenResponse:f}=v instanceof P.ZR?v.customData:v;if(!f)return null;if(!(v instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return us.credentialFromResult(v);const g=f.providerId;if(!g||g===he.PASSWORD)return null;let _;switch(g){case he.GOOGLE:_=mo;break;case he.FACEBOOK:_=go;break;case he.GITHUB:_=fr;break;case he.TWITTER:_=Is;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:Y,nonce:Se}=f;return x||B||T||Y?Y?g.startsWith("saml.")?qn._create(g,Y):Xr._fromParams({providerId:g,signInMethod:g,pendingToken:Y,idToken:T,accessToken:x}):new Ai(g).credential({idToken:T,accessToken:x,rawNonce:Se}):null}return v instanceof P.ZR?_.credentialFromError(v):_.credentialFromResult(v)}function Qn(v,f){return f.catch(g=>{throw g instanceof P.ZR&&function xc(v,f){var g;const _=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Ep(v,function dh(v,f){var g;const _=(0,P.m9)(v),T=f;return ie(f.customData.operationType,_,"argument-error"),ie(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),$s._fromError(_,T)}(v,f));else if(_){const T=Eu(f),x=f;T&&(x.credential=T,x.tenantId=_.tenantId||void 0,x.email=_.email||void 0,x.phoneNumber=_.phoneNumber||void 0)}}(v,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Tn(g),additionalUserInfo:pr(g),user:ps.getOrCreate(T)}})}function Nc(v,f){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:_=>Qn(v,g.confirm(_))}})).apply(this,arguments)}class Ep{constructor(f,g){this.resolver=g,this.auth=function Am(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Qn(Jl(this.auth),this.resolver.resolveSignIn(f))}}class ps{constructor(f){this._delegate=f,this.multiFactor=function Tl(v){const f=(0,P.m9)(v);return ru.has(f)||ru.set(f,nu._fromUser(f)),ru.get(f)}(f)}static getOrCreate(f){return ps.USER_MAP.has(f)||ps.USER_MAP.set(f,new ps(f)),ps.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return Qn(g.auth,um(g._delegate,f))})()}linkWithPhoneNumber(f,g){var _=this;return(0,h.Z)(function*(){return Nc(_.auth,function op(v,f,g){return Ni.apply(this,arguments)}(_._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return Qn(g.auth,function Gs(v,f,g){return Co.apply(this,arguments)}(g._delegate,f,mi))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Rh(nr(g.auth)),Ih(g._delegate,f,mi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return Qn(g.auth,Wn(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Nc(this.auth,function wn(v,f,g){return _t.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Qn(this.auth,function ap(v,f,g){return le.apply(this,arguments)}(this._delegate,f,mi))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Rh(nr(g.auth)),fu(g._delegate,f,mi)})()}sendEmailVerification(f){return function rc(v,f){return eu.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function am(v,f){return os.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Xf(v,f){return uh((0,P.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Hi(v,f){return uh((0,P.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Eh(v,f){return la.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function hm(v,f){return ta.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function _l(v,f,g){return ic.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const ed=ie;let Mm=(()=>{class v{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;ed(T,"invalid-api-key",{appName:g.name}),ed(T,"invalid-api-key",{appName:g.name});const x=typeof window<"u"?mi:void 0;this._delegate=_.initialize({options:{persistence:va(T,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Yu(v,f,g){const _=nr(v);ie(_._canInitEmulator,_,"emulator-config-failed"),ie(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const T=!!g?.disableWarnings,x=ho(f),{host:B,port:Y}=function Qd(v){const f=ho(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const x=T[1];return{host:x,port:Jd(_.substr(x.length+1))}}{const[x,B]=_.split(":");return{host:x,port:Jd(B)}}}(f);_.config.emulator={url:`${x}//${B}${null===Y?"":`:${Y}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:B,port:Y,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function im(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,_)}applyActionCode(g){return function tc(v,f){return Mi.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ja(this._delegate,g)}confirmPasswordReset(g,_){return function ec(v,f,g){return rr.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var T=this;return(0,h.Z)(function*(){return Qn(T._delegate,function Qf(v,f,g){return Xa.apply(this,arguments)}(T._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ah(v,f){return vl.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function dm(v,f){const g=$t.parseLink(f);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){ed(_u(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function To(v,f){return Rn.apply(this,arguments)}(g._delegate,mi);return _?Qn(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function xh(v,f){nr(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,_,T){const{next:x,error:B,complete:Y}=Rc(g,_,T);return this._delegate.onAuthStateChanged(x,B,Y)}onIdTokenChanged(g,_,T){const{next:x,error:B,complete:Y}=Rc(g,_,T);return this._delegate.onIdTokenChanged(x,B,Y)}sendSignInLinkToEmail(g,_){return function nc(v,f,g){return vo.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function lm(v,f,g){return Br.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,h.Z)(function*(){let T;switch(function Sm(v,f){ya(Object.values(Sr).includes(f),v,"invalid-persistence-type"),(0,P.b$)()?ya(f!==Sr.SESSION,v,"unsupported-persistence-type"):(0,P.UG)()?ya(f===Sr.NONE,v,"unsupported-persistence-type"):Tr()?ya(f===Sr.NONE||f===Sr.LOCAL&&(0,P.hl)(),v,"unsupported-persistence-type"):ya(f===Sr.NONE||Ql(),v,"unsupported-persistence-type")}(_._delegate,g),g){case Sr.SESSION:T=xi;break;case Sr.LOCAL:T=(yield tn(uu)._isAvailable())?uu:Nn;break;case Sr.NONE:T=Zt;break;default:return ge("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Qn(this._delegate,function om(v){return dl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Qn(this._delegate,Za(this._delegate,g))}signInWithCustomToken(g){return Qn(this._delegate,function Cs(v,f){return $i.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return Qn(this._delegate,function ml(v,f,g){return Za((0,P.m9)(v),Ju.credential(f,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return Qn(this._delegate,function jr(v,f,g){return Jf.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return Nc(this._delegate,function ca(v,f,g){return cr.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,h.Z)(function*(){return ed(_u(),_._delegate,"operation-not-supported-in-this-environment"),Qn(_._delegate,function fi(v,f,g){return cs.apply(this,arguments)}(_._delegate,g,mi))})()}signInWithRedirect(g){var _=this;return(0,h.Z)(function*(){return ed(_u(),_._delegate,"operation-not-supported-in-this-environment"),yield Rh(_._delegate),Ll(_._delegate,g,mi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Xo(v,f){return ea.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Sr,v})();function Rc(v,f,g){let _=v;"function"!=typeof v&&({next:_,error:f,complete:g}=v);const T=_;return{next:B=>T(B&&ps.getOrCreate(B)),error:f,complete:g}}function va(v,f){const g=function wp(v,f){const g=Ks();if(!g)return[];const _=U(Tm,v,f);switch(g.getItem(_)){case Sr.NONE:return[Zt];case Sr.LOCAL:return[uu,xi];case Sr.SESSION:return[xi];default:return[]}}(v,f);if(typeof self<"u"&&!g.includes(uu)&&g.push(uu),typeof window<"u")for(const _ of[Nn,xi])g.includes(_)||g.push(_);return g.includes(Zt)||g.push(Zt),g}class Ph{constructor(){this.providerId="phone",this._delegate=new us(Jl(q.Z.auth()))}static credential(f,g){return us.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ph.PHONE_SIGN_IN_METHOD=us.PHONE_SIGN_IN_METHOD,Ph.PROVIDER_ID=us.PROVIDER_ID;const xm=ie;class Ip{constructor(f,g,_=q.Z.app()){var T;xm(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Pl(f,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Nm(v){v.INTERNAL.registerComponent(new pe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new Mm(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ju,FacebookAuthProvider:go,GithubAuthProvider:fr,GoogleAuthProvider:mo,OAuthProvider:Ai,SAMLAuthProvider:Qo,PhoneAuthProvider:Ph,PhoneMultiFactorGenerator:Fr,RecaptchaVerifier:Ip,TwitterAuthProvider:Is,Auth:Mm,AuthCredential:ws,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(q.Z)},5861:(at,Ee,O)=>{function h(P,J,ne,de,pe,Pe,he){try{var V=P[Pe](he),j=V.value}catch(Q){return void ne(Q)}V.done?J(j):Promise.resolve(j).then(de,pe)}function q(P){return function(){var J=this,ne=arguments;return new Promise(function(de,pe){var Pe=P.apply(J,ne);function he(j){h(Pe,de,pe,he,V,"next",j)}function V(j){h(Pe,de,pe,he,V,"throw",j)}he(void 0)})}}O.d(Ee,{Z:()=>q})},7582:(at,Ee,O)=>{function J(ae,me){var we={};for(var Ae in ae)Object.prototype.hasOwnProperty.call(ae,Ae)&&me.indexOf(Ae)<0&&(we[Ae]=ae[Ae]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Ae=Object.getOwnPropertySymbols(ae);He<Ae.length;He++)me.indexOf(Ae[He])<0&&Object.prototype.propertyIsEnumerable.call(ae,Ae[He])&&(we[Ae[He]]=ae[Ae[He]])}return we}function Q(ae,me,we,Ae){return new(we||(we=Promise))(function(Ve,wt){function et(ct){try{tt(Ae.next(ct))}catch(Dn){wt(Dn)}}function Bt(ct){try{tt(Ae.throw(ct))}catch(Dn){wt(Dn)}}function tt(ct){ct.done?Ve(ct.value):function He(Ve){return Ve instanceof we?Ve:new we(function(wt){wt(Ve)})}(ct.value).then(et,Bt)}tt((Ae=Ae.apply(ae,me||[])).next())})}function te(ae){return this instanceof te?(this.v=ae,this):new te(ae)}function ge(ae,me,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Ae=we.apply(ae,me||[]),Ve=[];return He={},wt("next"),wt("throw"),wt("return"),He[Symbol.asyncIterator]=function(){return this},He;function wt(nn){Ae[nn]&&(He[nn]=function(Fn){return new Promise(function(Jt,si){Ve.push([nn,Fn,Jt,si])>1||et(nn,Fn)})})}function et(nn,Fn){try{!function Bt(nn){nn.value instanceof te?Promise.resolve(nn.value.v).then(tt,ct):Dn(Ve[0][2],nn)}(Ae[nn](Fn))}catch(Jt){Dn(Ve[0][3],Jt)}}function tt(nn){et("next",nn)}function ct(nn){et("throw",nn)}function Dn(nn,Fn){nn(Fn),Ve.shift(),Ve.length&&et(Ve[0][0],Ve[0][1])}}function fe(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,me=ae[Symbol.asyncIterator];return me?me.call(ae):(ae=function Me(ae){var me="function"==typeof Symbol&&Symbol.iterator,we=me&&ae[me],Ae=0;if(we)return we.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&Ae>=ae.length&&(ae=void 0),{value:ae&&ae[Ae++],done:!ae}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),we={},Ae("next"),Ae("throw"),Ae("return"),we[Symbol.asyncIterator]=function(){return this},we);function Ae(Ve){we[Ve]=ae[Ve]&&function(wt){return new Promise(function(et,Bt){!function He(Ve,wt,et,Bt){Promise.resolve(Bt).then(function(tt){Ve({value:tt,done:et})},wt)}(et,Bt,(wt=ae[Ve](wt)).done,wt.value)})}}}O.d(Ee,{FC:()=>ge,KL:()=>fe,_T:()=>J,mG:()=>Q,qq:()=>te})}},at=>{at(at.s=9300)}]);